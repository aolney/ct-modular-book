<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 10 Controllers | Computational Thinking through Modular Sounds Synthesis</title>
<meta name="author" content="Andrew M. Olney">
<meta name="description" content="This chapter extends Chapter 5 by introducing more advanced approaches to sequencing. Sequencing can be considered a kind of memory for musical events where the events can be stored and played...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="Chapter 10 Controllers | Computational Thinking through Modular Sounds Synthesis">
<meta property="og:type" content="book">
<meta property="og:url" content="https://olney.ai/ct-modular-book/index.html/complex-controllers.html">
<meta property="og:description" content="This chapter extends Chapter 5 by introducing more advanced approaches to sequencing. Sequencing can be considered a kind of memory for musical events where the events can be stored and played...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 10 Controllers | Computational Thinking through Modular Sounds Synthesis">
<meta name="twitter:description" content="This chapter extends Chapter 5 by introducing more advanced approaches to sequencing. Sequencing can be considered a kind of memory for musical events where the events can be stored and played...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Computational Thinking through Modular Sounds Synthesis</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Sound</li>
<li><a class="" href="physics-and-perception-of-sound.html"><span class="header-section-number">2</span> Physics and Perception of Sound</a></li>
<li><a class="" href="harmonic-and-inharmonic-sounds.html"><span class="header-section-number">3</span> Harmonic and Inharmonic Sounds</a></li>
<li class="book-part">Fundamental Modules</li>
<li><a class="" href="basic-modeling-concepts.html"><span class="header-section-number">4</span> Basic Modeling Concepts</a></li>
<li><a class="" href="controllers.html"><span class="header-section-number">5</span> Controllers</a></li>
<li><a class="" href="generators.html"><span class="header-section-number">6</span> Generators</a></li>
<li><a class="" href="modifiers.html"><span class="header-section-number">7</span> Modifiers</a></li>
<li class="book-part">Sound Design 1</li>
<li><a class="" href="designing-a-kick-drum.html"><span class="header-section-number">8</span> Designing a Kick Drum</a></li>
<li><a class="" href="eighties-lead-chiptune.html"><span class="header-section-number">9</span> Eighties Lead &amp; Chiptune</a></li>
<li class="book-part">Complex Modules</li>
<li><a class="active" href="complex-controllers.html"><span class="header-section-number">10</span> Controllers</a></li>
<li><a class="" href="complex-generators.html"><span class="header-section-number">11</span> Generators</a></li>
<li><a class="" href="complex-modifiers.html"><span class="header-section-number">12</span> Modifiers</a></li>
<li class="book-part">Sound Design 2</li>
<li><a class="" href="sd2-B.html"><span class="header-section-number">13</span> TBD &amp; TBD</a></li>
<li class="book-part">Sound Design 2</li>
<li><a class="" href="sd2-A.html"><span class="header-section-number">14</span> TBD &amp; TBD</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/aolney/ct-modular-book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="complex-controllers" class="section level1" number="10">
<h1>
<span class="header-section-number">10</span> Controllers<a class="anchor" aria-label="anchor" href="#complex-controllers"><i class="fas fa-link"></i></a>
</h1>
<p>This chapter extends Chapter <a href="controllers.html#controllers">5</a> by introducing more advanced approaches to sequencing.
Sequencing can be considered a kind of memory for musical events where the events can be stored and played back later.
Obviously there are gaps between events because not all notes (or beats) play at once.
This leads to the idea that sequencing involves both <a href="https://en.wikipedia.org/wiki/Figure%E2%80%93ground_(perception)">positive space and negative space</a>: positive space where musical events occur and negative space elsewhere.</p>
<p>This idea of positive and negative space can be seen clearly in step based sequencers that allow steps without events, such as the trigger sequencers discussed in Chapter <a href="controllers.html#controllers">5</a>.
However, a step-based conceptualization of sequencing leads to the limitation that a step should represent the smallest duration event, and such fine granularity naturally leads to more steps being empty.
An event-based conceptualization that flexibly represents the start and end of each event, in contrast, has less need to explicitly define negative space.
For example, consider a sequence with two notes, the first lasting 2 units, followed by 4 units of silence, followed by the second note lasting 1 unit.
A step-based representation would use 7 steps and four of them would be empty.
An event-based representation would use two events, one starting at time 1 and lasting 2 units and one starting at time 6 and lasting 1 unit.</p>
<p>In practice, modular sequencing often combines both step-based and event-based elements.
The reason for combining both is that each has different strengths.
To better appreciate these strengths, let’s define three ideal properties of a sequencing approach and use it to evaluate alternatives.
An ideal sequencing approach should allow:</p>
<ul>
<li>Compact representation of variations, i.e. in a minimal amount of space</li>
<li>Ease of changes between variations</li>
<li>Precise control of variations</li>
</ul>
<p>It turns out that sometimes these properties are at odds with each other, such that different combinations of modules can outperform on some and underperform on others.
As we examine different options in this chapter, we’ll keep this properties in mind.</p>
<div id="modifying-gates" class="section level2" number="10.1">
<h2>
<span class="header-section-number">10.1</span> Modifying gates<a class="anchor" aria-label="anchor" href="#modifying-gates"><i class="fas fa-link"></i></a>
</h2>
<p>One of the limitations of pure clock-based sequencing is that every gate starts <a href="https://en.wikipedia.org/wiki/Beat_(music)#On-beat_and_off-beat">on the beat</a>.
Unfortunately, <a href="https://en.wikipedia.org/wiki/Syncopation">syncopation</a>, which emphasizes off beats, is widespread in modern music.
The on-beat property of clock divisions is illustrated in Figure <a href="complex-controllers.html#fig:clock-div2-div4">10.1</a>.
If we consider the clock to represent quarter notes, then the gaps between clock gates are eighth note off beats, i.e. if we count 1-and 2-and 3-and 4-and, the off beats are ‘and’.</p>

<div class="figure">
<span style="display:block;" id="fig:clock-div2-div4"></span>
<img src="images/clock-div2-div4.png" alt="Four gates from a clock (small) overlaid with two gates from a /2 clock division (medium) and further overlaid by one gate from a /4 clock division (large). If we consider each clock gate as defining a quarter note, then all three gates occur on the first quarter note and the first two occur on the third quarter note, so the three gates are aligning only on beats." width="100%"><p class="caption">
Figure 10.1: Four gates from a clock (small) overlaid with two gates from a /2 clock division (medium) and further overlaid by one gate from a /4 clock division (large). If we consider each clock gate as defining a quarter note, then all three gates occur on the first quarter note and the first two occur on the third quarter note, so the three gates are aligning only on beats.
</p>
</div>
<p>Let’s build a basic patch with clock divisions that illustrates this on beat property both in sound and visually on the scope.
To keep things simple throughout this chapter, we will modify this percussion-oriented patch and note differences with sequencing pitches.
All the modules and concepts in this patch were introduced in previous chapters, except for a new three-voice percussion module that can produce various sounds.
Try patching up this basic percussion patch with clock divisions using the button in Figure <a href="complex-controllers.html#fig:clock-division-drums-mschack">10.2</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setclock_division_drums_mschackIframe('https://cardinal.olney.ai?patchurl=empty.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#clock_division_drums_mschack">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="clock_division_drums_mschack" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="clock_division_drums_mschackLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="clock_division_drums_mschackLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add BPM Clock, Dividah, Synth Drums, Scope, QuadVCA/Mixer, and Host audio&lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to Synth Drums top LVL and TRIG. This will be the kick drum&lt;/li&gt;
&lt;li&gt;Connect Clock out to Synth Drums middle LVL and TRIG. This will be the closed hat&lt;/li&gt;
&lt;li&gt;Connect Dividah by 8 out to Synth Drums bottom LVL and TRIG. This will be the open hat&lt;/li&gt;
&lt;li&gt;Connect the kick out to Scope in 1 and QuadVCA/Mixer input 1, snare out to QuadVCA/Mixer input 2, and hat out to Scope in 2 and QuadVCA/Mixer input 3&lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to Host audio L&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the sound type (checkbox), freq, hit, and release time for kick, closed hat, and open hat. These correspond to the module parameters you'd use if you'd made these voices with multiple modules like VCO, noise, and ADSR&lt;/li&gt;
&lt;li&gt;Adjust the QuadVCA/Mixer levels&lt;/li&gt;
&lt;li&gt;Adjust the BPM so that kick is at about 120 (and the closed hat is twice that) &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/synthdrums-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/clock-division-drums-mschack.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add BPM Clock, Dividah, Synth Drums, Scope, QuadVCA/Mixer, and Host audio&lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to Synth Drums top LVL and TRIG. This will be the kick drum&lt;/li&gt;
&lt;li&gt;Connect Clock out to Synth Drums middle LVL and TRIG. This will be the closed hat&lt;/li&gt;
&lt;li&gt;Connect Dividah by 8 out to Synth Drums bottom LVL and TRIG. This will be the open hat&lt;/li&gt;
&lt;li&gt;Connect the kick out to Scope in 1 and QuadVCA/Mixer input 1, snare out to QuadVCA/Mixer input 2, and hat out to Scope in 2 and QuadVCA/Mixer input 3&lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to Host audio L&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the sound type (checkbox), freq, hit, and release time for kick, closed hat, and open hat. These correspond to the module parameters you'd use if you'd made these voices with multiple modules like VCO, noise, and ADSR&lt;/li&gt;
&lt;li&gt;Adjust the QuadVCA/Mixer levels&lt;/li&gt;
&lt;li&gt;Adjust the BPM so that kick is at about 120 (and the closed hat is twice that) &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/synthdrums-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/clock-division-drums-mschack.png'&gt;">Solution</button>
        <button type="button" onclick="setclock_division_drums_mschackIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="clock_division_drums_mschack-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setclock_division_drums_mschackIframe(url){
  var clock_division_drums_mschackIframe = document.getElementById("clock_division_drums_mschack-iframe");
  clock_division_drums_mschackIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:clock-division-drums-mschack"></span>
<p class="caption">
Figure 10.2: <a href="https://cardinal.olney.ai">Virtual modular</a> for a basic percussion patch using clock divisions.
</p>
</div>
<p>In light of the ideal properties for sequencing, the basic clock division approach allows both compact representation in terms of divisions and ease of changing between variations by changing divisions.
However it lacks precise control because off beats are inaccessible.
Other related complications include increasing the number of hits on a particular beat, sometimes called a <a href="https://en.wikipedia.org/wiki/Drum_rudiment#Roll_rudiments">roll</a> and skipping a beat.
All three of these variations can be approached by modifying existing gates, a concept that was first introduced in Section <a href="controllers.html#sequencing-note-duration">5.2.3.2</a> for sequencing note duration.
Since sequencing note duration is identical to sequencing gate duration, we’ll look at only the other two techniques here.</p>
<p>Hitting an off beat can be accomplished using a gate delay module.
A gate delay module receives an incoming gate (sometimes a trigger) and then create another gate at some time delay.
If the time delay corresponds to the length of a beat, then the delayed gate will appear on the off beat.
Try extending the last patch with a gate delay to move the open hat to the off beat using the button in Figure <a href="complex-controllers.html#fig:clock-division-drums-mschack-offbeat-gate-delay">10.3</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setclock_division_drums_mschack_offbeat_gate_delayIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#clock_division_drums_mschack_offbeat_gate_delay">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="clock_division_drums_mschack_offbeat_gate_delay" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="clock_division_drums_mschack_offbeat_gate_delayLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="clock_division_drums_mschack_offbeat_gate_delayLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add DGATE between Dividah and Synth Drums&lt;/li&gt;
&lt;li&gt;Connect Dividah by 8 out to DGATE trig in and connect DGATE gate out to both LVL and Trig inputs for the open hat&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the DGATE delay to get the open hat on a kick offbeat&lt;/li&gt;
&lt;li&gt;Adjust the DGATE Gate, a length parameter, so see the effect of choking the hat&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/dgate-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/clock-division-drums-mschack-offbeat-gate-delay.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add DGATE between Dividah and Synth Drums&lt;/li&gt;
&lt;li&gt;Connect Dividah by 8 out to DGATE trig in and connect DGATE gate out to both LVL and Trig inputs for the open hat&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the DGATE delay to get the open hat on a kick offbeat&lt;/li&gt;
&lt;li&gt;Adjust the DGATE Gate, a length parameter, so see the effect of choking the hat&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/dgate-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/clock-division-drums-mschack-offbeat-gate-delay.png'&gt;">Solution</button>
        <button type="button" onclick="setclock_division_drums_mschack_offbeat_gate_delayIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="clock_division_drums_mschack_offbeat_gate_delay-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setclock_division_drums_mschack_offbeat_gate_delayIframe(url){
  var clock_division_drums_mschack_offbeat_gate_delayIframe = document.getElementById("clock_division_drums_mschack_offbeat_gate_delay-iframe");
  clock_division_drums_mschack_offbeat_gate_delayIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:clock-division-drums-mschack-offbeat-gate-delay"></span>
<p class="caption">
Figure 10.3: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using clock divisions and a gate delay to hit an off beat.
</p>
</div>
<p>With respect to the three ideal properties, the delayed gate approach (combined with clock divisions) is still compact, a bit less easy (because setting the delay is a bit fiddly), and more flexible, though the offset is the same for each clock or clock division.
Thus if we want variations of off beat or rolls, we need additional tools.</p>
<p>Drum rolls can be accomplished using a gate multiplier.
Gate multipliers will generally need a control voltage telling them how many gates to make, which correspond to the number of hits in the roll.
Thus an additional sequencer is needed to supply this control voltage.
Try extending the last patch with a gate multiplier and associate sequencer to give the kick a double hit on the first beat using the button in Figure <a href="complex-controllers.html#fig:clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult">10.4</a>.
Because the kick time is 4:4, the sequencer only needs four steps.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setclock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_multIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack-offbeat-gate-delay.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_multLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_multLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add RGATE and ADDR-SEQ to the bottom row&lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to both RGATE clock in and ADDR-SEQ clock in&lt;/li&gt;
&lt;li&gt;Connect ADDR-SEQ out to RGATE mult in&lt;/li&gt;
&lt;li&gt;Connect RGATE gate out to both LVL and Trig inputs for the kick&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the RGATE clock multiplication and ADDR-SEQ step voltage to get 2 kicks on a beat (strategy: start with the max value of one and then adjust the other)&lt;/li&gt;
&lt;li&gt;Use your ears and the Scope to make sure it's correct&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/rgate-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add RGATE and ADDR-SEQ to the bottom row&lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to both RGATE clock in and ADDR-SEQ clock in&lt;/li&gt;
&lt;li&gt;Connect ADDR-SEQ out to RGATE mult in&lt;/li&gt;
&lt;li&gt;Connect RGATE gate out to both LVL and Trig inputs for the kick&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the RGATE clock multiplication and ADDR-SEQ step voltage to get 2 kicks on a beat (strategy: start with the max value of one and then adjust the other)&lt;/li&gt;
&lt;li&gt;Use your ears and the Scope to make sure it's correct&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/rgate-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult.png'&gt;">Solution</button>
        <button type="button" onclick="setclock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_multIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setclock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_multIframe(url){
  var clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_multIframe = document.getElementById("clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult-iframe");
  clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_multIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult"></span>
<p class="caption">
Figure 10.4: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using clock divisions, a delayed gate for an off beat hit, and a sequenced gate multiplier for multiple hits on the beat.
</p>
</div>
<p>Returning to the three ideal properties, the gate multiplier approach (again combined with clock divisions) is a bit compact because it relies on another sequencer, a bit less easy (because setting the multiplier voltage is a bit fiddly), and more flexible because it allows different drum rolls on each step.
Just as a sequencer was used to control the gate multiplier, a sequencer could be used to control the gate delay offset of the previous patch or drop a step by controlling the length parameter, as shown <a href="images/patch-solutions/clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult-skip-seq-gate-length.png">here</a>.</p>
<p>It’s clear that adding more sequencers to control these parameters increases flexibility but also makes the overall control less compact and changing between variations less easy.
For example, if one wanted to replace a skipped step with a triple beat, one would have to adjust the length sequencer for a non-zero gate length, then adjust the multiplier sequencer to create multiple hits on that step, i.e. one would have to adjust multiple parameters for that step, and these parameters are spread across different sequencers.
Is this suboptimal?
Let’s compare against other solutions before making judgment.
One obvious alternative is to create the same pattern using standard step sequencers without any clock divisions.
Try updating the last patch with a step sequencer for the off beat hat and the double beat kick using the button in Figure <a href="complex-controllers.html#fig:trg-mshack-drums-offbeat-roll">10.5</a>.
Because the kick time is 4:4, the sequencer only needs four steps.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="settrg_mshack_drums_offbeat_rollIframe('https://cardinal.olney.ai?patchurl=clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#trg_mshack_drums_offbeat_roll">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="trg_mshack_drums_offbeat_roll" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="trg_mshack_drums_offbeat_rollLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="trg_mshack_drums_offbeat_rollLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two TRG step sequencers to the bottom row and move the DGATE next to the one on the left. This will be the open hat TRG&lt;/li&gt;
&lt;li&gt;Connect Clock beat out to both TRG clock ins&lt;/li&gt;
&lt;li&gt;Connect the open hat TRG to the DGATE trig in. The DGATE gate outs should already be connected to the Synth Drums open hat LVL and TRIG&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: You need DGATE here not for delay, but for a nonzero gate length for LVL. Alternatively you could use an ADSR for this&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Connect the kick TRG gate out to the kick LVL and TRIG in&lt;/li&gt;
&lt;li&gt;You may wish to connect the Clock reset out to both TRGs to align their sequences&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the TRGs to 8 steps. You need 8 in order to have two kick hits on the first beat, keeping Clock BPM at around 240&lt;/li&gt;
&lt;li&gt;Step sequence in 4:4 for the kick with a double hit on the first beat&lt;/li&gt;
&lt;li&gt;Step sequence in the off beat open hat (Hint: this occurs on 2-and)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/trg-mshack-drums-offbeat-roll.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two TRG step sequencers to the bottom row and move the DGATE next to the one on the left. This will be the open hat TRG&lt;/li&gt;
&lt;li&gt;Connect Clock beat out to both TRG clock ins&lt;/li&gt;
&lt;li&gt;Connect the open hat TRG to the DGATE trig in. The DGATE gate outs should already be connected to the Synth Drums open hat LVL and TRIG&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: You need DGATE here not for delay, but for a nonzero gate length for LVL. Alternatively you could use an ADSR for this&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Connect the kick TRG gate out to the kick LVL and TRIG in&lt;/li&gt;
&lt;li&gt;You may wish to connect the Clock reset out to both TRGs to align their sequences&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Adjust the TRGs to 8 steps. You need 8 in order to have two kick hits on the first beat, keeping Clock BPM at around 240&lt;/li&gt;
&lt;li&gt;Step sequence in 4:4 for the kick with a double hit on the first beat&lt;/li&gt;
&lt;li&gt;Step sequence in the off beat open hat (Hint: this occurs on 2-and)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/trg-mshack-drums-offbeat-roll.png'&gt;">Solution</button>
        <button type="button" onclick="settrg_mshack_drums_offbeat_rollIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="trg_mshack_drums_offbeat_roll-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function settrg_mshack_drums_offbeat_rollIframe(url){
  var trg_mshack_drums_offbeat_rollIframe = document.getElementById("trg_mshack_drums_offbeat_roll-iframe");
  trg_mshack_drums_offbeat_rollIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:trg-mshack-drums-offbeat-roll"></span>
<p class="caption">
Figure 10.5: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using step sequencers for an off beat hit and multiple hits on the beat.
</p>
</div>
<p>Contrast this approach with what we’ve done so far.
The step sequencers are somewhat compact if the pattern can be decomposed into the smallest repeating loops, though not as compact as a clock divider.
They are easy to change in some ways but not others.
For example, if we decide we want a triple hit on a beat rather than a double, we need to increase the step resolution from two steps per quarter note to three steps per quarter note, which requires changing the entire kick pattern.
Conversely, step sequencers have a high level of precision <em>if</em> one accepts increasing the number of steps arbitrarily to account for off beats, <a href="https://en.wikipedia.org/wiki/Swing_(jazz_performance_style)">swing</a>, or <a href="https://en.wikipedia.org/wiki/J_Dilla#Musical_style">dilla</a>, but this then sacrifices compactness.
Note that the previous approaches with gate delays and multiplications achieved these results to an arbitrary degree without additional loss of compactness, i.e. we could have a 10 hits instead of 2 with the same gate multiplier patch.</p>
</div>
<div id="making-gates-with-logic" class="section level2" number="10.2">
<h2>
<span class="header-section-number">10.2</span> Making gates with logic<a class="anchor" aria-label="anchor" href="#making-gates-with-logic"><i class="fas fa-link"></i></a>
</h2>
<p>Suppose we wanted to select the offbeats in our current pattern.
Looking at Figure <a href="complex-controllers.html#fig:clock-div2-div4">10.1</a>, the ofbeats are simply where the the beats are <em>not</em>.
So if we had a way of specifying “not beat,” then we’d be able make a gate for the off beats.
<a href="https://en.wikipedia.org/wiki/Boolean_algebra">Boolean logic</a> provides a way of specifying “not beat” and can further be used for more complex beat specifications.</p>
<p>Although it may seem intimidating at first, Boolean logic has just three basic operators, AND, OR, and NOT.
AND means two things happen together, OR means at least one thing happens, and NOT means something didn’t happen.
If we represent something happening (like a gate) as 1 and not happening as 0, then these basic operators are summarized in Table <a href="complex-controllers.html#tab:logic">10.1</a>.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:logic">Table 10.1: </span> Basic boolean logic operators on signals S1 and S2. Note that AND and OR consider both signals but NOT considers only one or the other.</caption>
<thead><tr class="header">
<th align="center">S1</th>
<th align="center">S2</th>
<th align="center">AND(S1,S2)</th>
<th align="center">OR(S1,S2)</th>
<th align="center">NOT(S1)</th>
<th align="center">NOT(S2)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
</tbody>
</table></div>
<p>Try updating the basic percussion patch with a NOT module to put the open hat on every off beat using the button in Figure <a href="complex-controllers.html#fig:trg-mshack-drums-offbeat-roll">10.5</a>.
We’ll build on this logic in the following patches.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setclock_division_drums_mschack_offbeat_logic_every_offbeatIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#clock_division_drums_mschack_offbeat_logic_every_offbeat">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="clock_division_drums_mschack_offbeat_logic_every_offbeat" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="clock_division_drums_mschack_offbeat_logic_every_offbeatLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="clock_division_drums_mschack_offbeat_logic_every_offbeatLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add dualNOT to the bottom row&lt;/li&gt;
&lt;li&gt;Connect Clock beat out to both TRG clock ins&lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to dualNOT top input&lt;/li&gt;
&lt;li&gt;Connect dualNOT top output to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The open hats are now exactly on the off beat, with no fine adjustment needed&lt;/li&gt;
&lt;li&gt;The lights on dualNOT show the logic of what is happening: when input is high, output is low and when input is low, output is high - exactly what is needed for the off beats&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/dualnot-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-drums-mschack-offbeat-logic-every-offbeat.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add dualNOT to the bottom row&lt;/li&gt;
&lt;li&gt;Connect Clock beat out to both TRG clock ins&lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to dualNOT top input&lt;/li&gt;
&lt;li&gt;Connect dualNOT top output to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The open hats are now exactly on the off beat, with no fine adjustment needed&lt;/li&gt;
&lt;li&gt;The lights on dualNOT show the logic of what is happening: when input is high, output is low and when input is low, output is high - exactly what is needed for the off beats&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/dualnot-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-drums-mschack-offbeat-logic-every-offbeat.png'&gt;">Solution</button>
        <button type="button" onclick="setclock_division_drums_mschack_offbeat_logic_every_offbeatIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="clock_division_drums_mschack_offbeat_logic_every_offbeat-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setclock_division_drums_mschack_offbeat_logic_every_offbeatIframe(url){
  var clock_division_drums_mschack_offbeat_logic_every_offbeatIframe = document.getElementById("clock_division_drums_mschack_offbeat_logic_every_offbeat-iframe");
  clock_division_drums_mschack_offbeat_logic_every_offbeatIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:clock-division-drums-mschack-offbeat-logic-every-offbeat"></span>
<p class="caption">
Figure 10.6: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using clock divisions and the NOT operator to create gates for all off beat hits.
</p>
</div>
<p>We can use logic to create other gates using combinations of the basic operators.
For example, consider every other offbeat in Figure <a href="complex-controllers.html#fig:clock-div2-div4">10.1</a>.
These offbeats occur when the clock is not present and the /2 division is present.
Try updating the last patch with an AND module to implement this logic using the button in Figure <a href="complex-controllers.html#fig:clock-division-drums-mschack-offbeat-logic-every-other-offbeat">10.7</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setclock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack-offbeat-logic-every-offbeat.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#clock_division_drums_mschack_offbeat_logic_every_other_offbeat">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="clock_division_drums_mschack_offbeat_logic_every_other_offbeat" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="clock_division_drums_mschack_offbeat_logic_every_other_offbeatLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="clock_division_drums_mschack_offbeat_logic_every_other_offbeatLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add dualAND to the bottom row&lt;/li&gt;
&lt;li&gt;Connect dualNOT output to dualAND top input&lt;/li&gt;
&lt;li&gt;Connect Dividah by 4 out to dualAND bottom input&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The open hats are now exactly on every other the off beat, courtesy of the /4 division&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: Because we are running the Clock at double speed, the divisions here are twice what they are in the text. If the dualNOT took clock directly, then dualAND would take the /2 clock division&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;The lights on dualAND show the logic of what is happening: when both inputs are high, output is high and otherwise low - meaning we get a gate only when a /4 gate occurs and a /2 gate does not occur at the same time&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/dualand-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-drums-mschack-offbeat-logic-every-other-offbeat.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add dualAND to the bottom row&lt;/li&gt;
&lt;li&gt;Connect dualNOT output to dualAND top input&lt;/li&gt;
&lt;li&gt;Connect Dividah by 4 out to dualAND bottom input&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The open hats are now exactly on every other the off beat, courtesy of the /4 division&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: Because we are running the Clock at double speed, the divisions here are twice what they are in the text. If the dualNOT took clock directly, then dualAND would take the /2 clock division&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;The lights on dualAND show the logic of what is happening: when both inputs are high, output is high and otherwise low - meaning we get a gate only when a /4 gate occurs and a /2 gate does not occur at the same time&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/dualand-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-drums-mschack-offbeat-logic-every-other-offbeat.png'&gt;">Solution</button>
        <button type="button" onclick="setclock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="clock_division_drums_mschack_offbeat_logic_every_other_offbeat-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setclock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe(url){
  var clock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe = document.getElementById("clock_division_drums_mschack_offbeat_logic_every_other_offbeat-iframe");
  clock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:clock-division-drums-mschack-offbeat-logic-every-other-offbeat"></span>
<p class="caption">
Figure 10.7: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using clock divisions and combining the NOT and AND operators to create gates for every other off beat hits.
</p>
</div>
<p>Let’s get even more specific with logic to match what we did previously with the gate delay, which was a single off beat.
Since the last patch used every other off beat, we can use an additional operator to select just one of those beats.
Again looking at Figure <a href="complex-controllers.html#fig:clock-div2-div4">10.1</a>, we see that we can achieve this by using AND with our existing logic and next larger clock division.
Try updating the last patch to implement this logic using the button in Figure <a href="complex-controllers.html#fig:clock-division-drums-mschack-offbeat-logic-matching-gate-delay">10.8</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setclock_division_drums_mschack_offbeat_logic_matching_gate_delayIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack-offbeat-logic-every-other-offbeat.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#clock_division_drums_mschack_offbeat_logic_matching_gate_delay">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="clock_division_drums_mschack_offbeat_logic_matching_gate_delay" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="clock_division_drums_mschack_offbeat_logic_matching_gate_delayLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="clock_division_drums_mschack_offbeat_logic_matching_gate_delayLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Connect Dividah by 4 out to dualNOT bottom input (don't change top input)&lt;/li&gt;
&lt;li&gt;Connect dualNOT bottom output to dualAND bottom input (don't change top input)&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the dualAND bottom input left over&lt;/li&gt;
&lt;li&gt;Connect dualAND bottom output to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The open hats are now exactly one off beat every 4 beats, courtesy of the /4 division&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: Because we are running the Clock at double speed, the divisions here are twice what they are in the text. If the dualNOT took clock directly, then dualAND would take the /2 clock division&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;The lights on bottom dualAND show the logic of what is happening: the original logic was selecting two offbeats, but we select only one of them by using NOT on /4 and combining that with AND on the existing logic&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-drums-mschack-offbeat-logic-matching-gate-delay.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Connect Dividah by 4 out to dualNOT bottom input (don't change top input)&lt;/li&gt;
&lt;li&gt;Connect dualNOT bottom output to dualAND bottom input (don't change top input)&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the dualAND bottom input left over&lt;/li&gt;
&lt;li&gt;Connect dualAND bottom output to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The open hats are now exactly one off beat every 4 beats, courtesy of the /4 division&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: Because we are running the Clock at double speed, the divisions here are twice what they are in the text. If the dualNOT took clock directly, then dualAND would take the /2 clock division&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;The lights on bottom dualAND show the logic of what is happening: the original logic was selecting two offbeats, but we select only one of them by using NOT on /4 and combining that with AND on the existing logic&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-drums-mschack-offbeat-logic-matching-gate-delay.png'&gt;">Solution</button>
        <button type="button" onclick="setclock_division_drums_mschack_offbeat_logic_matching_gate_delayIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="clock_division_drums_mschack_offbeat_logic_matching_gate_delay-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setclock_division_drums_mschack_offbeat_logic_matching_gate_delayIframe(url){
  var clock_division_drums_mschack_offbeat_logic_matching_gate_delayIframe = document.getElementById("clock_division_drums_mschack_offbeat_logic_matching_gate_delay-iframe");
  clock_division_drums_mschack_offbeat_logic_matching_gate_delayIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:clock-division-drums-mschack-offbeat-logic-matching-gate-delay"></span>
<p class="caption">
Figure 10.8: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using clock divisions and combining the NOT and AND operators to create a single gate per bar, matching the previous delayed gate behavior.
</p>
</div>
<p>Let’s consider the three ideal sequencer properties, in terms of logic.
The first application of NOT was quite compact, ease to change, and precise.
However, as the logic became more complex, the sequencing became less easy.
Contrast the last logic patch that needed three or four logical operators to what was previously accomplished by using a single gate delay.
It appears that clock divisions with logic are most suited to regular repeating patterns, and that when patterns become less regular, other options may be easier.</p>
</div>
<div id="addingremoving-gates-with-probability" class="section level2" number="10.3">
<h2>
<span class="header-section-number">10.3</span> Adding/removing gates with probability<a class="anchor" aria-label="anchor" href="#addingremoving-gates-with-probability"><i class="fas fa-link"></i></a>
</h2>
<p>Generally speaking, the more complex sequencing we want (i.e. irreducible to a simple pattern), the less compact our control will be.
We can get around this limitation if we give up precise control of the sequencing by turning to probability.
A <a href="https://en.wikipedia.org/wiki/Probability">probability</a> specifies of the likelihood of an event, like a gate.
In our current approaches, a gate either happens or it doesn’t.
However, if we assign some probability to a gate happening, more complex patterns emerge because sometimes the gate will happen and sometimes it won’t.</p>
<p>Perhaps the easiest way to think about probabilistic gates is to think of them like coin flips.
If we flip a coin and get a head, then the gate will be produced, otherwise no gate will be produced.
How can we simulate a coin flip in modular?
One way is to generate a random voltage and then compare it to a reference value.
If the voltage is above the reference value, we count it as a head and produce a gate.
We’ve already seen how to create random voltages with noise generators.
The new idea here is a comparator, which is a module that accepts an incoming voltage <span class="math inline">\(V\)</span>, compares it to a reference voltage <span class="math inline">\(R\)</span>, and produces a high signal if <span class="math inline">\(V &gt; R\)</span>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This approach is chosen for pedagogical reasons. Various modules offer built-in random number generation that is more flexible than combining noise sources with comparators.&lt;/p&gt;"><sup>78</sup></a>
Because different noise spectra have different distributions of frequencies (and thus voltages), different noise spectra will give us different probabilities for the same reference voltage.</p>
<p>We can use the probabilistic gate idea to sequence all the percussion voices in our ongoing example.
Since probabilistic gates would be completely random by definition, we’ll structure them a bit using logic: a NOT to make two different voices alternate and an AND to combine two different noise signals for a lower probability.
Try updating the last patch to drive all gates with probability and logic using the button in Figure <a href="complex-controllers.html#fig:noise-comparator-logic-mshack-drums">10.9</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setnoise_comparator_logic_mshack_drumsIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack-offbeat-logic-matching-gate-delay.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#noise_comparator_logic_mshack_drums">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="noise_comparator_logic_mshack_drums" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="noise_comparator_logic_mshack_drumsLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="noise_comparator_logic_mshack_drumsLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Delete the Clock and Dividah modules, and add Noiz and two Edge modules to the bottom row&lt;/li&gt;
&lt;li&gt;Disconnect all cables from dualAND and dualNOT&lt;/li&gt;
&lt;li&gt;Connect Noiz red out to the first Edge in, and connect the first Edge high out to the dualAND top input. The high out is active when the input value goes above the threshold set by the rise knob&lt;/li&gt;
&lt;li&gt; Connect the Noiz white out to the second Edge in, and connect the second Edge high out to the second top input of the dual AND. Also connect the high out to the closed hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Even if you turn up the rise knob all the way, you should hear almost constant closed hats at this point. This is why we need the AND to lower the probability of gates&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the open hat LVL and TRIG in. Because the AND is only high when both red and white noise are over threshold at the same time, this gate will occur less often than the closed hat gate&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the dualNOT top input&lt;/li&gt;
&lt;li&gt;Connect dualNOT top output to the kick LVL and TRIG in. The NOT ensures that the open hat and the kick will be gated in alternation&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Change the hold knob on both Edge modules. This controls how long the comparator will hold an output value before testing the input again. Low values will make shorter gates and vice versa&lt;/li&gt;
&lt;li&gt;Change the rise knob on both Edge modules. This controls the reference voltage for the comparator, so making it higher makes the comparator less likely to be active, and vice versa&lt;/li&gt;
&lt;li&gt;Look at the lights on the logic modules. When we were working with clock divisions, they were more orderly because they were synced to the clock. Now they are not orderly because there is no clock.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/edge-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/noise-comparator-logic-mshack-drums.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Delete the Clock and Dividah modules, and add Noiz and two Edge modules to the bottom row&lt;/li&gt;
&lt;li&gt;Disconnect all cables from dualAND and dualNOT&lt;/li&gt;
&lt;li&gt;Connect Noiz red out to the first Edge in, and connect the first Edge high out to the dualAND top input. The high out is active when the input value goes above the threshold set by the rise knob&lt;/li&gt;
&lt;li&gt; Connect the Noiz white out to the second Edge in, and connect the second Edge high out to the second top input of the dual AND. Also connect the high out to the closed hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Even if you turn up the rise knob all the way, you should hear almost constant closed hats at this point. This is why we need the AND to lower the probability of gates&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the open hat LVL and TRIG in. Because the AND is only high when both red and white noise are over threshold at the same time, this gate will occur less often than the closed hat gate&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to the dualNOT top input&lt;/li&gt;
&lt;li&gt;Connect dualNOT top output to the kick LVL and TRIG in. The NOT ensures that the open hat and the kick will be gated in alternation&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Change the hold knob on both Edge modules. This controls how long the comparator will hold an output value before testing the input again. Low values will make shorter gates and vice versa&lt;/li&gt;
&lt;li&gt;Change the rise knob on both Edge modules. This controls the reference voltage for the comparator, so making it higher makes the comparator less likely to be active, and vice versa&lt;/li&gt;
&lt;li&gt;Look at the lights on the logic modules. When we were working with clock divisions, they were more orderly because they were synced to the clock. Now they are not orderly because there is no clock.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/edge-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/noise-comparator-logic-mshack-drums.png'&gt;">Solution</button>
        <button type="button" onclick="setnoise_comparator_logic_mshack_drumsIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="noise_comparator_logic_mshack_drums-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setnoise_comparator_logic_mshack_drumsIframe(url){
  var noise_comparator_logic_mshack_drumsIframe = document.getElementById("noise_comparator_logic_mshack_drums-iframe");
  noise_comparator_logic_mshack_drumsIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:noise-comparator-logic-mshack-drums"></span>
<p class="caption">
Figure 10.9: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using probabilistic gates slightly structured with NOT and AND operators.
</p>
</div>
<p>The output of this patch is much more complex than we could reasonably achieve using other sequencing methods, but it is also uncontrolled and not very musical, even when shaped a bit by logic.
An alternative to randomly creating gates is to take an existing pattern but randomly drop gates.
This can be implemented as simply as using noise source, a comparator, and an AND module that receives the output as well as the output for the normal gate.
However, to get the random gates to align with the standard clock, we’ll use a new module, a sample and hold module.
A sample and hold module, when triggered, stores whatever voltage is present at its input and outputs that voltage until a new trigger is received, ignoring whatever input voltages occur in the meantime.
By connecting a random gate to a sample and hold and triggering it with a clock, we can synchronize the random gate with our clock and have a clean signal for deciding to drop a gate or not.
Note that if we wanted to produce V/Oct control voltage for random notes, we could similarly use sample and hold module directly connected to our random source, i.e. without a comparator.
Try updating the previous logic patch that selected every other off beat to further consider a random gate using the button in Figure <a href="complex-controllers.html#fig:noise-comparator-clock-division-drums-mschack-offbeat-logic-every-other-offbeat">10.10</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setnoise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack-offbeat-logic-every-other-offbeat.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeat">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeat" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeatLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeatLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add Noiz, Comparator, and Holdah to the bottom row&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: We are using a different comparator because Edge outputs 5 V and we need 10 V for a consistent gate across percussion voices. We also want to use the clock as the threshold to the comparator, which Edge can't do&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Connect Dividah by 4 to Comparator input a and Noiz red out to Comparator input b&lt;/li&gt;
&lt;li&gt;Connect Comparator a &gt; b out (so Clock is greater than red noise) to Holdah input and connect Dividah by 4 to Holdah trigger&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to dualAND bottom input a and connect Holdah output to dualAND bottom input b&lt;/li&gt;
&lt;li&gt;Connect dualAND bottom output to the open hat LVL and TRIG in. This gate will only be active if it was part of the original sequence AND the random gate is active at the same time&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;Although the comparator output is blinking wildly, the sample and hold output changes only when triggered by the clock. This prevents our hat from being shortened like the last patch&lt;/li&gt;
&lt;li&gt;If you switch the noise type, you should have a change in the number of random gates, e.g. white has a greater tendency towards higher frequencies so would cause more random gates &lt;/li&gt;
&lt;li&gt;Some comparator outputs will never result in a random gate (like =) and others will always result in a random gate (like not equals, !=). This is because a random number exactly equalling a specific value is rare, but not equally a specific value is common &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/comparator-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/holdah-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/noise-comparator-clock-division-drums-mschack-offbeat-logic-every-other-offbeat.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add Noiz, Comparator, and Holdah to the bottom row&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Tip: We are using a different comparator because Edge outputs 5 V and we need 10 V for a consistent gate across percussion voices. We also want to use the clock as the threshold to the comparator, which Edge can't do&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Connect Dividah by 4 to Comparator input a and Noiz red out to Comparator input b&lt;/li&gt;
&lt;li&gt;Connect Comparator a &gt; b out (so Clock is greater than red noise) to Holdah input and connect Dividah by 4 to Holdah trigger&lt;/li&gt;
&lt;li&gt;Connect dualAND top output to dualAND bottom input a and connect Holdah output to dualAND bottom input b&lt;/li&gt;
&lt;li&gt;Connect dualAND bottom output to the open hat LVL and TRIG in. This gate will only be active if it was part of the original sequence AND the random gate is active at the same time&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;Although the comparator output is blinking wildly, the sample and hold output changes only when triggered by the clock. This prevents our hat from being shortened like the last patch&lt;/li&gt;
&lt;li&gt;If you switch the noise type, you should have a change in the number of random gates, e.g. white has a greater tendency towards higher frequencies so would cause more random gates &lt;/li&gt;
&lt;li&gt;Some comparator outputs will never result in a random gate (like =) and others will always result in a random gate (like not equals, !=). This is because a random number exactly equalling a specific value is rare, but not equally a specific value is common &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/comparator-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/holdah-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/noise-comparator-clock-division-drums-mschack-offbeat-logic-every-other-offbeat.png'&gt;">Solution</button>
        <button type="button" onclick="setnoise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeat-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setnoise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe(url){
  var noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe = document.getElementById("noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeat-iframe");
  noise_comparator_clock_division_drums_mschack_offbeat_logic_every_other_offbeatIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:noise-comparator-clock-division-drums-mschack-offbeat-logic-every-other-offbeat"></span>
<p class="caption">
Figure 10.10: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using a probabilistic gate and logic to decide when to drop a gate from an otherwise non-probabilistic sequence.
</p>
</div>
<p>As shown by these patches, probability can be used to create interesting variations in several ways.
These methods are fairly compact and can switch between variations easily, however, there is a loss of control.
Modules specifically designed for randomness typically have additional parameters that allow the user to define how random events should be, which can help mitigate this loss of control.</p>
</div>
<div id="speed-variable-clocks-using-lfos" class="section level2" number="10.4">
<h2>
<span class="header-section-number">10.4</span> Speed variable clocks using LFOs<a class="anchor" aria-label="anchor" href="#speed-variable-clocks-using-lfos"><i class="fas fa-link"></i></a>
</h2>
<p>Recall one of the earlier challenges raised was to increasing the number of hits on a particular beat, skipping a beat, and accessing all possible beats (including off beats).
We’ve tried to solve this problem using gate delays, logic, or an increased step resolution to access off beats and gate multipliers and increased step resolution to increase the number of hits on a particular beat.
In each case, one technique would solve some problems but not others, with the exception of step resolution which has the problems previously discussed.</p>
<p>It turns out that we can achieve all three of these goals by running speed variable clocks, one for each percussion voice where we want to have multiple beats, skipping, or offbeats at different times.
The idea is that when we want multiple beats, we speed the clock up; when we want to skip a beat, we slow the clock down almost zero, and that when we want to access an offbeat, we use the same sequencer we’re using the speed up and slow down the clock.
Because a clock is just unipolar rectangular waves, an LFO can be used as a speed variable clock.
One of the additional benefits of this approach is that skipping a beat and doubling a beat are controlled by the same parameter, frequency.
Contrast this with the previous approach using gate multiplication, where skipping a beat required an additional sequencer to shrink gate length to zero.
We still need a master clock however to keep the LFOs in sync, which can be done by sending clock to their reset inputs, which resets them to the beginning of their waveforms.</p>
<p>Let’s recreate the off beat open hat with a double kick on the first beat that we’ve used as a running example.
Both of these voices will require their own LFO to serve as a clock, where each LFO has its frequency controlled by a sequencer.
Try updating the previous patch with gate delay and gate multiplier to use sequenced LFOs instead using the button in Figure <a href="complex-controllers.html#fig:lfo-mshack-drums-offbeat-roll">10.11</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setlfo_mshack_drums_offbeat_rollIframe('https://cardinal.olney.ai?patchurl=clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#lfo_mshack_drums_offbeat_roll">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="lfo_mshack_drums_offbeat_roll" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="lfo_mshack_drums_offbeat_rollLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="lfo_mshack_drums_offbeat_rollLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Remove Dividah, DGATE, and RGATE&lt;/li&gt;
&lt;li&gt;On the bottom row, add LFOs and ADDR-SEQ so you have two of each side by side&lt;/li&gt;
&lt;li&gt;Starting with the open hat LFO/ADDR-SEQ, connect Clock 8ths out to ADDR-SEQ clock in and set the sequencer to 8 steps&lt;/li&gt;
&lt;li&gt;Connect ADDR-SEQ out to LFO FM in and turn attenuator for FM all the way positive&lt;/li&gt;
&lt;li&gt;Connect the LFO square out to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Repeat the above for the kick LFO/ADDR-SEQ but use the Clock beat out and only 4 steps&lt;/li&gt;
&lt;li&gt;Connect Clock beat out to the reset of both LFOs to keep them in sync with the clock, and connect Clock reset out to both sequencers to get them synchronized
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Change the step voltage for open hat sequencer. Turning all the way to the left should skip the step. Remember you only need one open hat in the sequence, on 4-and&lt;/li&gt;
&lt;li&gt;Change the step voltage for the kick sequencer. Turning to the right will increase the number of beats per step. If you turn it too high, it will appear as a continuous sound, so make small changes. You need two beats on the first step to match the previous pattern&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/lfo-mshack-drums-offbeat-roll.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Remove Dividah, DGATE, and RGATE&lt;/li&gt;
&lt;li&gt;On the bottom row, add LFOs and ADDR-SEQ so you have two of each side by side&lt;/li&gt;
&lt;li&gt;Starting with the open hat LFO/ADDR-SEQ, connect Clock 8ths out to ADDR-SEQ clock in and set the sequencer to 8 steps&lt;/li&gt;
&lt;li&gt;Connect ADDR-SEQ out to LFO FM in and turn attenuator for FM all the way positive&lt;/li&gt;
&lt;li&gt;Connect the LFO square out to the open hat LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Repeat the above for the kick LFO/ADDR-SEQ but use the Clock beat out and only 4 steps&lt;/li&gt;
&lt;li&gt;Connect Clock beat out to the reset of both LFOs to keep them in sync with the clock, and connect Clock reset out to both sequencers to get them synchronized
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Change the step voltage for open hat sequencer. Turning all the way to the left should skip the step. Remember you only need one open hat in the sequence, on 4-and&lt;/li&gt;
&lt;li&gt;Change the step voltage for the kick sequencer. Turning to the right will increase the number of beats per step. If you turn it too high, it will appear as a continuous sound, so make small changes. You need two beats on the first step to match the previous pattern&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/lfo-mshack-drums-offbeat-roll.png'&gt;">Solution</button>
        <button type="button" onclick="setlfo_mshack_drums_offbeat_rollIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="lfo_mshack_drums_offbeat_roll-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setlfo_mshack_drums_offbeat_rollIframe(url){
  var lfo_mshack_drums_offbeat_rollIframe = document.getElementById("lfo_mshack_drums_offbeat_roll-iframe");
  lfo_mshack_drums_offbeat_rollIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:lfo-mshack-drums-offbeat-roll"></span>
<p class="caption">
Figure 10.11: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using LFOs as speed variable clocks to achieve gate delays, skipped steps, and off beats using a single parameter.
</p>
</div>
<p>As you can see, this approach is fairly compact but not as compact as using a gate delay and gate multiplier because we’ve explicitly represented a number of skipped steps.
However it is now easier to change between variations, e.g. adding rolls on different beats or skipping different beats would not require changing the patch, and these can be controlled by a single parameter.</p>
<p>A variation of this approach, though perhaps a somewhat distant one, can be used to generate gate patterns without a clock.
Simply mix LFOs at different frequencies to produce an irregular interference pattern that can then be run through a comparator to generate gates.
If these need to be synced to a clock for uniform gate lengths, then the sample and hold method discussed in the previous section can be used.
A clock can also be used to periodically trigger the reset of the LFOs, forcing the pattern to repeat.</p>
</div>
<div id="euclidean-rhythm" class="section level2" number="10.5">
<h2>
<span class="header-section-number">10.5</span> Euclidean rhythm<a class="anchor" aria-label="anchor" href="#euclidean-rhythm"><i class="fas fa-link"></i></a>
</h2>
<p>We’ve mostly discussed sequencing where the patterns have been designed by hand, with the exception of probabilistic gate sequences and the recently mentioned sequenced generated by frequency-mismatched LFOs.
What if there was a more predictable, more rule-like way of generating patterns?
Euclidean rhythm is a recently discovered method that generates patterns in a rule-like way.<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Godfried Toussaint, &lt;span&gt;“The Euclidean Algorithm Generates Traditional Musical Rhythms,”&lt;/span&gt; in &lt;em&gt;Renaissance Banff: Mathematics, Music, Art, Culture&lt;/em&gt;, ed. Reza Sarhangi and Robert V. Moody (Southwestern College, Winfield, Kansas: Bridges Conference, 2005), 47–56, &lt;a href="http://archive.bridgesmathart.org/2005/bridges2005-47.html" role="doc-biblioref"&gt;http://archive.bridgesmathart.org/2005/bridges2005-47.html&lt;/a&gt;.&lt;/p&gt;'><sup>79</sup></a></span>
This approach gets its name from the <a href="https://en.wikipedia.org/wiki/Euclidean_algorithm">Euclidean algorithm</a> for finding the greatest common divisor, which is the largest natural number that divides two numbers, <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> without a remainder.
Here’s how it works.
Suppose <span class="math inline">\(a &gt; b\)</span>.
Then the algorithm divides <span class="math inline">\(a\)</span> by <span class="math inline">\(b\)</span> to get a remainder <span class="math inline">\(c\)</span>, e.g. <span class="math inline">\(8/5\)</span> has remainder 3.
If <span class="math inline">\(c=0\)</span>, then <span class="math inline">\(b\)</span> is the greatest common divisor.
Otherwise repeat by substituting b and c for a and b, e.g. 5/3 has remainder 2.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This is the division variant of Euclid’s algorithm. The original used subtraction and so is slower and slightly more complicated because in subtraction, the difference isn’t guaranteed to be smaller than the subtrahend.&lt;/p&gt;"><sup>80</sup></a></p>
<p>To map the Euclidean algorithm to beats, suppose that we want to evenly distribute <span class="math inline">\(b\)</span> beats over <span class="math inline">\(p\)</span> positions, which we will call <span class="math inline">\(E( b, p )\)</span>.
Positions with no beat are silent (<span class="math inline">\(s\)</span>).
Then we parallel the structure of the Euclidean algorithm and define division as pairing up the <span class="math inline">\(b\)</span> and <span class="math inline">\(s\)</span>, with the unpaired <span class="math inline">\(s\)</span> forming the remainder.
The pairs substitute for <span class="math inline">\(b\)</span>, the remainder substitutes for <span class="math inline">\(s\)</span>, and the process repeats until the remainder is a single element or there are no <span class="math inline">\(s\)</span>.
An example of this process is shown in Table <a href="complex-controllers.html#tab:euclid">10.2</a> for <span class="math inline">\(E(5,13)\)</span>.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:euclid">Table 10.2: </span> Steps of the Euclidean algorithm for the greatest common divisor of <span class="math inline">\(8\)</span> and <span class="math inline">\(5\)</span> (left) and corresponding pattern of beats (<span class="math inline">\(x\)</span>) and silences (<span class="math inline">\(.\)</span>) in the Euclidean rhythm for <span class="math inline">\(E(5,13)\)</span> (right). Note that the number of groups in the pattern, marked by vertical bars, match the numbers <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>. These bars are removed in final result, x..x.x..x.x..</caption>
<thead><tr class="header">
<th>a</th>
<th>b</th>
<th>c</th>
<th></th>
<th>Pattern</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>8</td>
<td>5</td>
<td>3</td>
<td></td>
<td>|x|x|x|x|x|.|.|.|.|.|.|.|.|</td>
</tr>
<tr class="even">
<td>5</td>
<td>3</td>
<td>2</td>
<td></td>
<td>|x.|x.|x.|x.|x.|.|.|.|</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>1</td>
<td></td>
<td>|x..|x..|x..|x.|x.|</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>0</td>
<td></td>
<td>|x..x.|x..x.|x..|</td>
</tr>
</tbody>
</table></div>
<p>As shown in Table <a href="complex-controllers.html#tab:euclid">10.2</a>, Euclidean rhythms divide the number of beats across positions as evenly as possible.
If <span class="math inline">\(b\)</span> divides <span class="math inline">\(p\)</span> without remainder, then there will be an equal number of silences between beats.
It turns out that there is an even easier way to calculate Euclidean rhythms by using <a href="https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm">Bresenham’s line algorithm</a>: using the equation for a line, at each natural number <span class="math inline">\(x\)</span>, take the floor<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;A floor operation truncates the decimal portion of a number, e.g. 3.28 becomes 3.&lt;/p&gt;"><sup>81</sup></a> of <span class="math inline">\(y\)</span>.
In this approach, <span class="math inline">\(x\)</span> is equivalent to <span class="math inline">\(p\)</span>, each increase in <span class="math inline">\(y\)</span> is equivalent to <span class="math inline">\(b\)</span>, and each lack of increase in <span class="math inline">\(y\)</span> is equivalent to <span class="math inline">\(s\)</span>.
The result of the algorithm is shown in shown in Figure <a href="complex-controllers.html#fig:bresenham-line">10.12</a>.
Note that the colored regions mark the closest fitting line with slope <span class="math inline">\(5/13\)</span> where the line is constrained to move in square units - this is equivalent to distributing beats as evenly as possible across positions.</p>

<div class="figure">
<span style="display:block;" id="fig:bresenham-line"></span>
<img src="images/bresenham-line.png" alt="Example of Bresenham’s line algorithm for the example \(E(5,13)\)." width="100%"><p class="caption">
Figure 10.12: Example of Bresenham’s line algorithm for the example <span class="math inline">\(E(5,13)\)</span>.
</p>
</div>
<p>Euclidean rhythms can start at an offset into the sequence such that the skipped early portion is then added to the end.
This is sometimes called a rotation, and different rotations are sometimes described as belonging to the same necklace.
Let’s apply Euclidean rhythms to the basic percussion patch from the beginning of the chapter.
We’ll use a special model that generates a Euclidean rhythm for each percussion voice, along with a trigger to gate module.
Try updating that patch using the button in Figure <a href="complex-controllers.html#fig:euclidean-drums-mschack">10.13</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="seteuclidean_drums_mschackIframe('https://cardinal.olney.ai?patchurl=clock-division-drums-mschack.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#euclidean_drums_mschack">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="euclidean_drums_mschack" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="euclidean_drums_mschackLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="euclidean_drums_mschackLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Remove Dividah and add three pairs of Eugene and DGATE to the bottom row, one per voice. The first pair will be for the open hat, the second for the closed hat, and the third for the kick &lt;/li&gt;
&lt;li&gt;Connect the Clock 8ths out the Eugene for the closed and open hats, and connect the Clock beat out to the Eugene for the kick&lt;/li&gt;
&lt;li&gt;Connect each Eugene out to its corresponding voice trig input and its paired DGATE trig input &lt;/li&gt;
&lt;li&gt;Connect each DGATE gate out to its corresponding voice level&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Change the length, hits, and shift for each Eugene to create a pattern. Length is the pattern length, hits is the *percentage* of patterns steps that have a beat, and shift rotates the start position of the pattern. The effects of these are shown on the Eugene display&lt;/li&gt;
&lt;li&gt;If you choose 1/8, 8/8, and 4/4, you are close to the original delayed gate pattern&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/eugene-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/euclidean-drums-mschack.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Remove Dividah and add three pairs of Eugene and DGATE to the bottom row, one per voice. The first pair will be for the open hat, the second for the closed hat, and the third for the kick &lt;/li&gt;
&lt;li&gt;Connect the Clock 8ths out the Eugene for the closed and open hats, and connect the Clock beat out to the Eugene for the kick&lt;/li&gt;
&lt;li&gt;Connect each Eugene out to its corresponding voice trig input and its paired DGATE trig input &lt;/li&gt;
&lt;li&gt;Connect each DGATE gate out to its corresponding voice level&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scope waveshape&lt;ul&gt;
&lt;li&gt;Change the length, hits, and shift for each Eugene to create a pattern. Length is the pattern length, hits is the *percentage* of patterns steps that have a beat, and shift rotates the start position of the pattern. The effects of these are shown on the Eugene display&lt;/li&gt;
&lt;li&gt;If you choose 1/8, 8/8, and 4/4, you are close to the original delayed gate pattern&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/eugene-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/euclidean-drums-mschack.png'&gt;">Solution</button>
        <button type="button" onclick="seteuclidean_drums_mschackIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="euclidean_drums_mschack-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function seteuclidean_drums_mschackIframe(url){
  var euclidean_drums_mschackIframe = document.getElementById("euclidean_drums_mschack-iframe");
  euclidean_drums_mschackIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:euclidean-drums-mschack"></span>
<p class="caption">
Figure 10.13: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using Euclidean rhythms for each voice.
</p>
</div>
<p>As you can see from the patch, Euclidean rhythms is very compact and flexible, since we can easily change the length of patterns without affecting the proportion of hits and vice versa, just by turning a knob.
However, we also lose some precision.
For example, it isn’t possible to make a double hit on the first beat because Euclidean rhythms by definition evenly distribute beats.
So again, we trade precision for compactness and flexibility.
It’s worth noting that Euclidean rhythms can also define scales.
For example, <span class="math inline">\(E(5,12)\)</span> selects notes in the major pentatonic scale, and <span class="math inline">\(E(7,12)\)</span> selects notes in the diatonic scale C major.</p>
</div>
<div id="sequential-switches" class="section level2" number="10.6">
<h2>
<span class="header-section-number">10.6</span> Sequential switches<a class="anchor" aria-label="anchor" href="#sequential-switches"><i class="fas fa-link"></i></a>
</h2>
<p>The focus up to this point has been on creating patterns, but music typically involves chains of patterns.
While it would be possible to have repetitions of a pattern in a sequencer, this is less compact because any change to a step in the pattern would require changing that step everywhere the pattern was repeated.
Instead it makes sense to consider each pattern as a chunk sequence these chunks.
Sequential switches are type of module that makes it easy to switch between different patterns in a sequence.</p>
<p>Sequential switches are also known as <a href="https://en.wikipedia.org/wiki/Multiplexer">multiplexers and demultiplexers</a>.
A multiplexer is used to send <span class="math inline">\(N\)</span> different signals to 1 place (N:1), and a demultiplexer is used to send 1 thing to <span class="math inline">\(N\)</span> different places (1:N).
The signal can be anything, including audio, and the destination is selected either by a clock or control voltage.
When the selection is done by clock, each clock advances the switch just like a clock advances a sequencer.
When the selection is done by control voltage, different voltage ranges select different destinations so that the selection can go out of order.</p>
<p>As a concrete example, supposed you have a kick drum and you want to send it a pattern, and when that pattern finishes, send it another pattern.
That is multiplexing because you have <span class="math inline">\(N\)</span> patterns you are sending to 1 place, the kick drum.
On the other hand, suppose you have a pattern that you’d first like to send to flute voice, and when that pattern finishes, send the same pattern to a violin voice, and so on.
That is demultiplexing because you have 1 pattern that you are sending <span class="math inline">\(N\)</span> different places.
If this is confusing, it’s best to assume multiplexing (N:1) as this seems to be the more common operation.</p>
<p>Let’s look at a simple example of using a sequential switch.
In the previous patch with a gate delay and gate multiplier, the kick had a double hit on the first beat, and this was repeated every four beats.
Suppose we wanted to repeat every eight beats instead.
One option is to fill up the sequencer with empty steps, but another option is to divide the eight steps into two sequences of four steps each.
The first four step sequence is our original sequence, and the second four step sequence is just the kick clock division.
A clock division matching the length of the patterns is sent to the switch to advance to the next pattern.
Try implementing this patch using the button in Figure <a href="complex-controllers.html#fig:clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult-pattern-change-sequential-switch">10.14</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setclock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switchIframe('https://cardinal.olney.ai?patchurl=clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switch">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switch" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switchLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switchLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add 8:1 to the bottom row to the left of ADDR-SEQ &lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to 8:1 input 1&lt;/li&gt;
&lt;li&gt;Connect RGATE gate out to 8:1 input 2&lt;/li&gt;
&lt;li&gt;Connect Dividah by 8 out to 8:1 clock input and Clock reset to 8:1 reset&lt;/li&gt;
&lt;li&gt;Set the 8:1 steps to 2 and connect 8:1 out to kick LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The switch is changing every 4 beats (see the light moving between inputs)&lt;/li&gt;
&lt;li&gt;Both inputs are always going, but the switch is choosing which to let through at any moment&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/81-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult-pattern-change-sequential-switch.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add 8:1 to the bottom row to the left of ADDR-SEQ &lt;/li&gt;
&lt;li&gt;Connect Dividah by 2 out to 8:1 input 1&lt;/li&gt;
&lt;li&gt;Connect RGATE gate out to 8:1 input 2&lt;/li&gt;
&lt;li&gt;Connect Dividah by 8 out to 8:1 clock input and Clock reset to 8:1 reset&lt;/li&gt;
&lt;li&gt;Set the 8:1 steps to 2 and connect 8:1 out to kick LVL and TRIG in&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;The switch is changing every 4 beats (see the light moving between inputs)&lt;/li&gt;
&lt;li&gt;Both inputs are always going, but the switch is choosing which to let through at any moment&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/81-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult-pattern-change-sequential-switch.png'&gt;">Solution</button>
        <button type="button" onclick="setclock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switchIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switch-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setclock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switchIframe(url){
  var clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switchIframe = document.getElementById("clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switch-iframe");
  clock_division_mshack_drums_offbeat_gate_delay_roll_seq_gate_mult_pattern_change_sequential_switchIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:clock-division-mshack-drums-offbeat-gate-delay-roll-seq-gate-mult-pattern-change-sequential-switch"></span>
<p class="caption">
Figure 10.14: <a href="https://cardinal.olney.ai">Virtual modular</a> for a percussion patch using a sequential switch to alternate between patterns.
</p>
</div>
<p>Using a switch in this way suggests a general strategy for sequencing.
Since each of the techniques discussed in this chapter has its strengths and weaknesses with respect to compactness, flexibility, and precision, it makes sense to alternate between them depending on the needs of the sequencing problem at hand and use sequential switches to combine them into larger patterns.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="eighties-lead-chiptune.html"><span class="header-section-number">9</span> Eighties Lead &amp; Chiptune</a></div>
<div class="next"><a href="complex-generators.html"><span class="header-section-number">11</span> Generators</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#complex-controllers"><span class="header-section-number">10</span> Controllers</a></li>
<li><a class="nav-link" href="#modifying-gates"><span class="header-section-number">10.1</span> Modifying gates</a></li>
<li><a class="nav-link" href="#making-gates-with-logic"><span class="header-section-number">10.2</span> Making gates with logic</a></li>
<li><a class="nav-link" href="#addingremoving-gates-with-probability"><span class="header-section-number">10.3</span> Adding/removing gates with probability</a></li>
<li><a class="nav-link" href="#speed-variable-clocks-using-lfos"><span class="header-section-number">10.4</span> Speed variable clocks using LFOs</a></li>
<li><a class="nav-link" href="#euclidean-rhythm"><span class="header-section-number">10.5</span> Euclidean rhythm</a></li>
<li><a class="nav-link" href="#sequential-switches"><span class="header-section-number">10.6</span> Sequential switches</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/aolney/ct-modular-book/blob/master/10-com-mod-controllers.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/aolney/ct-modular-book/edit/master/10-com-mod-controllers.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Computational Thinking through Modular Sounds Synthesis</strong>" was written by Andrew M. Olney. It was last built on 2022-11-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
