<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 11 Generators | Computational Thinking through Modular Sounds Synthesis</title>
<meta name="author" content="Andrew M. Olney">
<meta name="description" content="This chapter extends Chapter 6 and focuses entirely on audio-rate modulation. Audio-rate modulation uses an audio-rate signal, typically an oscillator, to modulate a parameter, most commonly a...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="Chapter 11 Generators | Computational Thinking through Modular Sounds Synthesis">
<meta property="og:type" content="book">
<meta property="og:url" content="https://olney.ai/ct-modular-book/index.html/complex-generators.html">
<meta property="og:description" content="This chapter extends Chapter 6 and focuses entirely on audio-rate modulation. Audio-rate modulation uses an audio-rate signal, typically an oscillator, to modulate a parameter, most commonly a...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 11 Generators | Computational Thinking through Modular Sounds Synthesis">
<meta name="twitter:description" content="This chapter extends Chapter 6 and focuses entirely on audio-rate modulation. Audio-rate modulation uses an audio-rate signal, typically an oscillator, to modulate a parameter, most commonly a...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Computational Thinking through Modular Sounds Synthesis</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Sound</li>
<li><a class="" href="physics-and-perception-of-sound.html"><span class="header-section-number">2</span> Physics and Perception of Sound</a></li>
<li><a class="" href="harmonic-and-inharmonic-sounds.html"><span class="header-section-number">3</span> Harmonic and Inharmonic Sounds</a></li>
<li class="book-part">Fundamental Modules</li>
<li><a class="" href="basic-modeling-concepts.html"><span class="header-section-number">4</span> Basic Modeling Concepts</a></li>
<li><a class="" href="controllers.html"><span class="header-section-number">5</span> Controllers</a></li>
<li><a class="" href="generators.html"><span class="header-section-number">6</span> Generators</a></li>
<li><a class="" href="modifiers.html"><span class="header-section-number">7</span> Modifiers</a></li>
<li class="book-part">Sound Design 1</li>
<li><a class="" href="designing-a-kick-drum.html"><span class="header-section-number">8</span> Designing a Kick Drum</a></li>
<li><a class="" href="eighties-lead-chiptune.html"><span class="header-section-number">9</span> Eighties Lead &amp; Chiptune</a></li>
<li class="book-part">Complex Modules</li>
<li><a class="" href="complex-controllers.html"><span class="header-section-number">10</span> Controllers</a></li>
<li><a class="active" href="complex-generators.html"><span class="header-section-number">11</span> Generators</a></li>
<li><a class="" href="complex-modifiers.html"><span class="header-section-number">12</span> Modifiers</a></li>
<li class="book-part">Sound Design 2</li>
<li><a class="" href="sd2-B.html"><span class="header-section-number">13</span> TBD &amp; TBD</a></li>
<li class="book-part">Sound Design 2</li>
<li><a class="" href="sd2-A.html"><span class="header-section-number">14</span> TBD &amp; TBD</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/aolney/ct-modular-book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="complex-generators" class="section level1" number="11">
<h1>
<span class="header-section-number">11</span> Generators<a class="anchor" aria-label="anchor" href="#complex-generators"><i class="fas fa-link"></i></a>
</h1>
<p>This chapter extends Chapter <a href="generators.html#generators">6</a> and focuses entirely on audio-rate modulation.
Audio-rate modulation uses an audio-rate signal, typically an oscillator, to modulate a parameter, most commonly a parameter on another oscillator.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Audio-rate modulation of a filter’s cutoff is another common option but is beyond the scope of this chapter. Try it!&lt;/p&gt;"><sup>82</sup></a>
Although the basic idea is simple to explain, sounds produced can be complex and require a new idea to understand: the sideband.</p>
<p>Before proceeding, let’s introduce some terminology.
The audio rate signal source will be called the <em>modulator</em>.
The oscillator receiving the modulation is the <em>carrier</em>.
The depth, or strength, of modulation the carrier receives from the modulator will be called the <em>modulation index</em>.
The modulation index defines how much the parameter of the carrier changes around its default value.
For example, if a carrier has a frequency of 800 Hz, the modulator may cause it to go +/- 1 Hz (from 799 to 801 Hz) or +/- 100 Hz (from 700 Hz to 900 Hz).
The signal resulting from audio-rate modulation is the <em>output</em>.</p>
<p>Recall that we can describe any wave by its shape, amplitude, frequency, and phase.
If we assume we can describe any waveshape by a collection of sine waves via Fourier transform, then we can focus on the amplitude, frequency, and phase parameters of these waves.
Audio-rate modulation can be performed on each of these parameters.
When the modulator acts on the amplitude parameter of the carrier, the result is amplitude modulation (AM).
When the modulator acts on the frequency parameter of the carrier, the result is frequency modulation (FM).
And when the modulator acts on the phase parameter of the carrier, the result is phase modulation (PM).</p>
<p>Each of these types of audio-rate modulation creates sidebands, which are new partials in the output.
Audio-rate modulation therefore is related to additive synthesis in that both involve adding partials to change the timbre of the output sound.
The main difference is that audio-rate modulation is not strictly additive and can also remove or change some partials in the carrier.
However, with sufficient control of audio-rate modulation, one can create a wide variety of sounds more efficiently than additive synthesis, as shown by the explosion of inexpensive FM keyboards in the 1980’s, like the Yamaha DX7.</p>
<p>The following sections outline the use of audio-rate modulation in modular sound synthesis according to the parameters of amplitude, frequency, and phase.
However, the story is somewhat complicated due to the history of synthesis, limitations of analogue hardware, and mathematical relationships between methods.
There are actually two families of methods around amplitude and frequency that cover all three parameters, as will be explained.</p>
<div id="modulating-amplitude" class="section level2" number="11.1">
<h2>
<span class="header-section-number">11.1</span> Modulating amplitude<a class="anchor" aria-label="anchor" href="#modulating-amplitude"><i class="fas fa-link"></i></a>
</h2>
<p>The amplitude family includes amplitude modulation and ring modulation.
The difference between the two is that amplitude modulation stops producing sound when the modulation signal crosses below zero and ring modulation continues to produce sound.
Although this difference may seem like a small one, it leads to several differences in the resulting sidebands and therefore overall timbre.</p>
<div id="amplitude-modulation" class="section level3" number="11.1.1">
<h3>
<span class="header-section-number">11.1.1</span> Amplitude modulation<a class="anchor" aria-label="anchor" href="#amplitude-modulation"><i class="fas fa-link"></i></a>
</h3>
<p>You might have heard of amplitude modulation (AM) before, as it was one of the earliest technologies used in radio and is still in use today.
We actually already covered the basic idea of AM in Section <a href="generators.html#tremolo">6.3.3</a> to produce tremelo.
As you recall, we used an LFO at relatively low rates to control a VCA, and the VCA was controlling the output of our main oscillator.
AM works exactly the same way as this but at audio rates (&gt;20 Hz).
At audio rates, we can hear sidebands, and the nature of the sound changes from an oscillation in loudness to a new timbre.</p>
<p>The VCA is key to understanding AM.
Recall that the VCA is a level control that lets through a certain amount of signal, typically 0-100%.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Most VCAs are attenuators and so only reduce signal. Some VCAs include amplifiers that allow the gain on the signal to go above 100%&lt;/p&gt;"><sup>83</sup></a>.
If you stop to think about this mathematically, it means that the VCA is multiplying the signal by a control value.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The control value itself at any moment is determined by the output of the modulator and thus it is the two signals that are being multiplied together, but for simplicity of exposition fixed point values are emphasized.&lt;/p&gt;"><sup>84</sup></a>
For example, if the VCA control value is 50%, then it is multiplying the incoming signal amplitude by .5.
AM stops producing sound when the control value crosses below zero because VCAs are defined to operate in the 0-100% range, i.e., with unipolar control values only.
So when the control value crosses below zero, the VCA output simply stays at zero until the control value becomes positive again.
This behavior is illustrated in Figure <a href="complex-generators.html#fig:am-unipolar">11.1</a>.</p>

<div class="figure">
<span style="display:block;" id="fig:am-unipolar"></span>
<img src="images/am-unipolar.png" alt="An example of amplitude modulation using sine waves for modulator and carrier. Note that where the modulator signal (purple) is at its peak, the output (yellow) is at greatest strength, but where the modulator signal is negative, the output reduces to zero." width="100%"><p class="caption">
Figure 11.1: An example of amplitude modulation using sine waves for modulator and carrier. Note that where the modulator signal (purple) is at its peak, the output (yellow) is at greatest strength, but where the modulator signal is negative, the output reduces to zero.
</p>
</div>
<p>Side bands for AM are simplest for sine waves.
If both modulator and carrier are sine waves, the spectrum of the output will include a partial at the carrier frequency <span class="math inline">\(C_f\)</span> and two partials offset by the modulator frequency <span class="math inline">\(M_f\)</span>, specifically <span class="math inline">\(C_f - M_f\)</span> and <span class="math inline">\(C_f + M_f\)</span>.
The sidebands have less strength than the carrier, and the strength of the sidebands is determined by the modulation index, which for AM is defined as the peak change in output amplitude divided by the amplitude of the carrier, <span class="math inline">\(\Delta A/C_a\)</span>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;When the modulation index is at maximum, each sideband is half of the strength of the carrier.&lt;/p&gt;"><sup>85</sup></a>
An example of peak change is given in Figure <a href="complex-generators.html#fig:am-modulation-index">11.2</a>.</p>

<div class="figure">
<span style="display:block;" id="fig:am-modulation-index"></span>
<img src="images/am-modulation-index.png" alt="An example of peak amplitude change using sine waves for modulator and carrier. The indicated difference in amplitude between the carrier signal (red) and the output (yellow) is the peak amplitude change \(\Delta A\)." width="100%"><p class="caption">
Figure 11.2: An example of peak amplitude change using sine waves for modulator and carrier. The indicated difference in amplitude between the carrier signal (red) and the output (yellow) is the peak amplitude change <span class="math inline">\(\Delta A\)</span>.
</p>
</div>
<p>When the modulator and/or carrier are not sine waves, the sidebands contain the sums and differences for all pairs of partials between the modulator and the carrier.
For example, if <span class="math inline">\(M_f\)</span> has 3 partials and <span class="math inline">\(C_f\)</span> has 5 partials, then there are <span class="math inline">\(3*5\)</span> partials in the lower sideband and the same number in the upper sideband.
Even though the carrier frequency is not the fundamental, it is perceived as the pitch center of the sound, even when when the sidebands contain many partials.
Note that in the above formulas, any partial that crosses below zero disappears.
Also, if the modulator frequency goes above the carrier, <span class="math inline">\(M_f &gt; C_f\)</span>, the roles of carrier and modulator are reversed.</p>
<p>Implementing AM synthesis as described above is relatively simple in our virtual modular set up, but it has some surprises.
First, if we want pure sine waves, i.e. sine waves with only one harmonic, then we need to use wavetable oscillators, which we’ve briefly mentioned a few times up to this point but never used.
A <a href="https://en.wikipedia.org/wiki/Wavetable_synthesis">wavetable</a> oscillator is a digital oscillator that defines a wave based on one stored cycle of that wave.
We need wavetable oscillators here to get a perfect sine wave, because the virtual analogue implementations faithfully recreate the imperfections of the original hardware.
This is also true for real VCAs, which tend to be a bit noisy, so we’ll need to use a specific VCA that we’ve never used before.
All this effort is only necessary to get a result that matches the previous equations.
Otherwise you may not care about these small imperfections that give additional character to the sound through the extra sidebands they create.
Try creating a simple AM patch from scratch using the button in Figure <a href="complex-generators.html#fig:am-example">11.3</a> and look carefully at the sidebands it creates.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setam_exampleIframe('https://cardinal.olney.ai?patchurl=empty.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#am_example">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="am_example" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="am_exampleLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="am_exampleLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two WT VCOs, AMP, Scope, and Sassy&lt;/li&gt;
&lt;li&gt;On each WT VCO, move the wavetable position knob to the left to select a sine wave. The intermediate position morph between other waves like triangle and square&lt;/li&gt;
&lt;li&gt;Connect the oscillator on the left (modulator) to the AMP CV and to a Sassy input&lt;/li&gt;
&lt;li&gt;Connect the oscilator on the right (carrier) to the AMP in and to a Sassy input &lt;/li&gt;
&lt;li&gt;Connect the AMP out to Scopein and a Sassy input&lt;/li&gt;
&lt;li&gt;Enable the external trigger on the Scope, connect the modulator output to the Scop external trigger, and adjust Sassy for high-quality spectrogram output (left top sliders down to 1/32, top right slider up to 1000ms, freq radiobutton, 4x radiobutton)&lt;/li&gt;
&lt;li&gt;Adjust the oscillator frequencies so that the modulator is lower than the carrier and the difference is sufficient to show on Sassy and not cross below zero (I used 60 and 400)&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the scopes &lt;ul&gt;
&lt;li&gt;Mouse over the frequency peaks in Sassy. You should see one for the modulator, one for the carrier, and two for sidebands. Check their values and compare to the sideband formula&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the Sassy input from the carrier. You should now see a peak that was hidden in the output &lt;/li&gt;
&lt;li&gt;Change the time knob on the scope to look at the output waveshape across scales. You should see the characteristic waveshape presented earlier. Connect the modulator output to the second Scope input to recreate the figure&lt;/li&gt;
&lt;li&gt;Move the modulator wavetable position knob slowly upward and watch the change in Sassy. You will see both new peaks in the spectrum of the modulator as well as matching peaks in sidebands in the output signal.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/wtvco-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/amp-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/am-example.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two WT VCOs, AMP, Scope, and Sassy&lt;/li&gt;
&lt;li&gt;On each WT VCO, move the wavetable position knob to the left to select a sine wave. The intermediate position morph between other waves like triangle and square&lt;/li&gt;
&lt;li&gt;Connect the oscillator on the left (modulator) to the AMP CV and to a Sassy input&lt;/li&gt;
&lt;li&gt;Connect the oscilator on the right (carrier) to the AMP in and to a Sassy input &lt;/li&gt;
&lt;li&gt;Connect the AMP out to Scopein and a Sassy input&lt;/li&gt;
&lt;li&gt;Enable the external trigger on the Scope, connect the modulator output to the Scop external trigger, and adjust Sassy for high-quality spectrogram output (left top sliders down to 1/32, top right slider up to 1000ms, freq radiobutton, 4x radiobutton)&lt;/li&gt;
&lt;li&gt;Adjust the oscillator frequencies so that the modulator is lower than the carrier and the difference is sufficient to show on Sassy and not cross below zero (I used 60 and 400)&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the scopes &lt;ul&gt;
&lt;li&gt;Mouse over the frequency peaks in Sassy. You should see one for the modulator, one for the carrier, and two for sidebands. Check their values and compare to the sideband formula&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the Sassy input from the carrier. You should now see a peak that was hidden in the output &lt;/li&gt;
&lt;li&gt;Change the time knob on the scope to look at the output waveshape across scales. You should see the characteristic waveshape presented earlier. Connect the modulator output to the second Scope input to recreate the figure&lt;/li&gt;
&lt;li&gt;Move the modulator wavetable position knob slowly upward and watch the change in Sassy. You will see both new peaks in the spectrum of the modulator as well as matching peaks in sidebands in the output signal.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/wtvco-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/amp-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/am-example.png'&gt;">Solution</button>
        <button type="button" onclick="setam_exampleIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="am_example-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setam_exampleIframe(url){
  var am_exampleIframe = document.getElementById("am_example-iframe");
  am_exampleIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:am-example"></span>
<p class="caption">
Figure 11.3: <a href="https://cardinal.olney.ai">Virtual modular</a> for amplitude modulation using pure sine waves.
</p>
</div>
<p>AM synthesis will generally produce inharmonic sidebands unless the modulator and carrier frequencies are chosen to create harmonic relationships.
Using sine waves for example, if modulator and carrier have the same frequency, then the lower sideband will be zero and the upper sideband will be one octave above the carrier, e.g. 100 and 200 Hz.
We can describe such frequency relationships between modulator and carrier in terms of ratios, so if both have the same frequency, the ratio of C:M is 1:1.
You can easily check that any N:1 ratio is harmonic, for example using 200 Hz as the carrier would result in 100, 200, and 300 Hz harmonics.
Likewise, N:2 where N is odd will give odd harmonics (100, 300, 500 Hz), and N:2 where N in even will give even harmonics (200, 400, 600 Hz).
Typical frequency ratios associated with musical intervals shown in Table <a href="complex-generators.html#tab:freq-ratio">11.1</a> may also be used to create chordal harmonic structures.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:freq-ratio">Table 11.1: </span> Frequency ratios for musical intervals.</caption>
<thead><tr class="header">
<th align="center">Frequency ratio</th>
<th>Musical interval</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">2:1</td>
<td>Octave</td>
</tr>
<tr class="even">
<td align="center">3:2</td>
<td>Fifth</td>
</tr>
<tr class="odd">
<td align="center">4:3</td>
<td>Fourth</td>
</tr>
<tr class="even">
<td align="center">5:4</td>
<td>Major third</td>
</tr>
<tr class="odd">
<td align="center">6:5</td>
<td>Minor third</td>
</tr>
</tbody>
</table></div>
<p>Typically when a harmonic relationship like this has been established, one wishes to keep it intact while playing different notes.
This is as easy to accomplish as keeping two (or more) oscillators in tune as a chord while playing across a keyboard.
Try extending the last patch with a keyboard and use V/Oct connections to keep the harmonic relationship between modulator and carrier intact using the button in Figure <a href="complex-generators.html#fig:am-keyboard-frequency-tracking">11.4</a>.
This patch is also a good opportunity to explore the sounds of more complex modulator and carrier waves, as well as inharmonic sounds.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setam_keyboard_frequency_trackingIframe('https://cardinal.olney.ai?patchurl=am-example.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#am_keyboard_frequency_tracking">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="am_keyboard_frequency_tracking" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="am_keyboard_frequency_trackingLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="am_keyboard_frequency_trackingLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add Twelve-Key and Host Audio&lt;/li&gt;
&lt;li&gt;Move Scope and Sassy to the lower row to make space&lt;/li&gt;
&lt;li&gt;Connect 12 ky CV to both oscillator V/Oct. The voltage from this connection will be summed with the dialed in voltage represented by each oscillator's frequency knob, so when each receives the same voltage from the 12 key, the relative tuning between oscillators will not change&lt;/li&gt;
&lt;li&gt;Connect the AMP out to Host audio L&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a harmonic relationship, e.g. N:1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard. Notice that the carrier, which is the strongest harmonic, defines the perceived pitch and that the sidebands remain harmonic with it&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the modulator V/Oct and play up the keyboard. Note on most keys the result is inharmonic but it becomes harmonic on other keys by chance&lt;/li&gt;
&lt;li&gt;Reconnect the V/Oct and move the modulator wavetable position knob slowly upward and listen to the change in the sound. Repeat for the carrier knob. Note that the carrier remains the perceived pitch center even as the harmonics increase &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/am-keyboard-frequency-tracking.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add Twelve-Key and Host Audio&lt;/li&gt;
&lt;li&gt;Move Scope and Sassy to the lower row to make space&lt;/li&gt;
&lt;li&gt;Connect 12 ky CV to both oscillator V/Oct. The voltage from this connection will be summed with the dialed in voltage represented by each oscillator's frequency knob, so when each receives the same voltage from the 12 key, the relative tuning between oscillators will not change&lt;/li&gt;
&lt;li&gt;Connect the AMP out to Host audio L&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a harmonic relationship, e.g. N:1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard. Notice that the carrier, which is the strongest harmonic, defines the perceived pitch and that the sidebands remain harmonic with it&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the modulator V/Oct and play up the keyboard. Note on most keys the result is inharmonic but it becomes harmonic on other keys by chance&lt;/li&gt;
&lt;li&gt;Reconnect the V/Oct and move the modulator wavetable position knob slowly upward and listen to the change in the sound. Repeat for the carrier knob. Note that the carrier remains the perceived pitch center even as the harmonics increase &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/am-keyboard-frequency-tracking.png'&gt;">Solution</button>
        <button type="button" onclick="setam_keyboard_frequency_trackingIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="am_keyboard_frequency_tracking-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setam_keyboard_frequency_trackingIframe(url){
  var am_keyboard_frequency_trackingIframe = document.getElementById("am_keyboard_frequency_tracking-iframe");
  am_keyboard_frequency_trackingIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:am-keyboard-frequency-tracking"></span>
<p class="caption">
Figure 11.4: <a href="https://cardinal.olney.ai">Virtual modular</a> for amplitude modulation with keyboard tracking.
</p>
</div>
<p>AM creates an interesting sound with a fixed modulation index, but as with all audio-rate modulations, we can also change that modulation index over time.
All that is needed is a signal that changes over time and something to attenuate the modulation index in response to that signal.
We can extend the last patch along these lines by adding an envelope triggered by the keyboard where that envelope controls another VCA.
Every keypress will then cause a brief change in the modulation index, which will correspondingly change the strength of the sidebands.
This effect is even more pronounced for non-sine waves because there are more partials in the sidebands.
Try modulating the modulation index with an envelope using the button in Figure <a href="complex-generators.html#fig:am-keyboard-frequency-tracking-adsr-modulation-index">11.5</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setam_keyboard_frequency_tracking_adsr_modulation_indexIframe('https://cardinal.olney.ai?patchurl=am-keyboard-frequency-tracking.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#am_keyboard_frequency_tracking_adsr_modulation_index">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="am_keyboard_frequency_tracking_adsr_modulation_index" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="am_keyboard_frequency_tracking_adsr_modulation_indexLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="am_keyboard_frequency_tracking_adsr_modulation_indexLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add ADSR and another AMP to the right of the carrier VCO&lt;/li&gt;
&lt;li&gt;Connect 12 ky gate out to ADSR gate in&lt;/li&gt;
&lt;li&gt;Connect ADSR out to the new AMP CV in&lt;/li&gt;
&lt;li&gt;Connect modulator out to new AMP in, new AMP out to old AMP CV&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard. Notice the enveloped sound becomes a bit brighter and the brightness fades with the envelope. This is analogous to having filter whose cutoff is controlled by an envelope, but without using a filter module!&lt;/li&gt;
&lt;li&gt;Change the gain on the new AMP all the way down. You should see a sine wave on the scope. Now when you play across the keyboard, the envelope it going from non-AM to AM wherease before, it was baseline AM to stronger AM&lt;/li&gt;
&lt;li&gt;Repeat the above with non-sine waveshapes for modulator and carrier. The effect of the envelope is even more dramatic in these cases&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/am-keyboard-frequency-tracking-adsr-modulation-index.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add ADSR and another AMP to the right of the carrier VCO&lt;/li&gt;
&lt;li&gt;Connect 12 ky gate out to ADSR gate in&lt;/li&gt;
&lt;li&gt;Connect ADSR out to the new AMP CV in&lt;/li&gt;
&lt;li&gt;Connect modulator out to new AMP in, new AMP out to old AMP CV&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard. Notice the enveloped sound becomes a bit brighter and the brightness fades with the envelope. This is analogous to having filter whose cutoff is controlled by an envelope, but without using a filter module!&lt;/li&gt;
&lt;li&gt;Change the gain on the new AMP all the way down. You should see a sine wave on the scope. Now when you play across the keyboard, the envelope it going from non-AM to AM wherease before, it was baseline AM to stronger AM&lt;/li&gt;
&lt;li&gt;Repeat the above with non-sine waveshapes for modulator and carrier. The effect of the envelope is even more dramatic in these cases&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/am-keyboard-frequency-tracking-adsr-modulation-index.png'&gt;">Solution</button>
        <button type="button" onclick="setam_keyboard_frequency_tracking_adsr_modulation_indexIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="am_keyboard_frequency_tracking_adsr_modulation_index-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setam_keyboard_frequency_tracking_adsr_modulation_indexIframe(url){
  var am_keyboard_frequency_tracking_adsr_modulation_indexIframe = document.getElementById("am_keyboard_frequency_tracking_adsr_modulation_index-iframe");
  am_keyboard_frequency_tracking_adsr_modulation_indexIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:am-keyboard-frequency-tracking-adsr-modulation-index"></span>
<p class="caption">
Figure 11.5: <a href="https://cardinal.olney.ai">Virtual modular</a> for amplitude modulation with keyboard tracking where the modulation index is controlled by an envelope.
</p>
</div>
</div>
<div id="ring-modulation" class="section level3" number="11.1.2">
<h3>
<span class="header-section-number">11.1.2</span> Ring modulation<a class="anchor" aria-label="anchor" href="#ring-modulation"><i class="fas fa-link"></i></a>
</h3>
<p>Ring modulation (RM) is implemented the same way as AM, except with a VCA where the control value can cross below zero.
That means that RM multiplies the carrier signal by the control value of the VCA, but since the control value can be negative, the output can also be negative.
Negative output may sound strange at first, but it is exactly the same as positive output <em>except</em> inverted.
Thus RM operates just like AM except that RM will never stop at zero, and when it crosses zero, the output is the same as above zero except inverted.
This behavior is illustrated in Figure <a href="complex-generators.html#fig:rm-bipolar">11.6</a>.</p>

<div class="figure">
<span style="display:block;" id="fig:rm-bipolar"></span>
<img src="images/rm-bipolar.png" alt="An example of ring modulation using sine waves for modulator and carrier. Note that where the modulator signal (purple) is at either its positive or negative peak, the output (yellow) is at greatest strength. The overall amplitude of the output is reduced relative to Figure 11.1 due to the removal of the carrier frequency (see text)." width="100%"><p class="caption">
Figure 11.6: An example of ring modulation using sine waves for modulator and carrier. Note that where the modulator signal (purple) is at either its positive or negative peak, the output (yellow) is at greatest strength. The overall amplitude of the output is reduced relative to Figure <a href="complex-generators.html#fig:am-unipolar">11.1</a> due to the removal of the carrier frequency (see text).
</p>
</div>
<p>Historically, ring modulation was performed by a <a href="https://en.wikipedia.org/wiki/Ring_modulation">circuit consisting of diodes arranged in a ring</a>, thus the name.
Ring modulators and VCAs are sometimes called four- and two-quadrant multipliers.
On a VCA, the input signal can be bipolar but the control value is unipolar.
That means the VCA output is restricted to two quadrants of the Cartesian plane.
On a ring modulator, both input signal and control can be bipolar, so the output can occur in all four quadrants of the Cartesian plane.
The difference between four- and two-quadrant multipliers is illustrated in Figure <a href="complex-generators.html#fig:four-quadrant-multiplier">11.7</a>.
Ring modulators are also sometimes called balanced modulators because the modulating signal spends as much time being negative as positive.</p>

<div class="figure">
<span style="display:block;" id="fig:four-quadrant-multiplier"></span>
<img src="images/four-quadrant-multiplier.png" alt="A two-quadrant multiplier multiplies a bipolar signal (carrier) and a unipolar signal (control voltage), so has output in two quadrants (left). A four-quadrant multiplier multiplies two bipolar signals, so has output in all four quadrants (right)." width="100%"><p class="caption">
Figure 11.7: A two-quadrant multiplier multiplies a bipolar signal (carrier) and a unipolar signal (control voltage), so has output in two quadrants (left). A four-quadrant multiplier multiplies two bipolar signals, so has output in all four quadrants (right).
</p>
</div>
<p>Like AM, side bands for RM are easiest to understand for sine waves.
The output spectrum is the same as AM, except that the carrier frequency <span class="math inline">\(C_f\)</span> is removed, leaving only the side bands <span class="math inline">\(C_f - M_f\)</span> and <span class="math inline">\(C_f + M_f\)</span>, and any sidebands that cross below zero are reflected back as their absolute value instead of being lost.
Similarly, when the modulator and/or carrier are not sine waves, the sidebands contain the sums and differences for all pairs of partials between the modulator and the carrier.
The modulation index for RM is likewise the same as AM, and if the modulator frequency goes above the carrier, <span class="math inline">\(M_f &gt; C_f\)</span>, the roles of carrier and modulator are reversed.</p>
<p>We can implement RM with a slight modification to the first AM patch.
Again, the choice of module is important to get identical behavior to the equations above, though in practice, the character of small imperfections might be preferred.
Try creating a simple RM patch extending the AM patch using the button in Figure <a href="complex-generators.html#fig:rm-example">11.8</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setrm_exampleIframe('https://cardinal.olney.ai?patchurl=am-example.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#rm_example">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="rm_example" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="rm_exampleLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="rm_exampleLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add feidah, copy the connections from AMP over to it, and remove AMP&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the scopes &lt;ul&gt;
&lt;li&gt;Mouse over the frequency peaks in Sassy. You should see one for the modulator, one for the carrier, and two for sidebands. Check their values and compare to the sideband formula&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the Sassy input from the carrier. You should see that this carrier partial is missing from the ring mod output&lt;/li&gt;
&lt;li&gt;Change the time knob on the scope to look at the output waveshape across scales. You should see the characteristic waveshape presented earlier. Connect the modulator output to the second Scope input to recreate the figure&lt;/li&gt;
&lt;li&gt;Move the modulator wavetable position knob slowly upward and watch the change in Sassy. You will see both new peaks in the spectrum of the modulator as well as matching peaks in sidebands in the output signal.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/feidah-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/rm-example.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add feidah, copy the connections from AMP over to it, and remove AMP&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the scopes &lt;ul&gt;
&lt;li&gt;Mouse over the frequency peaks in Sassy. You should see one for the modulator, one for the carrier, and two for sidebands. Check their values and compare to the sideband formula&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the Sassy input from the carrier. You should see that this carrier partial is missing from the ring mod output&lt;/li&gt;
&lt;li&gt;Change the time knob on the scope to look at the output waveshape across scales. You should see the characteristic waveshape presented earlier. Connect the modulator output to the second Scope input to recreate the figure&lt;/li&gt;
&lt;li&gt;Move the modulator wavetable position knob slowly upward and watch the change in Sassy. You will see both new peaks in the spectrum of the modulator as well as matching peaks in sidebands in the output signal.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/feidah-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/rm-example.png'&gt;">Solution</button>
        <button type="button" onclick="setrm_exampleIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="rm_example-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setrm_exampleIframe(url){
  var rm_exampleIframe = document.getElementById("rm_example-iframe");
  rm_exampleIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:rm-example"></span>
<p class="caption">
Figure 11.8: <a href="https://cardinal.olney.ai">Virtual modular</a> for ring modulation using pure sine waves.
</p>
</div>
<p>In terms of harmonicity, RM is again identical to AM except for the properties of missing the carrier frequency and reflections of sideband partials off zero.
The missing carrier means that the overall spectrum will no longer have a strong pitch center.
However, our perception tends to fill in the missing frequency of the carrier such that the pitch still seems centered there, just not as strongly.
Reflected sideband partials have potential to interfere with other partials, but this will occur only when the modulator or carrier has a richer waveshape than sign and thus higher harmonics to subtract.
Otherwise the same concepts about harmonic frequency ratios, keyboard tracking, and modulating the modulation index apply to RM as AM.
Try extending the final AM patch to RM using the button in Figure <a href="complex-generators.html#fig:rm-keyboard-frequency-tracking">11.9</a>.
This patch is also a good opportunity to explore how the sound of RM differs from AM.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setrm_keyboard_frequency_trackingIframe('https://cardinal.olney.ai?patchurl=rm-keyboard-frequency-tracking-adsr-modulation-index.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#rm_keyboard_frequency_tracking">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="rm_keyboard_frequency_tracking" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="rm_keyboard_frequency_trackingLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="rm_keyboard_frequency_trackingLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two feidahs, copy the connections from the AMPs over to them, and remove the AMPs&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a harmonic relationship, e.g. N:1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard. Notice that even with the carrier missing, it still defines the perceived pitch and the sidebands remain harmonic with it. Notice the change in brightness with the envelope&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the modulator V/Oct and play up the keyboard. Note the result is perhaps a bit less inharmonic than AM under these conditions&lt;/li&gt;
&lt;li&gt;Reconnect the V/Oct and move the modulator wavetable position knob slowly upward and listen to the change in the sound. Note that as the shape approaches saw, the carrier frequency is filled in by reflection. Repeat for the carrier knob. Note that the missing carrier remains the perceived pitch center even as the harmonics increase.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/rm-keyboard-frequency-tracking.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two feidahs, copy the connections from the AMPs over to them, and remove the AMPs&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a harmonic relationship, e.g. N:1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard. Notice that even with the carrier missing, it still defines the perceived pitch and the sidebands remain harmonic with it. Notice the change in brightness with the envelope&lt;/li&gt;
&lt;li&gt;Temporarally disconnect the modulator V/Oct and play up the keyboard. Note the result is perhaps a bit less inharmonic than AM under these conditions&lt;/li&gt;
&lt;li&gt;Reconnect the V/Oct and move the modulator wavetable position knob slowly upward and listen to the change in the sound. Note that as the shape approaches saw, the carrier frequency is filled in by reflection. Repeat for the carrier knob. Note that the missing carrier remains the perceived pitch center even as the harmonics increase.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/rm-keyboard-frequency-tracking.png'&gt;">Solution</button>
        <button type="button" onclick="setrm_keyboard_frequency_trackingIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="rm_keyboard_frequency_tracking-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setrm_keyboard_frequency_trackingIframe(url){
  var rm_keyboard_frequency_trackingIframe = document.getElementById("rm_keyboard_frequency_tracking-iframe");
  rm_keyboard_frequency_trackingIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:rm-keyboard-frequency-tracking"></span>
<p class="caption">
Figure 11.9: <a href="https://cardinal.olney.ai">Virtual modular</a> for ring modulation with keyboard tracking.
</p>
</div>
<p>RM and AM are similar in operation and in sound.
The main differences revolve around the missing carrier component and sidebands reflecting off zero.
Both of these emphasize sidebands in RM, because the sidebands have more energy in them and are never destroyed.
In contrast, AM puts more weight on the carrier frequency and less on the sidebands.
Another way of looking at the difference is that RM copies the characteristics of the carrier into the sidebands without including the carrier, whereas AM copies the same characteristics to a lesser extent and includes the carrier.
This makes RM potentially more useful as an audio processing tool than AM.
These differences between AM and RM are illustrated in Figure <a href="complex-generators.html#fig:am-rm-modsquare-carsaw">11.10</a>.</p>

<div class="figure">
<span style="display:block;" id="fig:am-rm-modsquare-carsaw"></span>
<img src="images/am-rm-modsquare-carsaw.png" alt="AM (left) and RM (right) for a square wave modulator (blue) and a saw wave carrier (yellow). Note that the energy of the saw wave carrier is more strongly preserved in AM, whereas in RM, the characteristics of the carrier are preserved without preserving its energy." width="100%"><p class="caption">
Figure 11.10: AM (left) and RM (right) for a square wave modulator (blue) and a saw wave carrier (yellow). Note that the energy of the saw wave carrier is more strongly preserved in AM, whereas in RM, the characteristics of the carrier are preserved without preserving its energy.
</p>
</div>
</div>
</div>
<div id="modulating-frequency" class="section level2" number="11.2">
<h2>
<span class="header-section-number">11.2</span> Modulating frequency<a class="anchor" aria-label="anchor" href="#modulating-frequency"><i class="fas fa-link"></i></a>
</h2>
<p>The frequency family includes frequency modulation and phase modulation.
Since <span class="math inline">\(frequency * time = phase\)</span>, frequency and phase modulation are closely related.
However, understanding this modulation family in modular synthesis requires understanding not just the math behind them but also the history.
Many modular synthesis methods involving this family are actually approximations rather than exact implementations.
Each approximation has its own characteristic sound that is now part of the genre of electronic music.
Thus understanding this family requires understanding both the true methods and the approximations.</p>
<div id="frequency-modulation" class="section level3" number="11.2.1">
<h3>
<span class="header-section-number">11.2.1</span> Frequency modulation<a class="anchor" aria-label="anchor" href="#frequency-modulation"><i class="fas fa-link"></i></a>
</h3>
<p>Frequency modulation (FM) is a widespread method for radio transmission, just like AM.
In the context of modular synthesis, FM is strongly associated with <span class="citation">John M. Chowning<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;span&gt;“The Synthesis of Complex Audio Spectra by Means of Frequency Modulation,”&lt;/span&gt; &lt;em&gt;Journal of the Audio Engineering Society&lt;/em&gt; 21, no. 7 (1973): 526–34, &lt;a href="http://www.aes.org/e-lib/browse.cfm?elib=1954" role="doc-biblioref"&gt;http://www.aes.org/e-lib/browse.cfm?elib=1954&lt;/a&gt;.&lt;/p&gt;'><sup>86</sup></a></span>, whose work in the 1970s <a href="https://en.wikipedia.org/wiki/Frequency_modulation_synthesis">was used in the Yamaha FM synthesizers</a>, notably the DX7.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Technically Chowning’s FM is phase modulation, as will be discussed later in the chapter.&lt;/p&gt;"><sup>87</sup></a>
<!-- Although Chowning's approach arrived decades after FM was used in modular synthesis, it sets the standard for all other forms of FM, which can largely be viewed as approximations of it. -->
Historically, FM synthesis methods have only approximated true FM.
The purpose of this section is thus to explain true FM so that approximations have a common reference point.</p>
<p>We previously covered the basic idea of FM in Section <a href="generators.html#vibrato">6.3.2</a> to produce vibrato.
As you recall, we used an LFO at relatively low rates to control a VCA, and the VCA was controlling the V/Oct of our main oscillator.
In FM we don’t use a VCA but instead an attenuverter/polarizer, i.e. FM crosses zero just like RM.
The attenuverter/polarizer is often integrated into the carrier oscillator with a corresponding FM input.
The voltage into the carrier’s FM input is added to the voltage into the carrier’s V/Oct input, so when only one input is used, these two inputs are interchangeable.
When using both, the V/Oct defines the carrier’s frequency, and the FM input defines the variation around that frequency.
Thus as the modulator increases, the frequency of the output increases, and as the modulator decreases, the frequency of the output decreases, as shown in Figure <a href="complex-generators.html#fig:fm-voct-composite">11.11</a>.</p>

<div class="figure">
<span style="display:block;" id="fig:fm-voct-composite"></span>
<img src="images/fm-voct-composite.png" alt="Voltage controlled oscillators typically have an FM input (lower left) in addition to a V/Oct input (upper left). The voltage from these two inputs is internally summed, thus V/Oct can be used to define a center frequency and FM can be used to define a variation around that frequency. Note the attenuator knob directly above the FM jack can be used to attenuate the FM voltage and therefore the strength of the modulation. The effect of the modulator through the FM jack (right) causes the carrier (yellow) to increase or decrease in frequency according to the value of the modulator (blue)." width="100%"><p class="caption">
Figure 11.11: Voltage controlled oscillators typically have an FM input (lower left) in addition to a V/Oct input (upper left). The voltage from these two inputs is internally summed, thus V/Oct can be used to define a center frequency and FM can be used to define a variation around that frequency. Note the attenuator knob directly above the FM jack can be used to attenuate the FM voltage and therefore the strength of the modulation. The effect of the modulator through the FM jack (right) causes the carrier (yellow) to increase or decrease in frequency according to the value of the modulator (blue).
</p>
</div>
<p>As with AM and RM, FM creates sidebands symmetrically around the carrier frequency.
In contrast, FM creates an infinite number of sideband partials rather than just two - even when the modulator and carrier are sine waves.
These side band partials are arranged in pairs as <span class="math inline">\(C_f - nM_f\)</span> and <span class="math inline">\(C_f + nM_f\)</span>, where <span class="math inline">\(n\)</span> is a natural number.
When <span class="math inline">\(n\)</span> is odd, the side band partials below <span class="math inline">\(C_f\)</span> have reversed phase.
Additionally, partials that cross zero will reflect with a reversal of phase.
The above is also true when the modulator and carrier are non-sine waves, in which case each pairing of partials between them creates a new sideband pair.
To avoid confusion around the word “pair,” the following discussion of sidebands will be restricted to sine waves.</p>
<p>The FM modulation index is defined as the peak change in output frequency divided by the highest frequency component of the modulator, <span class="math inline">\(\Delta F/M_f\)</span>.
Changing the modulation index has a dramatic effect on the timbre for several reasons.
First, although FM produces infinite sidebands, most of the partials have negligible amplitude.
According to <a href="https://en.wikipedia.org/wiki/Carson_bandwidth_rule">Carson’s bandwith rule</a>, 98% of the energy in the spectrum is within a bandwidth defined by <span class="math inline">\(2(\Delta F + M_f)\)</span>, so holding <span class="math inline">\(M_f\)</span> constant, the FM bandwidth will increase as the modulation index increases.
Larger bandwidth affects the timbre of the sound by increasing the audible sideband partials and increasing the opportunities for partials to reflect off zero and interfere with existing partials.
Second, as the modulation index increases, each sideband pair defined by <span class="math inline">\(n\)</span> changes in amplitude according to its own Bessel function, and once the Bessel function crosses below zero, the sideband pair reverses phase.
The amplitude changes created by the Bessel functions ripple outward for increasing <span class="math inline">\(n\)</span> as the modulation index increases, as shown in Figure <a href="complex-generators.html#fig:bessel-modulation">11.12</a>.</p>

<div class="figure">
<span style="display:block;" id="fig:bessel-modulation"></span>
<iframe src="https://player.vimeo.com/video/309150702" width="672" height="400px" data-external="1">
</iframe>
<p class="caption">
Figure 11.12: <a href="https://vimeo.com/309150702">Vimeo video</a> of FM sideband pair amplitudes following Bessel functions as the modulation index increases. Image <a href="https://vimeo.com/jeffreyhass">© Jeffery Hass</a>.
</p>
</div>
<p>Figure <a href="complex-generators.html#fig:bessel-modulation">11.12</a> illustrates how the brightness of the sound increases as the modulation index increases.
Because there is a fluctuating loss of energy behind the peaking Bessel functions, the pitch center feels somewhat unstable as the modulation index increases.
Depending on where the carrier frequency falls along equal loudness contuors (see Chapter <a href="physics-and-perception-of-sound.html#physics-and-perception-of-sound">2</a>), the perceived pitch can appear to move up or down as the modulation index increases.
For example, the pitch in Figure <a href="complex-generators.html#fig:bessel-modulation">11.12</a> is about 700 Hz, at which point human hearing has more sensitivity to higher frequencies than lower frequencies.
Thus as the modulation index increases, the upper sideband is perceived as louder than the lower sideband, causing a perception of upward pitch shift.</p>
<p>Harmonic ratios of carrier to modulator (C:M) are more complex for FM than AM/RM because FM sidebands are infinite and reflect from zero out of phase.
Additionally, sideband partials may already be inverted if they are both odd and less than the carrier frequency or if their Bessel function drops below zero.
If we only consider reflection from zero and ignore the other complexities, a 1:1 ratio will produce all harmonics and thus be similar to a saw wave.
This is because the first lower sideband partial is <span class="math inline">\(1-1=0\)</span>, and all negative partials for higher <span class="math inline">\(n\)</span> reflect back on top of their positive counterparts.
Thus for 1:1, the carrier frequency is the fundamental, and the lower sideband is reflected on top of the upper sideband.
Another simple example is 1:2.
Since every sideband partial will be <span class="math inline">\(1 \pm n2\)</span>, the partials will always be odd, giving a spectrum similar to a square wave.
Again the lower sideband will reflect across zero on top of the upper sideband, and the carrier frequency will be the fundamental.</p>
<p>Properties of C:M ratios can be generalized across integers.
For example, any N:1 will generate all harmonics starting at the value of 1, though the carrier will only be the fundamental for 1:1.
Ratio 1:N will skip every nth partial, e.g. for 1:3, partials 3, 9, 27, and so on will be skipped.
Ratio N:2 will yield only even partials if N is even and only odd partials if N is odd.
These examples show how different ratios can create the same result and illustrates the complexity of this topic, even under our current simplifying assumptions.</p>
<p>If we consider ratios that produce the same result as a family, then we can describe families using a single ratio called <a href="http://www.sfu.ca/%7Etruax/fmtut.html">the normal form ratio</a> by taking <span class="math inline">\(|C-M|\)</span> until the result is either 1:1 or <span class="math inline">\(M \ge 2C\)</span>.
For example, any N:1 will reduce to 1:1 in normal form because we repeatedly subtract 1 from N until 1:1 is reached.
An important use of normal form ratios is to tell if a ratio is harmonic or not.
Any harmonic ratio will have a normal form of 1:N, and any other normal form ratio will be inharmonic.
For example, 2:7 is in normal form because <span class="math inline">\(M \ge 2C\)</span>, but it is not 1:N, so it is inharmonic.
An extended table of interesting ratios has been developed by <span class="citation">Barry Truax<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;span&gt;“Organizational Techniques for c:m Ratios in Frequency Modulation,”&lt;/span&gt; &lt;em&gt;Computer Music Journal&lt;/em&gt; 1, no. 4 (1977): 39–45, &lt;a href="http://www.jstor.org/stable/40731299" role="doc-biblioref"&gt;http://www.jstor.org/stable/40731299&lt;/a&gt;.&lt;/p&gt;'><sup>88</sup></a></span>.</p>
<p>Keyboard tracking with FM requires no additional effort relative to AM/RM.
Even though the modulation index, <span class="math inline">\(\Delta F/M_f\)</span>, depends on the frequency of the modulator, if we send the same V/Oct to modulator and carrier, the numerator and denominator of the modulation index will change by the same amount so the modulation index overall will not change.
Thus timbre will remain constant across the keyboard using the same approach to keyboard tracking as AM/RM.</p>
<p>The discussion to this point has focused on basic FM.
Even basic FM is fairly nuanced and complex, which explains why FM was first properly implemented digitally.
More advanced digital applications of FM involve modulators modulating other modulators, sometimes with feedback loops (so modulators are modulating themselves).
These advanced digital algorithms are typically defined using <a href="https://www.soundonsound.com/techniques/more-frequency-modulation#para5">operators</a>, where each operator is an oscillator, VCA, and envelope, as shown in Figure <a href="complex-generators.html#fig:two-op-fm">11.13</a>.
For reference, the DX7 uses six operators - the equivalent of 18 modules!
While the number of modules required to implement advanced FM algorithms in analogue may sometimes be impractical, understanding the correspondence between operators and modules will help you import ideas from digital FM into analogue.</p>

<div class="figure">
<span style="display:block;" id="fig:two-op-fm"></span>
<img src="images/2op_FM.svg.png" alt="Two operator FM. Image © Clusternote/CC-BY-SA-3.0." width="100%"><p class="caption">
Figure 11.13: Two operator FM. Image <a href="https://commons.wikimedia.org/wiki/File:2op_FM.svg">© Clusternote/CC-BY-SA-3.0</a>.
</p>
</div>
<p>Summary of true FM:</p>
<ul>
<li>The FM modulation index changes timbre, becoming more bright with higher index</li>
<li>FM sidebands reflect off zero and interfere with partials in complex ways, creating a variety of sounds</li>
<li>C:M ratios broadly define FM harmonic structure, and some C:M ratios are inharmonic</li>
</ul>
</div>
<div id="analogue-exponential-frequency-modulation" class="section level3" number="11.2.2">
<h3>
<span class="header-section-number">11.2.2</span> Analogue exponential frequency modulation<a class="anchor" aria-label="anchor" href="#analogue-exponential-frequency-modulation"><i class="fas fa-link"></i></a>
</h3>
<p>Although frequency modulation has been traced back as far as the 1940s,<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Bode, &lt;span&gt;“History of Electronic Sound Modification.”&lt;/span&gt;&lt;/p&gt;"><sup>89</sup></a></span> exponential frequency modulation (EFM) seems most strongly associated with the modular synthesizers after the 1960s when Robert Moog <a href="https://en.wikipedia.org/wiki/Moog_synthesizer">advanced the exponential volt per octave standard</a>.
In EFM, the output is moved an <strong>equal musical interval</strong> around the carrier’s default value.
For example, suppose a <span class="math inline">\(\pm1 V\)</span> modulation signal goes into a 400 Hz carrier’s FM input.
Then the first pair of sidebands will be 200 Hz and 800 Hz, or half and double the carrier frequency, respectively.
Since the output spends more time above 400 Hz than below it, the perceived pitch is shifted above 400 Hz.
The EFM pitch shift increases as the modulation index increases<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Bernard A. Hutchins Jr., &lt;span&gt;“The Frequency Modulation Spectrum of an Exponential Voltage-Controlled Oscillator,”&lt;/span&gt; &lt;em&gt;Journal of the Audio Engineering Society&lt;/em&gt; 23, no. 3 (1975): 200–206, &lt;a href="http://www.aes.org/e-lib/browse.cfm?elib=2700" role="doc-biblioref"&gt;http://www.aes.org/e-lib/browse.cfm?elib=2700&lt;/a&gt;.&lt;/p&gt;'><sup>90</sup></a></span> and
is very problematic for staying in tune with other instruments.
Workarounds to the pitch shift problem for EFM include playing with other pitched instruments over a narrow frequency range where the shift is negligible, not playing with other pitched instruments at all, and using EFM for percussion only.</p>
<p>The effect of modulating by an equal musical interval goes beyond pitch shift.
As the EFM modulation index increases and the sidebands grow, they become increasingly asymmetric, which breaks the normal FM harmonic ratios.<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Hutchins.&lt;/p&gt;"><sup>91</sup></a></span>
Recall that normal FM harmonic ratios are heavily dependent on the property of reflecting off zero.
In EFM, partials rarely reflect off zero because the output frequency can never reach zero<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;If we keep halving modulator and carrier frequencies, they will get small but not reach zero.&lt;/p&gt;"><sup>92</sup></a> and the overall pitch shift pulls the lower sideband away from zero.
Thus the partials mostly don’t reflect off zero, and the normal harmonic ratios are no longer valid.
In practice this means that it is difficult to get a stable output that is strongly harmonic as the modulation index increases, in addition to the pitch shift problem.</p>
<p>Despite these challenges, EFM has a history in electronic music and has been widely used for percussive and inharmonic sounds.
Let’s build up some patches to explore EFM, starting with a basic patch to investigate the sidebands and pitch shift.
Try simple EFM with sine waves using the button in Figure <a href="complex-generators.html#fig:efm-example">11.14</a> and note the effect of the modulation index on sidebands, pitch shift, and the harmonicity of the timbre.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setefm_exampleIframe('https://cardinal.olney.ai?patchurl=rm-example.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#efm_example">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="efm_example" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="efm_exampleLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="efm_exampleLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Remove feidah and add Host audio&lt;/li&gt;
&lt;li&gt;Connect the modulator out to the carrier FM in&lt;/li&gt;
&lt;li&gt;Connect the carrier out to Scope in 1 and modulator out to Scope in 2&lt;/li&gt;
&lt;li&gt;Connect the carrier out to Host audio L&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a harmonic relationship, e.g. N:1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Turn up the FM carrier knob slightly. Mouse over the frequency peaks in Sassy. You should see one for the modulator, one for the carrier, and two for sidebands. Check their values against the sideband formula with exponential modulation (i.e. half and double C +/- M)&lt;/li&gt;
&lt;li&gt;Slowly turn up the carrier FM knob. This will increase the modulation index. Observe the changes in both the spectrum and the pitch of the sound. At what modulation index does the pitch seem to noticably change? Does the sound become inharmonic at a different time or the same time?&lt;/li&gt;
&lt;li&gt;Change the carrier FM knob down to a low but not zero level. Now increase the waveshape knob on the modulator and note the change in pitch. This is because the modulation index is based on the highest frequency component of the modulator, so when you use a waveshape with higher harmonics, the modulation index will also change.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/efm-example.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Remove feidah and add Host audio&lt;/li&gt;
&lt;li&gt;Connect the modulator out to the carrier FM in&lt;/li&gt;
&lt;li&gt;Connect the carrier out to Scope in 1 and modulator out to Scope in 2&lt;/li&gt;
&lt;li&gt;Connect the carrier out to Host audio L&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a harmonic relationship, e.g. N:1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Turn up the FM carrier knob slightly. Mouse over the frequency peaks in Sassy. You should see one for the modulator, one for the carrier, and two for sidebands. Check their values against the sideband formula with exponential modulation (i.e. half and double C +/- M)&lt;/li&gt;
&lt;li&gt;Slowly turn up the carrier FM knob. This will increase the modulation index. Observe the changes in both the spectrum and the pitch of the sound. At what modulation index does the pitch seem to noticably change? Does the sound become inharmonic at a different time or the same time?&lt;/li&gt;
&lt;li&gt;Change the carrier FM knob down to a low but not zero level. Now increase the waveshape knob on the modulator and note the change in pitch. This is because the modulation index is based on the highest frequency component of the modulator, so when you use a waveshape with higher harmonics, the modulation index will also change.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/efm-example.png'&gt;">Solution</button>
        <button type="button" onclick="setefm_exampleIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="efm_example-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setefm_exampleIframe(url){
  var efm_exampleIframe = document.getElementById("efm_example-iframe");
  efm_exampleIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:efm-example"></span>
<p class="caption">
Figure 11.14: <a href="https://cardinal.olney.ai">Virtual modular</a> for exponential frequency modulation illustrating pitch shift and inharmonicity with increasing modulation index.
</p>
</div>
<p>As you can see from the patch in Figure <a href="complex-generators.html#fig:efm-example">11.14</a>, increasing the modulation index very quickly shifts the pitch up and makes the sound less harmonic.
To my ears the inharmonic aspect is essentially immediate and the pitch shift is noticeable around 10%.
Similarly, changing the waveshape of the modulator from sine to anything else creates a pitch shift because the modulation index is based on the highest frequency component of <span class="math inline">\(M_f\)</span>.</p>
<p>We can use mathematical thinking to highlight what EFM is doing and how it diverges from true FM.
Recall that a 1:1 ratio means that the carrier is the fundamental of a harmonic series with all harmonics.
What will happen in EFM if we use a 1:1 ratio?
Try extending the last patch to add keyboard tracking using the button in Figure <a href="complex-generators.html#fig:efm-keyboard-frequency-tracking">11.15</a>.
While keyboard tracking isn’t strictly necessary for this demonstration, it makes it more fun and sets up comparisons with other forms of FM.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setefm_keyboard_frequency_trackingIframe('https://cardinal.olney.ai?patchurl=efm-example.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#efm_keyboard_frequency_tracking">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="efm_keyboard_frequency_tracking" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="efm_keyboard_frequency_trackingLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="efm_keyboard_frequency_trackingLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Move the VCOs to the upper row&lt;/li&gt;
&lt;li&gt;Add 12 key to the lower row and connect its CV out to the modulator and carrier V/Oct&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a 1:1 relationship, with both at 800 Hz&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Adjust FM knob and note the change in timbre&lt;/li&gt;
&lt;li&gt;Choose a timbre with few enough sidebands that you can easily count them, then play up the keyboard and note if the number changes and sounds changes. Now change the keyboard octave up by 2 and play across the keyboard again. Notice how the timbre remains the same, as expected&lt;/li&gt;
&lt;li&gt;Take the FM knob back down to zero, set the 12 key octave to 4, and press the leftmost key (which sends 0 volts)&lt;/li&gt;
&lt;li&gt;The scope should show a peak at 800 Hz&lt;/li&gt;
&lt;li&gt;Increase the scope and remember you should NOT see any partials below 800 Hz in true FM, but one appears almost immediately around 5% FM&lt;/li&gt;
&lt;li&gt;As you continue to move the knob, that rogue harmonic moves up, as does the carrier, and more rogue harmonics appear &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Add feidah between the VCOs and an LFO to the bottom row &lt;/li&gt;
&lt;li&gt;We want the CV in of Velo to add to Level, but they multiply by default. Right click 
&lt;li&gt;Connect the modulator out to feidah in&lt;/li&gt;
&lt;li&gt;Connect feidah out to carrier FM in and turn both the feidah level and FM knob to fully open &lt;/li&gt;
&lt;li&gt;Connect the LFO triangel out to the feidah vca in and set the LFO frequency to .1 or less&lt;/li&gt;
&lt;li&gt;Notice the pitch shift we expect from EFM but also the corresponding change in harmonics, with the rogue harmonics appearing below the carrier frequency and all partials moving up. This illustrates the massive pitch stability problem for EFM when the modulation index changes: the fundamental is being supplanted by rogue harmonics and the spectrum is being shifted at the same time&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/efm-keyboard-frequency-tracking.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Move the VCOs to the upper row&lt;/li&gt;
&lt;li&gt;Add 12 key to the lower row and connect its CV out to the modulator and carrier V/Oct&lt;/li&gt;
&lt;li&gt;Set the oscillators to have a 1:1 relationship, with both at 800 Hz&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Adjust FM knob and note the change in timbre&lt;/li&gt;
&lt;li&gt;Choose a timbre with few enough sidebands that you can easily count them, then play up the keyboard and note if the number changes and sounds changes. Now change the keyboard octave up by 2 and play across the keyboard again. Notice how the timbre remains the same, as expected&lt;/li&gt;
&lt;li&gt;Take the FM knob back down to zero, set the 12 key octave to 4, and press the leftmost key (which sends 0 volts)&lt;/li&gt;
&lt;li&gt;The scope should show a peak at 800 Hz&lt;/li&gt;
&lt;li&gt;Increase the scope and remember you should NOT see any partials below 800 Hz in true FM, but one appears almost immediately around 5% FM&lt;/li&gt;
&lt;li&gt;As you continue to move the knob, that rogue harmonic moves up, as does the carrier, and more rogue harmonics appear &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Add feidah between the VCOs and an LFO to the bottom row &lt;/li&gt;
&lt;li&gt;We want the CV in of Velo to add to Level, but they multiply by default. Right click 
&lt;li&gt;Connect the modulator out to feidah in&lt;/li&gt;
&lt;li&gt;Connect feidah out to carrier FM in and turn both the feidah level and FM knob to fully open &lt;/li&gt;
&lt;li&gt;Connect the LFO triangel out to the feidah vca in and set the LFO frequency to .1 or less&lt;/li&gt;
&lt;li&gt;Notice the pitch shift we expect from EFM but also the corresponding change in harmonics, with the rogue harmonics appearing below the carrier frequency and all partials moving up. This illustrates the massive pitch stability problem for EFM when the modulation index changes: the fundamental is being supplanted by rogue harmonics and the spectrum is being shifted at the same time&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/efm-keyboard-frequency-tracking.png'&gt;">Solution</button>
        <button type="button" onclick="setefm_keyboard_frequency_trackingIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="efm_keyboard_frequency_tracking-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setefm_keyboard_frequency_trackingIframe(url){
  var efm_keyboard_frequency_trackingIframe = document.getElementById("efm_keyboard_frequency_tracking-iframe");
  efm_keyboard_frequency_trackingIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:efm-keyboard-frequency-tracking"></span>
<p class="caption">
Figure 11.15: <a href="https://cardinal.olney.ai">Virtual modular</a> for for exponential frequency modulation with keyboard tracking.
</p>
</div>
<p>The patch in Figure <a href="complex-generators.html#fig:efm-keyboard-frequency-tracking">11.15</a> demonstrates good EFM keyboard tracking for a fixed modulation index, as expected.
However, the patch also demonstrates how EFM, even using a small modulation index, diverges from true FM.
Not only do we find rogue harmonics below the fundamental, which should not happen with a 1:1 ratio, but we also see the a broad shift in the spectrum as the modulation index is modulated by an LFO, which badly affects EFM’s pitch stability during modulation index changes.
These imperfections of EFM give it an interesting sound, so as previously stated, these problems may not be problems depending on the musical goal.
Neither staying in tune with other instruments nor dynamically changing the modulation index are necessary in every situation.</p>
<p>In addition to its distinctive pitched sound, EFM works quite well in percussive voices.
The kick drum patch in Section <a href="designing-a-kick-drum.html#improving-our-understanding-of-the-problem">8.3.1</a> actually used FM in the sense of modulating the V/Oct of a sine wave, albeit for a single-cycle envelope.
As a more interesting example, we can use envelope to control both overall sound and the modulation index to create a bell like sound.
Try extending the last patch to with an envelope to create a bell sound using the button in Figure <a href="complex-generators.html#fig:efm-keyboard-bell">11.16</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setefm_keyboard_bellIframe('https://cardinal.olney.ai?patchurl=efm-keyboard-frequency-tracking.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#efm_keyboard_bell">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="efm_keyboard_bell" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="efm_keyboard_bellLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="efm_keyboard_bellLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add ADSR and QuadVCA/Mixer to the top row on the right&lt;/li&gt;
&lt;li&gt;Connect carrier out to QuadVCA/Mixer input 1&lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to Host audio L&lt;/li&gt;
&lt;li&gt;Connect ADSR out to  QuadVCA/Mixer CV input 1 and feidah VCA in&lt;/li&gt;
&lt;li&gt;Connect 12 key out to ADSR gate in&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Adjust ADSR to get a bell like timbre with feidah level set at 25%&lt;/li&gt;
&lt;li&gt;Once the ADSR is set, increase feidah level to get a better timbre&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/efm-keyboard-bell.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add ADSR and QuadVCA/Mixer to the top row on the right&lt;/li&gt;
&lt;li&gt;Connect carrier out to QuadVCA/Mixer input 1&lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to Host audio L&lt;/li&gt;
&lt;li&gt;Connect ADSR out to  QuadVCA/Mixer CV input 1 and feidah VCA in&lt;/li&gt;
&lt;li&gt;Connect 12 key out to ADSR gate in&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Adjust ADSR to get a bell like timbre with feidah level set at 25%&lt;/li&gt;
&lt;li&gt;Once the ADSR is set, increase feidah level to get a better timbre&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/efm-keyboard-bell.png'&gt;">Solution</button>
        <button type="button" onclick="setefm_keyboard_bellIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="efm_keyboard_bell-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setefm_keyboard_bellIframe(url){
  var efm_keyboard_bellIframe = document.getElementById("efm_keyboard_bell-iframe");
  efm_keyboard_bellIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:efm-keyboard-bell"></span>
<p class="caption">
Figure 11.16: <a href="https://cardinal.olney.ai">Virtual modular</a> for for exponential frequency modulation with keyboard tracking.
</p>
</div>
<!-- **template** -->
<!-- - How are sideband frequency and amplitude calculated -->
<!-- - How does modulation index affect these -->
<!-- - What happens to partials that cross zero? -->
<!-- - How is result perceived -->
<!-- - How can we make it harmonic -->
<!-- - Ratios C:M -->
<!-- - Will harmonics track keyboard or not -->
</div>
<div id="analogue-linear-frequency-modulation" class="section level3" number="11.2.3">
<h3>
<span class="header-section-number">11.2.3</span> Analogue linear frequency modulation<a class="anchor" aria-label="anchor" href="#analogue-linear-frequency-modulation"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="analogue-through-zero-frequency-modulation" class="section level3" number="11.2.4">
<h3>
<span class="header-section-number">11.2.4</span> Analogue through-zero frequency modulation<a class="anchor" aria-label="anchor" href="#analogue-through-zero-frequency-modulation"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="phase-modulation" class="section level3" number="11.2.5">
<h3>
<span class="header-section-number">11.2.5</span> Phase modulation<a class="anchor" aria-label="anchor" href="#phase-modulation"><i class="fas fa-link"></i></a>
</h3>
<!-- which are related quantities as show in Figure \@ref(fig:freq-phase). -->
<!-- If we define frequency as the time it take the pendulum to return to vertical position, we can similarly define phase as the angle between the pendulum body and the vertical. -->
<!-- Unfortunately, explaining frequency modulation is complicated by its long history and different implementations in the digital and analogue domains.  -->
<!-- <a href="https://upload.wikimedia.org/wikipedia/commons/0/02/PWM_duty_cycle_with_label.gif">Animation</a> of a pulse wave across a range of duty cycles. Note that 100% and 0% it ceases to be a wave. Image <a href="https://commons.wikimedia.org/wiki/File:PWM_duty_cycle_with_label.gif">public domain</a>. [Animation](https://upload.wikimedia.org/wikipedia/commons/6/6f/Pendulum-no-text.gif?20201216081225) of a pendulum to illustrate the connection between frequency and phase. Image ©  [Ideophagous/CC-BY-SA-4.0 ](https://commons.wikimedia.org/wiki/File:Pendulum-no-text.gif). -->
<!-- ```{r pulse-wave, out.width="40%", fig.cap="<a href="https://upload.wikimedia.org/wikipedia/commons/0/02/PWM_duty_cycle_with_label.gif">Animation</a> of a pulse wave across a range of duty cycles. Note that 100% and 0% it ceases to be a wave. Image <a href="https://commons.wikimedia.org/wiki/File:PWM_duty_cycle_with_label.gif">public domain</a>.", echo=F} -->
<!-- embed_linked_media("https://upload.wikimedia.org/wikipedia/commons/0/02/PWM_duty_cycle_with_label.gif") -->
<!-- ``` -->
<!-- Remaining plan -->
<!--    Generators   -->
<!--        PWM -->
<!--        FM/AM -->
<!--        Ring modulation -->
<!-- audio rate modulation into resonant filter? -->
<!--        Vocoders -->
<!--        Random sampling -->
<!--    Modifiers    -->
<!--        ~~LFO~~ -->
<!--        ~~Sample and hold~~ -->
<!--        Slew -->
<!--        Wave-folding -->
<!--        Attenuators, inverters, and attenuverters -->
<!--        Quantizers -->
<!--        ~~Switches~~ -->
<!--        ~~Logic~~ -->
<!-- Sound design ideas -->
<!-- Cymbal PUSH UNTIL AFTER RING MOD -->
<!-- Maybe use these? -->
<!-- keyboard filter tracking or notes would disappear; filtering sine wave example -->
<!-- Growl: Low frequency sine wave modulation of the filter cut-off frequency -->
<!-- wah wah is LFO on LPF cutoff freq -->
<!-- Actual -->
<!--     4 Basic Modeling Concepts -->
<!--     4.1 Modules are the model elements -->
<!--     4.2 Signals are how the model elements interact -->
<!--     4.3 Signals are interpreted by modules -->
<!--     4.4 Pulling it all together -->
<!--         4.4.1 Drone -->
<!--         4.4.2 Using an oscilloscope -->
<!--         4.4.3 Controlling pitch -->
<!--         4.4.4 Controlling note duration (on/off volume) -->
<!--         4.4.5 Controlling note dynamics (volume during note) -->
<!--     4.5 Moving forward -->
<!-- 5 Controllers -->
<!-- 5.1 Clocks -->
<!--     5.1.1 Clock under a scope -->
<!--     5.1.2 Clock as a generator -->
<!-- 5.2 Sequencers -->
<!--     5.2.1 Clocks as sequencers -->
<!--     5.2.2 Trigger sequencers -->
<!--     5.2.3 Control voltage sequencers -->
<!--     6 Generators -->
<!--     6.1 Chords -->
<!--     6.2 Chorus -->
<!--     6.3 Low frequency oscillators & uses -->
<!--         6.3.1 Pulse width modulation -->
<!--         6.3.2 Vibrato -->
<!--         6.3.3 Tremolo -->
<!--     6.4 Synchronization -->
<!--     6.5 Noise -->
<!--     6.6 Samplers -->
<!-- 7 Modifiers -->
<!-- 7.1 Effects -->
<!--     7.1.1 Delays -->
<!--     7.1.2 Reverb -->
<!--     7.1.3 Chorus -->
<!--     7.1.4 Flanger -->
<!--     7.1.5 Phaser -->
<!-- 7.2 Voltage controlled filters -->
<!--     7.2.1 Filters are imperfect -->
<!--     7.2.2 Filters change frequency and phase -->
<!--     7.2.3 Combining filters -->
<!--     7.2.4 Resonance -->
<!-- 8 Designing a Kick Drum -->
<!-- 8.1 Problem solving for sound synthesis -->
<!--     8.1.1 Understand the problem -->
<!--     8.1.2 Devise a plan -->
<!--     8.1.3 Carry out the plan (and replanning) -->
<!--     8.1.4 Evaluate the solution -->
<!-- 8.2 Reviewing previous kick drum patches -->
<!--     8.2.1 Sine with envelope -->
<!--     8.2.2 Sine with an envelope plus noise burst -->
<!-- 8.3 Alternative approaches -->
<!--     8.3.1 Improving our understanding of the problem -->
<!--     8.3.2 Devising new plans -->
<!--     8.3.3 Working backwards -->
<!-- 9 Eighties Lead & Chiptune -->
<!-- 9.1 Eighties Lead -->
<!--     9.1.1 Waveshape -->
<!--     9.1.2 Dynamics -->
<!-- 9.2 Chiptune -->
<!--     9.2.1 Triad arpeggio -->
<!--     9.2.2 LFO PWM -->
<!--     9.2.3 Secondary sequencer for transposition -->
<!--     9.2.4 Hats and kick -->
<!-- 10 Controllers -->
<!-- 10.1 Modifying gates -->
<!-- 10.2 Making gates with logic -->
<!-- 10.3 Adding/removing gates with probability -->
<!-- 10.4 Speed variable clocks using LFOs -->
<!-- 10.5 Euclidean rhythm -->
<!-- 10.6 Sequential switches -->

</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="complex-controllers.html"><span class="header-section-number">10</span> Controllers</a></div>
<div class="next"><a href="complex-modifiers.html"><span class="header-section-number">12</span> Modifiers</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#complex-generators"><span class="header-section-number">11</span> Generators</a></li>
<li>
<a class="nav-link" href="#modulating-amplitude"><span class="header-section-number">11.1</span> Modulating amplitude</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#amplitude-modulation"><span class="header-section-number">11.1.1</span> Amplitude modulation</a></li>
<li><a class="nav-link" href="#ring-modulation"><span class="header-section-number">11.1.2</span> Ring modulation</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#modulating-frequency"><span class="header-section-number">11.2</span> Modulating frequency</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#frequency-modulation"><span class="header-section-number">11.2.1</span> Frequency modulation</a></li>
<li><a class="nav-link" href="#analogue-exponential-frequency-modulation"><span class="header-section-number">11.2.2</span> Analogue exponential frequency modulation</a></li>
<li><a class="nav-link" href="#analogue-linear-frequency-modulation"><span class="header-section-number">11.2.3</span> Analogue linear frequency modulation</a></li>
<li><a class="nav-link" href="#analogue-through-zero-frequency-modulation"><span class="header-section-number">11.2.4</span> Analogue through-zero frequency modulation</a></li>
<li><a class="nav-link" href="#phase-modulation"><span class="header-section-number">11.2.5</span> Phase modulation</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/aolney/ct-modular-book/blob/master/11-com-mod-generators.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/aolney/ct-modular-book/edit/master/11-com-mod-generators.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Computational Thinking through Modular Sounds Synthesis</strong>" was written by Andrew M. Olney. It was last built on 2022-11-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
