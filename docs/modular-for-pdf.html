<!-- This shim largely matches the behavior of the website book-launched modal -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
    <meta name="author" content="Andrew M. Olney">
    <!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
   <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
  <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
  <script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
      
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    </style>

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="include/webex.css">
  </head>
  
  <body>
  <!-- Button trigger modal -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="" class="btn btn-primary" data-toggle="modal" data-target="#modular">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="modular" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="modularLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <button id="instructions" type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover"
        data-html="true" data-content=instructions_html>Instructions</button>
        <button id="solution" type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover"
        data-html="true" data-content=solution_html>Solution</button>
        <button type="button" onclick="setmodularIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>

      </div>
      <div class="modal-body">
        <iframe id="modular-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

const params = new Proxy(new URLSearchParams(window.location.search), {
  get: (searchParams, prop) => searchParams.get(prop),
});


let starter_file = params.starter;
$("#instructions").attr("data-content", params.instructions)
$("#solution").attr("data-content", params.solution)


// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setmodularIframe(url){
  var modularIframe = document.getElementById("modular-iframe");
  modularIframe.src = url;
};

//Set the initial ifram
setmodularIframe("https://cardinal.olney.ai/?patchurl=" + starter_file);


</script>
</body>
</html>

