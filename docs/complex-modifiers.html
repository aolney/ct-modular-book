<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 12 Modulating Modifiers | Computational Thinking through Modular Sound Synthesis</title>
<meta name="author" content="Andrew M. Olney">
<meta name="description" content="Modifying incoming audio and control signals was introduced in Chapter 7. The present chapter introduces new modules and extends earlier concepts in modifiers around the loose organizing theme of...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="Chapter 12 Modulating Modifiers | Computational Thinking through Modular Sound Synthesis">
<meta property="og:type" content="book">
<meta property="og:url" content="https://olney.ai/ct-modular-book/index.html/complex-modifiers.html">
<meta property="og:description" content="Modifying incoming audio and control signals was introduced in Chapter 7. The present chapter introduces new modules and extends earlier concepts in modifiers around the loose organizing theme of...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 12 Modulating Modifiers | Computational Thinking through Modular Sound Synthesis">
<meta name="twitter:description" content="Modifying incoming audio and control signals was introduced in Chapter 7. The present chapter introduces new modules and extends earlier concepts in modifiers around the loose organizing theme of...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="include/webex.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Computational Thinking through Modular Sound Synthesis</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Sound</li>
<li><a class="" href="physics-and-perception-of-sound.html"><span class="header-section-number">2</span> Physics and Perception of Sound</a></li>
<li><a class="" href="harmonic-and-inharmonic-sounds.html"><span class="header-section-number">3</span> Harmonic and Inharmonic Sounds</a></li>
<li class="book-part">Fundamental Techniques</li>
<li><a class="" href="basic-modeling-concepts.html"><span class="header-section-number">4</span> Basic Modeling Concepts</a></li>
<li><a class="" href="controllers.html"><span class="header-section-number">5</span> Controllers</a></li>
<li><a class="" href="generators.html"><span class="header-section-number">6</span> Generators</a></li>
<li><a class="" href="modifiers.html"><span class="header-section-number">7</span> Modifiers</a></li>
<li class="book-part">Sound Design 1</li>
<li><a class="" href="designing-a-kick-drum.html"><span class="header-section-number">8</span> Designing a Kick Drum</a></li>
<li><a class="" href="eighties-lead-chiptune.html"><span class="header-section-number">9</span> Eighties Lead &amp; Chiptune</a></li>
<li class="book-part">Advanced Techniques</li>
<li><a class="" href="complex-controllers.html"><span class="header-section-number">10</span> Modulating Controllers</a></li>
<li><a class="" href="complex-generators.html"><span class="header-section-number">11</span> Modulating Generators</a></li>
<li><a class="active" href="complex-modifiers.html"><span class="header-section-number">12</span> Modulating Modifiers</a></li>
<li class="book-part">Sound Design 2</li>
<li><a class="" href="tb-303.html"><span class="header-section-number">13</span> TB-303</a></li>
<li><a class="" href="krell.html"><span class="header-section-number">14</span> Krell</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/aolney/ct-modular-book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="complex-modifiers" class="section level1" number="12">
<h1>
<span class="header-section-number">12</span> Modulating Modifiers<a class="anchor" aria-label="anchor" href="#complex-modifiers"><i class="fas fa-link"></i></a>
</h1>
<p>Modifying incoming audio and control signals was introduced in Chapter <a href="modifiers.html#modifiers">7</a>.
The present chapter introduces new modules and extends earlier concepts in modifiers around the loose organizing theme of converting between earlier signals, e.g. from gates to envelopes.</p>
<div id="rectification-wavefolding-and-composition" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> Rectification, wavefolding, and composition<a class="anchor" aria-label="anchor" href="#rectification-wavefolding-and-composition"><i class="fas fa-link"></i></a>
</h2>
<p>As discussed in Chapter <a href="basic-modeling-concepts.html#basic-modeling-concepts">4</a>, signals are either unipolar or bipolar.
One way to make a bipolar signal unipolar is to add an offset to it, e.g. if a signal ranges from -5 to +5 V, then add 5 V to obtain a 0 to +10 V signal.
Another more interesting way to convert a bipolar signal to unipolar is to rectify the signal, as shown in Figure <a href="complex-modifiers.html#fig:rectification">12.1</a>.
Half-wave rectification simply removes the negative part of the signal by stopping the signal at zero, and staying at zero until the signal becomes positive again.
Full-wave rectification reflects the signal across the x-axis, i.e. takes the absolute value of the signal.
If you add a fully rectified signal to the original signal, you will get a half rectified signal because the negative portion of the original signal and the reflected portion of the fully rectified signal will cancel out.</p>

<div class="figure">
<span style="display:block;" id="fig:rectification"></span>
<img src="images/rectification.png" alt="Rectification of a sine wave using either half or full rectification. Image © Omegatron/CC-BY-SA-3.0." width="100%"><p class="caption">
Figure 12.1: <a href="https://upload.wikimedia.org/wikipedia/commons/0/08/Sine_curve_drawing_animation.gif">Rectification</a> of a sine wave using either half or full rectification. Image <a href="https://commons.wikimedia.org/wiki/File:Rectified_waves.png">© Omegatron/CC-BY-SA-3.0</a>.
</p>
</div>
<p>A variation of rectification is wavefolding.
In wavefolding, a comparator (see Section <a href="complex-controllers.html#addingremoving-gates-with-probability">10.3</a>) triggers reflection of the wave when it reaches an upper or lower threshold, as shown in Figure <a href="complex-modifiers.html#fig:wavefold-sine">12.2</a>.
Thus wavefolding is like rectification on parts of the signal that cross these boundaries, but a folding parameter allows the amplitude of the wave to increase until it reaches the opposing boundary, repeating the process.
Wavefolding does not affect the polarity of a signal.</p>

<div class="figure">
<span style="display:block;" id="fig:wavefold-sine"></span>
<img src="images/sine-wavefold-2.png" alt="Wavefolding (green) of a sine wave (purple). The fold parameter moves the top and bottom portions of the wave to their respective boundaries where they reflect (left). Further increase of the fold parameter causes them to reach the opposing boundary and reflect again (right), a repeatable process that creates additional folds." width="100%"><p class="caption">
Figure 12.2: Wavefolding (green) of a sine wave (purple). The fold parameter moves the top and bottom portions of the wave to their respective boundaries where they reflect (left). Further increase of the fold parameter causes them to reach the opposing boundary and reflect again (right), a repeatable process that creates additional folds.
</p>
</div>
<p>Rectification and wavefolding change harmonics and therefore timbre.
The best way to understand their effect on harmonics is to consider a triangle at full rectification.
As the bottom part of the triangle is reflected, the resulting wave is still a triangle wave, but at twice the frequency as before, e.g. a 200 Hz wave becomes a 400 Hz wave, and the signal is offset above zero.
For a triangle wave, wavefolding doesn't double frequency but instead triples it, e.g. a 200 Hz wave becomes a 600 Hz wave.
Tripling occurs because when a peak reflects, it creates two additional peaks in addition to itself.
Figure <a href="complex-modifiers.html#fig:triangle-rect-fold">12.3</a> illustrates these two cases.
The tripling behavior of wavefolding means that it will add all odd harmonics to a sine wave but not add harmonics to the other basic waveshapes, because they already have odd harmonics.
Instead, wavefolding will change the relative strengths of the harmonics, and as wavefolding increases it will put more energy into higher harmonics for a brighter sound.</p>

<div class="figure">
<span style="display:block;" id="fig:triangle-rect-fold"></span>
<img src="images/triangle-rect-fold.png" alt="Full wave rectification (left) and wavefolding (right) of a triangle wave. The wavefolded peaks that have just reached the boundary are circled." width="100%"><p class="caption">
Figure 12.3: Full wave rectification (left) and wavefolding (right) of a triangle wave. The wavefolded peaks that have just reached the boundary are circled.
</p>
</div>
<p>The square wave has unusual behavior for wavefolding and rectification that deserves special mention.
During wavefolding, the upper and lower parts of the square wave will move in opposite directions rather than fold as shown in Figures <a href="complex-modifiers.html#fig:wavefold-sine">12.2</a> and <a href="complex-modifiers.html#fig:triangle-rect-fold">12.3</a>.
As a consequence, there are moments where the two parts of the square wave meet at zero and result in a non-wave, somewhat comparable to amplitude modulation through wave folding.
Half rectification on a square wave turns it into an identical square wave, but at half amplitude and an offset.
Full rectification on a square wave turns it into just an offset, i.e. a constant voltage.
Because a constant voltage has zero frequency (0 Hz) it can be removed with a high pass filter - this is a good idea in most audio applications where constant voltages create noise.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;High pass filtering is a good idea when using clocks or clock dividers outputs as square waves for the same reason.&lt;/p&gt;"><sup>95</sup></a></p>
<p>The effects of rectification and wavefolding on the four basic wave shapes is summarized in Table <a href="complex-generators.html#tab:freq-ratio">11.1</a> with respect to the addition of harmonics, change in frequency, and change in amplitude.
In all cases, the amplitude of individual harmonics changes, leading to a change in timbre with respect to the original wave.
Sometimes these changes can be quite extreme.
For example, a saw wave at full rectification keeps all harmonics, but the strongest harmonics more closely match a triangle wave than a saw.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:freq-ratio">Table 11.1: </span> Addition of harmonics, change in frequency, and change in amplitude to the four basic waveshapes under wavefolding, half rectification, and full rectification. Note all three affect strength of harmonics and so timbre.</caption>
<colgroup>
<col width="11%">
<col width="16%">
<col width="32%">
<col width="39%">
</colgroup>
<thead><tr class="header">
<th>Wave</th>
<th>Wavefolding</th>
<th>Half rectification</th>
<th>Full rectification</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Sine</td>
<td>Odd harmonics</td>
<td>All harmonics</td>
<td>All harmonics at double frequency</td>
</tr>
<tr class="even">
<td>Triangle</td>
<td>-</td>
<td>All harmonics but every 4th</td>
<td>Double frequency</td>
</tr>
<tr class="odd">
<td>Square</td>
<td>-</td>
<td>Amplitude reduced by half</td>
<td>Offset voltage</td>
</tr>
<tr class="even">
<td>Saw</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table></div>
<p>Let's take a look at the change in harmonics resulting from wavefolding and rectification.
The best way to hear these is to step through with a sequential switch and use an LFO to drive the wavefolding.
Try creating this patch using the button in Figure <a href="complex-modifiers.html#fig:wavefold-rect-example">12.4</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setwavefold_rect_exampleIframe('https://cardinal.olney.ai?patchurl=empty.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#wavefold_rect_example">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="wavefold_rect_example" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="wavefold_rect_exampleLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="wavefold_rect_exampleLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add WT VCO, Utilites, Folding, LFO, Triggers MKIII, 8:1, filtah, Scope, Host audio, and Sassy&lt;/li&gt;
&lt;li&gt;Connect WT VCO out to Utilities in, Folding in, 8:1 input 1, Scope input 2, and Scope trigger in&lt;/li&gt;
&lt;li&gt;Connect Utilities half rectify out to 8:1 input 3 and full rectify out to 8:1 input 4&lt;/li&gt;
&lt;li&gt;Connect LFO triangle out to Folding depth in and change the depth attenuverter (the small knob) to 9 o'clock, a slight amount&lt;/li&gt;
&lt;li&gt;Connect Folding out to 8:1 input 2&lt;/li&gt;
&lt;li&gt;Connect Triggers MKIII out to 8:1 clock&lt;/li&gt;
&lt;li&gt;Set 8:1 steps to 4 and connect out to filtah input&lt;/li&gt;
&lt;li&gt;Set filtah type switch to high pass and cutoff to the lowest level (lets everything above zero frequency through)and connect filtah out to Scope in 1&lt;/li&gt;
&lt;li&gt;Connect Scope out 1 to Host audio L and Sassy input 1&lt;/li&gt;
&lt;li&gt;Adjust Scope time and Sassy levels and FFT resolution to the highest level&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;Starting with sine, cycle through the 4 wave options using the button and note the change in sound, the image on the scope, and the change in harmonics. Mouse over the harmonics to check if they are all, odd, or even. You may prefer to set the WT VCO frequency to a round number, e.g. 200 Hz, and set the LFO to a slow rate, e.g. .2 Hz in order to make comparisons easier&lt;/li&gt;
&lt;li&gt;Repeat the above for the other three waveshapes&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/audibleutilities-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/animatedfolding-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/filtah-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/wavefold-rect-example.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add WT VCO, Utilites, Folding, LFO, Triggers MKIII, 8:1, filtah, Scope, Host audio, and Sassy&lt;/li&gt;
&lt;li&gt;Connect WT VCO out to Utilities in, Folding in, 8:1 input 1, Scope input 2, and Scope trigger in&lt;/li&gt;
&lt;li&gt;Connect Utilities half rectify out to 8:1 input 3 and full rectify out to 8:1 input 4&lt;/li&gt;
&lt;li&gt;Connect LFO triangle out to Folding depth in and change the depth attenuverter (the small knob) to 9 o'clock, a slight amount&lt;/li&gt;
&lt;li&gt;Connect Folding out to 8:1 input 2&lt;/li&gt;
&lt;li&gt;Connect Triggers MKIII out to 8:1 clock&lt;/li&gt;
&lt;li&gt;Set 8:1 steps to 4 and connect out to filtah input&lt;/li&gt;
&lt;li&gt;Set filtah type switch to high pass and cutoff to the lowest level (lets everything above zero frequency through)and connect filtah out to Scope in 1&lt;/li&gt;
&lt;li&gt;Connect Scope out 1 to Host audio L and Sassy input 1&lt;/li&gt;
&lt;li&gt;Adjust Scope time and Sassy levels and FFT resolution to the highest level&lt;/li&gt;
&lt;li&gt;Run the patch and observe the following&lt;ul&gt;
&lt;li&gt;Starting with sine, cycle through the 4 wave options using the button and note the change in sound, the image on the scope, and the change in harmonics. Mouse over the harmonics to check if they are all, odd, or even. You may prefer to set the WT VCO frequency to a round number, e.g. 200 Hz, and set the LFO to a slow rate, e.g. .2 Hz in order to make comparisons easier&lt;/li&gt;
&lt;li&gt;Repeat the above for the other three waveshapes&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/audibleutilities-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/animatedfolding-solo.png'&gt;
&lt;img class='rack-image' src='images/solo-modules/filtah-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/wavefold-rect-example.png'&gt;">Solution</button>
        <button type="button" onclick="setwavefold_rect_exampleIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="wavefold_rect_example-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setwavefold_rect_exampleIframe(url){
  var wavefold_rect_exampleIframe = document.getElementById("wavefold_rect_example-iframe");
  wavefold_rect_exampleIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:wavefold-rect-example"></span>
<p class="caption">
Figure 12.4: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=empty.vcv&amp;solution=%3cimg+class%3d%27rack-image%27+src%3d%27images%2fpatch-solutions%2fwavefold-rect-example.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eAdd+WT+VCO%2c+Utilites%2c+Folding%2c+LFO%2c+Triggers+MKIII%2c+8%3a1%2c+filtah%2c+Scope%2c+Host+audio%2c+and+Sassy%3c%2fli%3e%0a%3cli%3eConnect+WT+VCO+out+to+Utilities+in%2c+Folding+in%2c+8%3a1+input+1%2c+Scope+input+2%2c+and+Scope+trigger+in%3c%2fli%3e%0a%3cli%3eConnect+Utilities+half+rectify+out+to+8%3a1+input+3+and+full+rectify+out+to+8%3a1+input+4%3c%2fli%3e%0a%3cli%3eConnect+LFO+triangle+out+to+Folding+depth+in+and+change+the+depth+attenuverter+%28the+small+knob%29+to+9+o%27clock%2c+a+slight+amount%3c%2fli%3e%0a%3cli%3eConnect+Folding+out+to+8%3a1+input+2%3c%2fli%3e%0a%3cli%3eConnect+Triggers+MKIII+out+to+8%3a1+clock%3c%2fli%3e%0a%3cli%3eSet+8%3a1+steps+to+4+and+connect+out+to+filtah+input%3c%2fli%3e%0a%3cli%3eSet+filtah+type+switch+to+high+pass+and+cutoff+to+the+lowest+level+%28lets+everything+above+zero+frequency+through%29and+connect+filtah+out+to+Scope+in+1%3c%2fli%3e%0a%3cli%3eConnect+Scope+out+1+to+Host+audio+L+and+Sassy+input+1%3c%2fli%3e%0a%3cli%3eAdjust+Scope+time+and+Sassy+levels+and+FFT+resolution+to+the+highest+level%3c%2fli%3e%0a%3cli%3eRun+the+patch+and+observe+the+following%3cul%3e%0a%3cli%3eStarting+with+sine%2c+cycle+through+the+4+wave+options+using+the+button+and+note+the+change+in+sound%2c+the+image+on+the+scope%2c+and+the+change+in+harmonics.+Mouse+over+the+harmonics+to+check+if+they+are+all%2c+odd%2c+or+even.+You+may+prefer+to+set+the+WT+VCO+frequency+to+a+round+number%2c+e.g.+200+Hz%2c+and+set+the+LFO+to+a+slow+rate%2c+e.g.+.2+Hz+in+order+to+make+comparisons+easier%3c%2fli%3e%0a%3cli%3eRepeat+the+above+for+the+other+three+waveshapes%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a%3cdiv+class%3d%27d-flex+flex-row+justify-content-around%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2faudibleutilities-solo.png%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2fanimatedfolding-solo.png%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2ffiltah-solo.png%27%3e%0a%3c%2fdiv%3e%0a">Virtual modular</a> for contrasting the effect of wavefolding and rectification on the four basic waveshapes.
</p>
</div>
<p>Rectification has multiple uses besides changing harmonics.
One obvious use is making a bipolar control signal unipolar (e.g. to drive a VCA).
Another interesting use is to use rectification to create composite waveshapes by combining the top part of one waveshape with the bottom of another.
This is relatively simple to do by fully rectifying two waveshapes and inverting one to become the bottom portion of the wave.
It's slightly trickier to align the top and bottom portions, but it's possible to do so using a module that allows specification of phase offsets.
Figure <a href="complex-modifiers.html#fig:fraken-rect">12.5</a> shows an example of waveshape composition using the top portion of a sine wave and the bottom portion of a square wave.
By blending parts of different waves, you can achieve an intermediate sound, e.g. a slightly more mellow square wave.</p>

<div class="figure">
<span style="display:block;" id="fig:fraken-rect"></span>
<img src="images/fraken-rect.png" alt="Upper sine wave and lower square wave portions cut using rectification and aligned with a phase offset (left). The final wave is high pass filtered to remove the voltage offset (right)." width="100%"><p class="caption">
Figure 12.5: Upper sine wave and lower square wave portions cut using rectification and aligned with a phase offset (left). The final wave is high pass filtered to remove the voltage offset (right).
</p>
</div>
<p>Try creating a new waveshape through rectification using the button in Figure <a href="complex-modifiers.html#fig:franken-rect">12.6</a>.
This method would also allow you to perform operations on just one part of the signal if desired, e.g. waveshaping on just the top half.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setfranken_rectIframe('https://cardinal.olney.ai?patchurl=wavefold-rect-example.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#franken_rect">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="franken_rect" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="franken_rectLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="franken_rectLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Delete Folding, LFO, Triggers, and 8:1&lt;/li&gt;
&lt;li&gt;Add 12 key, BoggAudio Sine, another utilities, QuadVCA/Mixer, and Bogg Audio Offset. Offset is an attenuator that will let us invert one of the waves&lt;/li&gt;
&lt;li&gt;Connect 12key CV out to WT VCO V/Oct and Sine V/Oct &lt;/li&gt;
&lt;li&gt;Set WT VCO frequency and Sine frequency to match, e.g. 200 Hz&lt;/li&gt;
&lt;li&gt;Connect WT VCO out to Sine sync. This will help us keep the phase relationship between them constant &lt;/li&gt;
&lt;li&gt;Connect the WT VCO's Utilities half rectify out to QuadVCA/Mixer input 1 &lt;/li&gt;
&lt;li&gt;Connect Sine out to the other Utilities input, and connect the half rectify out to QuadVCA/Mixer input 2&lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to filtah&lt;/li&gt;
&lt;li&gt;Connect filtah out to Scope in 1, Host Audio L, and Sassy input&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Move the Offset scale knob to -1. This will invert the Sine signal&lt;/li&gt;
&lt;li&gt;Adjust the Sine phase offset. At 180 it should be correctly aligned&lt;/li&gt;
&lt;li&gt;Use the WT VCO position knob to change waveshapes, play the keyboard and check the scopes to see and hear the sound. Right click Sine to select non-sine waveshapes&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/boggaudiooffset-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/franken-rect.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Delete Folding, LFO, Triggers, and 8:1&lt;/li&gt;
&lt;li&gt;Add 12 key, BoggAudio Sine, another utilities, QuadVCA/Mixer, and Bogg Audio Offset. Offset is an attenuator that will let us invert one of the waves&lt;/li&gt;
&lt;li&gt;Connect 12key CV out to WT VCO V/Oct and Sine V/Oct &lt;/li&gt;
&lt;li&gt;Set WT VCO frequency and Sine frequency to match, e.g. 200 Hz&lt;/li&gt;
&lt;li&gt;Connect WT VCO out to Sine sync. This will help us keep the phase relationship between them constant &lt;/li&gt;
&lt;li&gt;Connect the WT VCO's Utilities half rectify out to QuadVCA/Mixer input 1 &lt;/li&gt;
&lt;li&gt;Connect Sine out to the other Utilities input, and connect the half rectify out to QuadVCA/Mixer input 2&lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to filtah&lt;/li&gt;
&lt;li&gt;Connect filtah out to Scope in 1, Host Audio L, and Sassy input&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Move the Offset scale knob to -1. This will invert the Sine signal&lt;/li&gt;
&lt;li&gt;Adjust the Sine phase offset. At 180 it should be correctly aligned&lt;/li&gt;
&lt;li&gt;Use the WT VCO position knob to change waveshapes, play the keyboard and check the scopes to see and hear the sound. Right click Sine to select non-sine waveshapes&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/boggaudiooffset-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/franken-rect.png'&gt;">Solution</button>
        <button type="button" onclick="setfranken_rectIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="franken_rect-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setfranken_rectIframe(url){
  var franken_rectIframe = document.getElementById("franken_rect-iframe");
  franken_rectIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:franken-rect"></span>
<p class="caption">
Figure 12.6: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=wavefold-rect-example.vcv&amp;solution=%3cimg+class%3d%27rack-image-6u%27+src%3d%27images%2fpatch-solutions%2ffranken-rect.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eDelete+Folding%2c+LFO%2c+Triggers%2c+and+8%3a1%3c%2fli%3e%0a%3cli%3eAdd+12+key%2c+BoggAudio+Sine%2c+another+utilities%2c+QuadVCA%2fMixer%2c+and+Bogg+Audio+Offset.+Offset+is+an+attenuator+that+will+let+us+invert+one+of+the+waves%3c%2fli%3e%0a%3cli%3eConnect+12key+CV+out+to+WT+VCO+V%2fOct+and+Sine+V%2fOct+%3c%2fli%3e%0a%3cli%3eSet+WT+VCO+frequency+and+Sine+frequency+to+match%2c+e.g.+200+Hz%3c%2fli%3e%0a%3cli%3eConnect+WT+VCO+out+to+Sine+sync.+This+will+help+us+keep+the+phase+relationship+between+them+constant+%3c%2fli%3e%0a%3cli%3eConnect+the+WT+VCO%27s+Utilities+half+rectify+out+to+QuadVCA%2fMixer+input+1+%3c%2fli%3e%0a%3cli%3eConnect+Sine+out+to+the+other+Utilities+input%2c+and+connect+the+half+rectify+out+to+QuadVCA%2fMixer+input+2%3c%2fli%3e%0a%3cli%3eConnect+QuadVCA%2fMixer+mix+out+to+filtah%3c%2fli%3e%0a%3cli%3eConnect+filtah+out+to+Scope+in+1%2c+Host+Audio+L%2c+and+Sassy+input%3c%2fli%3e%0a%3cli%3eTry+the+following+and+note+the+differences+in+the+sound+and+scopes+%3cul%3e%0a%3cli%3eMove+the+Offset+scale+knob+to+-1.+This+will+invert+the+Sine+signal%3c%2fli%3e%0a%3cli%3eAdjust+the+Sine+phase+offset.+At+180+it+should+be+correctly+aligned%3c%2fli%3e%0a%3cli%3eUse+the+WT+VCO+position+knob+to+change+waveshapes%2c+play+the+keyboard+and+check+the+scopes+to+see+and+hear+the+sound.+Right+click+Sine+to+select+non-sine+waveshapes%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a%3cdiv+class%3d%27d-flex+flex-row+justify-content-around%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2fboggaudiooffset-solo.png%27%3e%0a%3c%2fdiv%3e%0a">Virtual modular</a> for contrasting the effect of wavefolding and rectification on the four basic waveshapes.
</p>
</div>
<p>A simpler way to perform waveshape composition is to use analog logic.
In analog logic, AND is the maximum of two inputs, and OR is the minimum of two inputs.
Figure <a href="complex-modifiers.html#fig:minmax-compare">12.7</a> shows an example of applying the minimum to the two waveshapes from above.
The way to understand the operation is to follow the wave from left to right and at each point ask which wave is the lower of the two (i.e. is the minimum).
Sine is below the square wave for the positive portion of the wave, but in the negative portion of the wave, square is lower.
Note for this example, sync was still required to maintain the relative position of the two waves to each other, but manipulating phase was not necessary.
The maximum operation proceeds similarly to the minimum operation, except the maximum of the two waves is output at each point.
The min/max operations are a simpler way to compose than the rectification approach above, but the trade off is that there is somewhat less control over what part of the waveshape is used.</p>

<div class="figure">
<span style="display:block;" id="fig:minmax-compare"></span>
<img src="images/minmax-compare.png" alt="Sine and square waves with matched frequency and synchronized (left). The output wave from the minimum operation is high pass filtered to remove the voltage offset (right)." width="100%"><p class="caption">
Figure 12.7: Sine and square waves with matched frequency and synchronized (left). The output wave from the minimum operation is high pass filtered to remove the voltage offset (right).
</p>
</div>
<p>Explore waveshape composition with min/max operators using the button in Figure <a href="complex-modifiers.html#fig:minmax">12.8</a>.
As in the previous patch, sync between the waveshapes and high pass filtering are useful for maintaining a consistent result across pitches and removing voltage offsets, respectively.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setminmaxIframe('https://cardinal.olney.ai?patchurl=franken-rect.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#minmax">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="minmax" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="minmaxLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="minmaxLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Delete the second Utilities, Offset, and QuadVCA/Mixer&lt;/li&gt;
&lt;li&gt;Connect WT VCO out to Utilities logic in A &lt;/li&gt;
&lt;li&gt;Connect Sine out to Utilities logic in B &lt;/li&gt;
&lt;li&gt;Connect Utilities min out to filtah&lt;/li&gt;
&lt;li&gt;Set the phase on Sine to zero (double click to reset it)&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard and note the consistent shape resulting from the sync between oscillators&lt;/li&gt;
&lt;li&gt;Use the WT VCO position knob to change waveshapes, play the keyboard and check the scopes to see and hear the sound. Because Sine is set to square, which is the most minimum shape, only the top of the waveshape will be affected&lt;/li&gt;
&lt;li&gt;Switch the Utilities output to max and repeat. Again, square is the most maximum waveshape, only the bottom will change&lt;/li&gt;
&lt;li&gt;Change the Sine waveshape to sine (right click, waveform submenu). Repeat the above and note that now both top and bottom change. This is the general behavior of min/max - they typically affect the entire waveshape&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/minmax.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Delete the second Utilities, Offset, and QuadVCA/Mixer&lt;/li&gt;
&lt;li&gt;Connect WT VCO out to Utilities logic in A &lt;/li&gt;
&lt;li&gt;Connect Sine out to Utilities logic in B &lt;/li&gt;
&lt;li&gt;Connect Utilities min out to filtah&lt;/li&gt;
&lt;li&gt;Set the phase on Sine to zero (double click to reset it)&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play across the keyboard and note the consistent shape resulting from the sync between oscillators&lt;/li&gt;
&lt;li&gt;Use the WT VCO position knob to change waveshapes, play the keyboard and check the scopes to see and hear the sound. Because Sine is set to square, which is the most minimum shape, only the top of the waveshape will be affected&lt;/li&gt;
&lt;li&gt;Switch the Utilities output to max and repeat. Again, square is the most maximum waveshape, only the bottom will change&lt;/li&gt;
&lt;li&gt;Change the Sine waveshape to sine (right click, waveform submenu). Repeat the above and note that now both top and bottom change. This is the general behavior of min/max - they typically affect the entire waveshape&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/minmax.png'&gt;">Solution</button>
        <button type="button" onclick="setminmaxIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="minmax-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setminmaxIframe(url){
  var minmaxIframe = document.getElementById("minmax-iframe");
  minmaxIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:minmax"></span>
<p class="caption">
Figure 12.8: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=franken-rect.vcv&amp;solution=%3cimg+class%3d%27rack-image-6u%27+src%3d%27images%2fpatch-solutions%2fminmax.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eDelete+the+second+Utilities%2c+Offset%2c+and+QuadVCA%2fMixer%3c%2fli%3e%0a%3cli%3eConnect+WT+VCO+out+to+Utilities+logic+in+A+%3c%2fli%3e%0a%3cli%3eConnect+Sine+out+to+Utilities+logic+in+B+%3c%2fli%3e%0a%3cli%3eConnect+Utilities+min+out+to+filtah%3c%2fli%3e%0a%3cli%3eSet+the+phase+on+Sine+to+zero+%28double+click+to+reset+it%29%3c%2fli%3e%0a%3cli%3eTry+the+following+and+note+the+differences+in+the+sound+and+scopes+%3cul%3e%0a%3cli%3ePlay+across+the+keyboard+and+note+the+consistent+shape+resulting+from+the+sync+between+oscillators%3c%2fli%3e%0a%3cli%3eUse+the+WT+VCO+position+knob+to+change+waveshapes%2c+play+the+keyboard+and+check+the+scopes+to+see+and+hear+the+sound.+Because+Sine+is+set+to+square%2c+which+is+the+most+minimum+shape%2c+only+the+top+of+the+waveshape+will+be+affected%3c%2fli%3e%0a%3cli%3eSwitch+the+Utilities+output+to+max+and+repeat.+Again%2c+square+is+the+most+maximum+waveshape%2c+only+the+bottom+will+change%3c%2fli%3e%0a%3cli%3eChange+the+Sine+waveshape+to+sine+%28right+click%2c+waveform+submenu%29.+Repeat+the+above+and+note+that+now+both+top+and+bottom+change.+This+is+the+general+behavior+of+min%2fmax+-+they+typically+affect+the+entire+waveshape%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a">Virtual modular</a> for composing waveshapes using min/max operations.
</p>
</div>
</div>
<div id="slew" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> Slew<a class="anchor" aria-label="anchor" href="#slew"><i class="fas fa-link"></i></a>
</h2>
<p>Slew slows the rate of change of a signal.
We've seen this before with low pass filters, where the signal being slowed was audio rate.
Slew limiters behaves much the same way as low pass filters but are designed to work with unipolar signals.
Recall RC circuits from Section <a href="modifiers.html#voltage-controlled-filters">7.2</a> leech out energy from parts of the wave shape and return that energy to other parts, thus smoothing the signal.
Slew limiters work the same way but typically have parameters to control the rate of slew for both upward and downward transitions.</p>
<p>Slew limiters have applications in many areas that involve delaying a signal.
For example, we can make a gate delay by combining a slew limiter with a comparator.
When a slew limiter receives a gate, its output voltage will slowly rise depending on the rate of slew, until the voltage is high enough that the comparator sends out a high signal.
Before we look at portamento, try creating a gate delay from a slew limiter and comparator using the button in Figure <a href="complex-modifiers.html#fig:slew-gate-delay">12.9</a>.
The second scope in the patch shows another interesting application of slew, which is to convert gates into envelopes.
If the rise time runs into the fall time, the envelope will only go up and down (attack and decay).
Shorter rise and fall times will preserve the top of the gate, making an attack-sustain-release envelope, with sustain at max level.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setslew_gate_delayIframe('https://cardinal.olney.ai?patchurl=empty.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#slew_gate_delay">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="slew_gate_delay" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="slew_gate_delayLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="slew_gate_delayLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Connect LFO square out to Slew in and the first Scope in 1 &lt;/li&gt;
&lt;li&gt;Connect Slew out to Edge In and the second Scope in 1&lt;/li&gt;
&lt;li&gt;Connect Edge high out to both Scope input 2 &lt;/li&gt;
&lt;li&gt;Turn on Scope trigger and adjust time so you see the slow gate&lt;/li&gt;
&lt;li&gt;Adjust the Slew rise/fall sliders to adjust. Rise affects the delay of the comparator gate, and fall affects the length of that gate&lt;/li&gt;
&lt;li&gt;Try adjusting the slew to make delayed gates at different delays and lengths&lt;/li&gt;
&lt;li&gt;As you can see, with this method we can only delay so far because we need an incoming gate for the slew to smooth. A clock divider could create an incoming signal for a longer delay &lt;/li&gt;
&lt;li&gt;Note the second scope trace for the slewed signal is identical to an envelope, i.e. slew can convert gates into simple envelopes &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/befacoslew-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/slew-gate-delay.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Connect LFO square out to Slew in and the first Scope in 1 &lt;/li&gt;
&lt;li&gt;Connect Slew out to Edge In and the second Scope in 1&lt;/li&gt;
&lt;li&gt;Connect Edge high out to both Scope input 2 &lt;/li&gt;
&lt;li&gt;Turn on Scope trigger and adjust time so you see the slow gate&lt;/li&gt;
&lt;li&gt;Adjust the Slew rise/fall sliders to adjust. Rise affects the delay of the comparator gate, and fall affects the length of that gate&lt;/li&gt;
&lt;li&gt;Try adjusting the slew to make delayed gates at different delays and lengths&lt;/li&gt;
&lt;li&gt;As you can see, with this method we can only delay so far because we need an incoming gate for the slew to smooth. A clock divider could create an incoming signal for a longer delay &lt;/li&gt;
&lt;li&gt;Note the second scope trace for the slewed signal is identical to an envelope, i.e. slew can convert gates into simple envelopes &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/befacoslew-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/slew-gate-delay.png'&gt;">Solution</button>
        <button type="button" onclick="setslew_gate_delayIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="slew_gate_delay-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setslew_gate_delayIframe(url){
  var slew_gate_delayIframe = document.getElementById("slew_gate_delay-iframe");
  slew_gate_delayIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:slew-gate-delay"></span>
<p class="caption">
Figure 12.9: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=empty.vcv&amp;solution=%3cimg+class%3d%27rack-image%27+src%3d%27images%2fpatch-solutions%2fslew-gate-delay.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eConnect+LFO+square+out+to+Slew+in+and+the+first+Scope+in+1+%3c%2fli%3e%0a%3cli%3eConnect+Slew+out+to+Edge+In+and+the+second+Scope+in+1%3c%2fli%3e%0a%3cli%3eConnect+Edge+high+out+to+both+Scope+input+2+%3c%2fli%3e%0a%3cli%3eTurn+on+Scope+trigger+and+adjust+time+so+you+see+the+slow+gate%3c%2fli%3e%0a%3cli%3eAdjust+the+Slew+rise%2ffall+sliders+to+adjust.+Rise+affects+the+delay+of+the+comparator+gate%2c+and+fall+affects+the+length+of+that+gate%3c%2fli%3e%0a%3cli%3eTry+adjusting+the+slew+to+make+delayed+gates+at+different+delays+and+lengths%3c%2fli%3e%0a%3cli%3eAs+you+can+see%2c+with+this+method+we+can+only+delay+so+far+because+we+need+an+incoming+gate+for+the+slew+to+smooth.+A+clock+divider+could+create+an+incoming+signal+for+a+longer+delay+%3c%2fli%3e%0a%3cli%3eNote+the+second+scope+trace+for+the+slewed+signal+is+identical+to+an+envelope%2c+i.e.+slew+can+convert+gates+into+simple+envelopes+%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a%3cdiv+class%3d%27d-flex+flex-row+justify-content-around%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2fbefacoslew-solo.png%27%3e%0a%3c%2fdiv%3e%0a">Virtual modular</a> for using a slew limiter and comparator to make a gate delay and slew alone to convert a gate to an envelope.
</p>
</div>
<p>Perhaps the most common use of slew is to implement portamento/glissando by smoothing stepped V/Oct control signals to create glides.
If you consider V/Oct signals to be stepped like gates, then the last patch should help you understand how this works.
A slewed V/Oct signal will have a range of voltages between the steps, and these intermediate voltages will be cause a VCO receiving them to output intermediate pitches.
Most slew limiters will base the glide time on the distance between notes as well as the rise/fall settings.
This can be challenging musically, so if a constant glide time is desired, a better option is to use a low-pass filter.
Try patching up a slew limiter to a VCO to implement portamento using the button in Figure <a href="complex-modifiers.html#fig:slew-portamento">12.10</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setslew_portamentoIframe('https://cardinal.olney.ai?patchurl=empty.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#slew_portamento">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="slew_portamento" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="slew_portamentoLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="slew_portamentoLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add 12 key, Slew limiter, VCO, Host audio, and Scope &lt;/li&gt;
&lt;li&gt;Connect 12 key CV out to Slew in and Slew out to VCO V/Oct&lt;/li&gt;
&lt;li&gt;Connect VCO square out to Host audio L and Scope input 1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play two keys close together and far apart. Note the differenct in portamento length&lt;/li&gt;
&lt;li&gt;Adjust the Slew sliders one at a time and repeat. Note the asymmetry depending on whether the note sequence is ascending or descending&lt;/li&gt;
&lt;li&gt;Change the shape knob to the right and repeat. Note the time it takes to implement the glide transition is much slower and matches the icon for that position (long attack)&lt;/li&gt;
&lt;li&gt;To get a constant time portamento, replace Slew with filtah in LPF mode with a low cutoff. The low cuttoff is essential because the voltage changes are low frequency and will be removed otherwise&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/slew-portamento.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add 12 key, Slew limiter, VCO, Host audio, and Scope &lt;/li&gt;
&lt;li&gt;Connect 12 key CV out to Slew in and Slew out to VCO V/Oct&lt;/li&gt;
&lt;li&gt;Connect VCO square out to Host audio L and Scope input 1&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Play two keys close together and far apart. Note the differenct in portamento length&lt;/li&gt;
&lt;li&gt;Adjust the Slew sliders one at a time and repeat. Note the asymmetry depending on whether the note sequence is ascending or descending&lt;/li&gt;
&lt;li&gt;Change the shape knob to the right and repeat. Note the time it takes to implement the glide transition is much slower and matches the icon for that position (long attack)&lt;/li&gt;
&lt;li&gt;To get a constant time portamento, replace Slew with filtah in LPF mode with a low cutoff. The low cuttoff is essential because the voltage changes are low frequency and will be removed otherwise&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/slew-portamento.png'&gt;">Solution</button>
        <button type="button" onclick="setslew_portamentoIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="slew_portamento-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setslew_portamentoIframe(url){
  var slew_portamentoIframe = document.getElementById("slew_portamento-iframe");
  slew_portamentoIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:slew-portamento"></span>
<p class="caption">
Figure 12.10: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=empty.vcv&amp;solution=%3cimg+class%3d%27rack-image%27+src%3d%27images%2fpatch-solutions%2fslew-portamento.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eAdd+12+key%2c+Slew+limiter%2c+VCO%2c+Host+audio%2c+and+Scope+%3c%2fli%3e%0a%3cli%3eConnect+12+key+CV+out+to+Slew+in+and+Slew+out+to+VCO+V%2fOct%3c%2fli%3e%0a%3cli%3eConnect+VCO+square+out+to+Host+audio+L+and+Scope+input+1%3c%2fli%3e%0a%3cli%3eTry+the+following+and+note+the+differences+in+the+sound+and+scopes+%3cul%3e%0a%3cli%3ePlay+two+keys+close+together+and+far+apart.+Note+the+differenct+in+portamento+length%3c%2fli%3e%0a%3cli%3eAdjust+the+Slew+sliders+one+at+a+time+and+repeat.+Note+the+asymmetry+depending+on+whether+the+note+sequence+is+ascending+or+descending%3c%2fli%3e%0a%3cli%3eChange+the+shape+knob+to+the+right+and+repeat.+Note+the+time+it+takes+to+implement+the+glide+transition+is+much+slower+and+matches+the+icon+for+that+position+%28long+attack%29%3c%2fli%3e%0a%3cli%3eTo+get+a+constant+time+portamento%2c+replace+Slew+with+filtah+in+LPF+mode+with+a+low+cutoff.+The+low+cuttoff+is+essential+because+the+voltage+changes+are+low+frequency+and+will+be+removed+otherwise%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a">Virtual modular</a> for using a slew limiter to implement portamento.
</p>
</div>
<p>Slew can also be combined with full rectification to make an envelope follower, a very useful tool for processing audio.
When we make sounds in modular, we typically apply an envelope like an ADSR in order to give the sound dynamic loudness.
We can further use the envelope to control modulation like filter cutoff, so that the spectrum of the sound changes at the same time as its loudness.
Envelopes can can be used for <a href="https://en.wikipedia.org/wiki/Dynamic_range_compression#Side-chaining">sidechaining</a> effects like ducking, where the envelope on the kick is inverted and used to <em>reduce</em> the volume of other sounds, which gives the music a pulsing quality.</p>
<p>Sidechaining is relatively simple when an envelope was used to generate the sound, but when the sound isn't synthesized, like samples or live-recordings of instruments, an envelope follower is needed to generate the envelope that will be used for sidechaining.
An envelope follower essentially traces a curve along the peaks of a sound wave to outline an envelope akin to an ADSR.
Since ADSR envelopes are unipolar, full rectification of the audio takes place first.
Then slew is used to slow the rapid changes in the sound and generate a smoothish curve.
Some tuning of the envelope follower is typically required to create an envelope with the desired properties.
Try patching up an envelope follower using full rectification and a slew limiter using the button in Figure <a href="complex-modifiers.html#fig:slew-sidechain-noise">12.11</a>.
The audio in the patch comes from lo-fi synthesized speech with no envelope, and the patch demonstrates sidechaining to duck noise based on the followed envelope.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setslew_sidechain_noiseIframe('https://cardinal.olney.ai?patchurl=empty.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#slew_sidechain_noise">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="slew_sidechain_noise" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="slew_sidechain_noiseLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="slew_sidechain_noiseLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add LFO and Macro oscillator 2 to the top row, and add utilities Slew limiter, Offset, Noiz, QuadVCA/Mixer, Scope, and Host audio to the bottom row &lt;/li&gt;
&lt;li&gt;Press the Macro osc mode button until the bottom led is lit green. This is the voice/word mode&lt;/li&gt;
&lt;li&gt;Connect LFO triangle out to Macro osc morph in. Turn the morph attenuator all the way up and the LFO freq low, e.g. .05 &lt;/li&gt;
&lt;li&gt;Connect Macro osc out to utilities top in, QuadVCA/Mixer input 2, and Scope input 1&lt;/li&gt;
&lt;li&gt;Connect Utilities full rectify out to Slew in, Slew out to Offset in, and Offset out to QuadVCA/Mixer CV input 1&lt;/li&gt;
&lt;li&gt;Connect Noiz white out to QuadVCA/Mixer input 1. As you can see, the envelope follower is controling the level of the white noise &lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to Scope input 2 and Host audio L &lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Adjust the Slew times to the envelope. In the middle is reasonable&lt;/li&gt;
&lt;li&gt;Invert the envelope using negative scale of Offset&lt;/li&gt;
&lt;li&gt;Since the VCA CV input needs positive voltage to let signal through, use the Offset offset knob to create a constant positive voltage. The inverted envelope subtracts from this, so the net result should be zero volume when words are spoken but white noise when not&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/plaits-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/slew-sidechain-noise.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add LFO and Macro oscillator 2 to the top row, and add utilities Slew limiter, Offset, Noiz, QuadVCA/Mixer, Scope, and Host audio to the bottom row &lt;/li&gt;
&lt;li&gt;Press the Macro osc mode button until the bottom led is lit green. This is the voice/word mode&lt;/li&gt;
&lt;li&gt;Connect LFO triangle out to Macro osc morph in. Turn the morph attenuator all the way up and the LFO freq low, e.g. .05 &lt;/li&gt;
&lt;li&gt;Connect Macro osc out to utilities top in, QuadVCA/Mixer input 2, and Scope input 1&lt;/li&gt;
&lt;li&gt;Connect Utilities full rectify out to Slew in, Slew out to Offset in, and Offset out to QuadVCA/Mixer CV input 1&lt;/li&gt;
&lt;li&gt;Connect Noiz white out to QuadVCA/Mixer input 1. As you can see, the envelope follower is controling the level of the white noise &lt;/li&gt;
&lt;li&gt;Connect QuadVCA/Mixer mix out to Scope input 2 and Host audio L &lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound and scopes &lt;ul&gt;
&lt;li&gt;Adjust the Slew times to the envelope. In the middle is reasonable&lt;/li&gt;
&lt;li&gt;Invert the envelope using negative scale of Offset&lt;/li&gt;
&lt;li&gt;Since the VCA CV input needs positive voltage to let signal through, use the Offset offset knob to create a constant positive voltage. The inverted envelope subtracts from this, so the net result should be zero volume when words are spoken but white noise when not&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/plaits-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/slew-sidechain-noise.png'&gt;">Solution</button>
        <button type="button" onclick="setslew_sidechain_noiseIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="slew_sidechain_noise-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setslew_sidechain_noiseIframe(url){
  var slew_sidechain_noiseIframe = document.getElementById("slew_sidechain_noise-iframe");
  slew_sidechain_noiseIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:slew-sidechain-noise"></span>
<p class="caption">
Figure 12.11: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=empty.vcv&amp;solution=%3cimg+class%3d%27rack-image-6u%27+src%3d%27images%2fpatch-solutions%2fslew-sidechain-noise.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eAdd+LFO+and+Macro+oscillator+2+to+the+top+row%2c+and+add+utilities+Slew+limiter%2c+Offset%2c+Noiz%2c+QuadVCA%2fMixer%2c+Scope%2c+and+Host+audio+to+the+bottom+row+%3c%2fli%3e%0a%3cli%3ePress+the+Macro+osc+mode+button+until+the+bottom+led+is+lit+green.+This+is+the+voice%2fword+mode%3c%2fli%3e%0a%3cli%3eConnect+LFO+triangle+out+to+Macro+osc+morph+in.+Turn+the+morph+attenuator+all+the+way+up+and+the+LFO+freq+low%2c+e.g.+.05+%3c%2fli%3e%0a%3cli%3eConnect+Macro+osc+out+to+utilities+top+in%2c+QuadVCA%2fMixer+input+2%2c+and+Scope+input+1%3c%2fli%3e%0a%3cli%3eConnect+Utilities+full+rectify+out+to+Slew+in%2c+Slew+out+to+Offset+in%2c+and+Offset+out+to+QuadVCA%2fMixer+CV+input+1%3c%2fli%3e%0a%3cli%3eConnect+Noiz+white+out+to+QuadVCA%2fMixer+input+1.+As+you+can+see%2c+the+envelope+follower+is+controling+the+level+of+the+white+noise+%3c%2fli%3e%0a%3cli%3eConnect+QuadVCA%2fMixer+mix+out+to+Scope+input+2+and+Host+audio+L+%3c%2fli%3e%0a%3cli%3eTry+the+following+and+note+the+differences+in+the+sound+and+scopes+%3cul%3e%0a%3cli%3eAdjust+the+Slew+times+to+the+envelope.+In+the+middle+is+reasonable%3c%2fli%3e%0a%3cli%3eInvert+the+envelope+using+negative+scale+of+Offset%3c%2fli%3e%0a%3cli%3eSince+the+VCA+CV+input+needs+positive+voltage+to+let+signal+through%2c+use+the+Offset+offset+knob+to+create+a+constant+positive+voltage.+The+inverted+envelope+subtracts+from+this%2c+so+the+net+result+should+be+zero+volume+when+words+are+spoken+but+white+noise+when+not%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a%3cdiv+class%3d%27d-flex+flex-row+justify-content-around%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2fplaits-solo.png%27%3e%0a%3c%2fdiv%3e%0a">Virtual modular</a> for using full rectification with a slew limiter to create an envelope follower.
</p>
</div>
</div>
<div id="quantizers" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> Quantizers<a class="anchor" aria-label="anchor" href="#quantizers"><i class="fas fa-link"></i></a>
</h2>
<p>A <a href="https://en.wikipedia.org/wiki/Quantization_(signal_processing)">quantizer</a> maps input values to a smaller set of outputs.
We discussed quantization in Section <a href="generators.html#samplers">6.6</a> in the context of bit depth, where the height of a sound wave is approximately measured in order to convert it from analogue to digital.
In music, quantization is typically used to refer to either beat quantization or note quantization.
Beat quantization is often relevant when performing live into a sequencer.
If the sequencer is grid-based, any played beat will be snapped to the grid, i.e. snapped to the beat.
In modular, note quantization is the more commonly used, and note quantization maps a voltage range to a particular note.
Modular quantizers typically allow scales to be selected to determine what notes are available.</p>
<p>Perhaps the easiest way to understand quantizers is through voltage controlled sequencers.
Recall that sequencers are typically clocked and advance one step at a time.
A voltage controlled sequencer will select the step based on the incoming voltage.
So when a voltage within a range corresponding to the step is received, that step will be selected, and whatever voltage was there will be output.
Quantizers perform the same function except that the output notes are determined by the scale rather than being assigned.</p>
<p>Despite this similarity, quantizers are often used after modular sequencers to make them easier to tune.
If a quantizer is used on the output of a sequencer, adjustment to a sequencer knob will step from one note to the next rather than move through all frequencies in between.
Also, if the quantizer has scale selection, then it will affect all notes in the sequence simultaneously, which can be very convenient.
However, it's important to keep in mind that a quantizer's voltage for a note, e.g. C4, may not make your oscillator go to the same note.
To ensure your oscillator's output matches a quantizer, you must tune your oscillator so they match.
Try patching up a quantizer both ways using the button in Figure <a href="complex-modifiers.html#fig:cv-sequencer-quantizer-plus-quantizer">12.12</a>: first using a voltage controlled sequencer and then as a modifier on a sequencer's output.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setcv_sequencer_quantizer_plus_quantizerIframe('https://cardinal.olney.ai?patchurl=st-seq-arp-plus-dynamics.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#cv_sequencer_quantizer_plus_quantizer">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="cv_sequencer_quantizer_plus_quantizer" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="cv_sequencer_quantizer_plus_quantizerLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="cv_sequencer_quantizer_plus_quantizerLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="
&lt;em&gt;Quantizing an LFO signal into sequenced notes&lt;/em&gt;
&lt;ul&gt;
&lt;li&gt;We'll modify the Stranger Things patch to avoid programming specific pitches into the sequencer &lt;/li&gt;
&lt;li&gt;Add an LFO to the left of the Clock&lt;/li&gt;
&lt;li&gt;Disconnect the Clock beat from the ADDR-SEQ Clock input&lt;/li&gt;
&lt;li&gt;Connect the LFO triangle out to the ADDR-SEQ CV in and set the LFO to a low rate, e.g. .1 Hz&lt;/li&gt;
&lt;li&gt;The sequence should move up and down with the LFO. If it is not starting on step 1, connect Clock reset out to the reset ins for LFO and ADDR-SEQ, then hit the button to reset and synchronize them&lt;/li&gt;
&lt;/ul&gt;
&lt;em&gt;Cleaning up sequencer output with a quantizer&lt;/em&gt;
&lt;ul&gt;
&lt;li&gt;Add JW Quantizer to the right of ADDR-SEQ&lt;/li&gt;
&lt;li&gt;Move all connects from ADDR-SEQ out to JW Quantizer out and connect ADDR-SEQ out to Quantizer in&lt;/li&gt;
&lt;li&gt;Change the root note knob, mode knob, and octave shift knob to see how easy it is do do these manipulations with a quantizer to affect all the notes at once&lt;/li&gt;
&lt;li&gt;Disconnect the LFO so the sequence stops on a single step Turn the knob for that step and notice how it now goes from note to note instead of continuous frequencies - that is the essence of quantization &lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/jwquantizer-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/cv-sequencer-quantizer-plus-quantizer.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="
&lt;em&gt;Quantizing an LFO signal into sequenced notes&lt;/em&gt;
&lt;ul&gt;
&lt;li&gt;We'll modify the Stranger Things patch to avoid programming specific pitches into the sequencer &lt;/li&gt;
&lt;li&gt;Add an LFO to the left of the Clock&lt;/li&gt;
&lt;li&gt;Disconnect the Clock beat from the ADDR-SEQ Clock input&lt;/li&gt;
&lt;li&gt;Connect the LFO triangle out to the ADDR-SEQ CV in and set the LFO to a low rate, e.g. .1 Hz&lt;/li&gt;
&lt;li&gt;The sequence should move up and down with the LFO. If it is not starting on step 1, connect Clock reset out to the reset ins for LFO and ADDR-SEQ, then hit the button to reset and synchronize them&lt;/li&gt;
&lt;/ul&gt;
&lt;em&gt;Cleaning up sequencer output with a quantizer&lt;/em&gt;
&lt;ul&gt;
&lt;li&gt;Add JW Quantizer to the right of ADDR-SEQ&lt;/li&gt;
&lt;li&gt;Move all connects from ADDR-SEQ out to JW Quantizer out and connect ADDR-SEQ out to Quantizer in&lt;/li&gt;
&lt;li&gt;Change the root note knob, mode knob, and octave shift knob to see how easy it is do do these manipulations with a quantizer to affect all the notes at once&lt;/li&gt;
&lt;li&gt;Disconnect the LFO so the sequence stops on a single step Turn the knob for that step and notice how it now goes from note to note instead of continuous frequencies - that is the essence of quantization &lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/jwquantizer-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image-6u' src='images/patch-solutions/cv-sequencer-quantizer-plus-quantizer.png'&gt;">Solution</button>
        <button type="button" onclick="setcv_sequencer_quantizer_plus_quantizerIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="cv_sequencer_quantizer_plus_quantizer-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setcv_sequencer_quantizer_plus_quantizerIframe(url){
  var cv_sequencer_quantizer_plus_quantizerIframe = document.getElementById("cv_sequencer_quantizer_plus_quantizer-iframe");
  cv_sequencer_quantizer_plus_quantizerIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:cv-sequencer-quantizer-plus-quantizer"></span>
<p class="caption">
Figure 12.12: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=st-seq-arp-plus-dynamics.vcv&amp;solution=%3cimg+class%3d%27rack-image-6u%27+src%3d%27images%2fpatch-solutions%2fcv-sequencer-quantizer-plus-quantizer.png%27%3e&amp;instructions=%0a%3cem%3eQuantizing+an+LFO+signal+into+sequenced+notes%3c%2fem%3e%0a%3cul%3e%0a%3cli%3eWe%27ll+modify+the+Stranger+Things+patch+to+avoid+programming+specific+pitches+into+the+sequencer+%3c%2fli%3e%0a%3cli%3eAdd+an+LFO+to+the+left+of+the+Clock%3c%2fli%3e%0a%3cli%3eDisconnect+the+Clock+beat+from+the+ADDR-SEQ+Clock+input%3c%2fli%3e%0a%3cli%3eConnect+the+LFO+triangle+out+to+the+ADDR-SEQ+CV+in+and+set+the+LFO+to+a+low+rate%2c+e.g.+.1+Hz%3c%2fli%3e%0a%3cli%3eThe+sequence+should+move+up+and+down+with+the+LFO.+If+it+is+not+starting+on+step+1%2c+connect+Clock+reset+out+to+the+reset+ins+for+LFO+and+ADDR-SEQ%2c+then+hit+the+button+to+reset+and+synchronize+them%3c%2fli%3e%0a%3c%2ful%3e%0a%3cem%3eCleaning+up+sequencer+output+with+a+quantizer%3c%2fem%3e%0a%3cul%3e%0a%3cli%3eAdd+JW+Quantizer+to+the+right+of+ADDR-SEQ%3c%2fli%3e%0a%3cli%3eMove+all+connects+from+ADDR-SEQ+out+to+JW+Quantizer+out+and+connect+ADDR-SEQ+out+to+Quantizer+in%3c%2fli%3e%0a%3cli%3eChange+the+root+note+knob%2c+mode+knob%2c+and+octave+shift+knob+to+see+how+easy+it+is+do+do+these+manipulations+with+a+quantizer+to+affect+all+the+notes+at+once%3c%2fli%3e%0a%3cli%3eDisconnect+the+LFO+so+the+sequence+stops+on+a+single+step+Turn+the+knob+for+that+step+and+notice+how+it+now+goes+from+note+to+note+instead+of+continuous+frequencies+-+that+is+the+essence+of+quantization+%3c%2fli%3e%0a%3c%2ful%3e%0a%3cdiv+class%3d%27d-flex+flex-row+justify-content-around%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2fjwquantizer-solo.png%27%3e%0a%3c%2fdiv%3e%0a">Virtual modular</a> for implementing a quantizer using a voltage controlled sequencer and using a quantizer module to process the output of a sequencer.
</p>
</div>
<p>The last patch used a sequencer to store notes, but it's also possible to use a quantizer without a sequencer.
Particularly for arpeggios, its easy enough to use LFOs that cycle up and down.
All that is needed is a sample and hold module to synchronize the pitches to gates, and an attenuator to restrict the range of the LFO to the range of notes desired.
The relationships between LFO frequency, LFO range, gate/trigger frequency, and gate/trigger synchronization are illustrated in Figure <a href="complex-modifiers.html#fig:sine-quantize-figure">12.13</a>.
If sampling occurs at the same frequency as the LFO, then it will always select the same note.
To get more notes, the sampling needs to occur at a higher frequency.</p>

<div class="figure">
<span style="display:block;" id="fig:sine-quantize-figure"></span>
<img src="images/sine-quantize-figure.png" alt="A sine wave LFO (purple) being sampled (green) so the sampled values can be input to a quantizer to create an arpeggio. If the sampling rate matches the LFO frequency, only one repeating note will be sampled (left). The sampling rate must be higher than the LFO rate (right) to increase the number of notes. See text for additional factors that effect what voltages are sampled." width="100%"><p class="caption">
Figure 12.13: A sine wave LFO (purple) being sampled (green) so the sampled values can be input to a quantizer to create an arpeggio. If the sampling rate matches the LFO frequency, only one repeating note will be sampled (left). The sampling rate must be higher than the LFO rate (right) to increase the number of notes. See text for additional factors that effect what voltages are sampled.
</p>
</div>
<p>If the sample and hold is clocked with another LFO whose frequency is not a multiple of the quantized LFO, then the arpeggio will slowly shift its played notes over a longer period.
Try patching up an LFO quantizer arpeggio using the button in Figure <a href="complex-modifiers.html#fig:lfo-quantizer-arpeggio">12.14</a>.
Other ways of creating variations are to change the range of the LFO, the offset of the LFO, the sampling rate, and the sampling phase/synchronization to the LFO.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setlfo_quantizer_arpeggioIframe('https://cardinal.olney.ai?patchurl=twelvekey-env-chorus.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#lfo_quantizer_arpeggio">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="lfo_quantizer_arpeggio" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="lfo_quantizer_arpeggioLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="lfo_quantizer_arpeggioLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two LFOs, Bogg Audio Offset, holdah, and Quantizer&lt;/li&gt;
&lt;li&gt;Connect the 2nd LFO (the 'sequencer') triangle out Offset in and set the LFO to a low rate, e.g. .4 Hz&lt;/li&gt;
&lt;li&gt;Connect Offset out to holdah in&lt;/li&gt;
&lt;li&gt;Connect holdah out to Quantizer in&lt;/li&gt;
&lt;li&gt;Connect Quantizer out to VCO V/Oct&lt;/li&gt;
&lt;li&gt;Connect first LFO (the 'clock') square out to holdah trigger in and ADSR gate in. Set it to a higher rate, e.g. 2 or 3 Hz&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound &lt;ul&gt;
&lt;li&gt;Adjust the Offset scale to a small number, e.g. .15 to define how many notes are in the sweep of the sequencer LFO&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the clock LFO. The higher it is, the more notes will be selected from the sequencer LFO's sweep&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the sequencer LFO. The slower it is, the more opportunities the clock LFO will have to select notes before the sequencer LFO changes direction&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/boggaudiooffset-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/lfo-quantizer-arpeggio.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add two LFOs, Bogg Audio Offset, holdah, and Quantizer&lt;/li&gt;
&lt;li&gt;Connect the 2nd LFO (the 'sequencer') triangle out Offset in and set the LFO to a low rate, e.g. .4 Hz&lt;/li&gt;
&lt;li&gt;Connect Offset out to holdah in&lt;/li&gt;
&lt;li&gt;Connect holdah out to Quantizer in&lt;/li&gt;
&lt;li&gt;Connect Quantizer out to VCO V/Oct&lt;/li&gt;
&lt;li&gt;Connect first LFO (the 'clock') square out to holdah trigger in and ADSR gate in. Set it to a higher rate, e.g. 2 or 3 Hz&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound &lt;ul&gt;
&lt;li&gt;Adjust the Offset scale to a small number, e.g. .15 to define how many notes are in the sweep of the sequencer LFO&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the clock LFO. The higher it is, the more notes will be selected from the sequencer LFO's sweep&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the sequencer LFO. The slower it is, the more opportunities the clock LFO will have to select notes before the sequencer LFO changes direction&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class='d-flex flex-row justify-content-around'&gt;
&lt;img class='rack-image' src='images/solo-modules/boggaudiooffset-solo.png'&gt;
&lt;/div&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/lfo-quantizer-arpeggio.png'&gt;">Solution</button>
        <button type="button" onclick="setlfo_quantizer_arpeggioIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="lfo_quantizer_arpeggio-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setlfo_quantizer_arpeggioIframe(url){
  var lfo_quantizer_arpeggioIframe = document.getElementById("lfo_quantizer_arpeggio-iframe");
  lfo_quantizer_arpeggioIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:lfo-quantizer-arpeggio"></span>
<p class="caption">
Figure 12.14: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=twelvekey-env-chorus.vcv&amp;solution=%3cimg+class%3d%27rack-image%27+src%3d%27images%2fpatch-solutions%2flfo-quantizer-arpeggio.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eAdd+two+LFOs%2c+Bogg+Audio+Offset%2c+holdah%2c+and+Quantizer%3c%2fli%3e%0a%3cli%3eConnect+the+2nd+LFO+%28the+%27sequencer%27%29+triangle+out+Offset+in+and+set+the+LFO+to+a+low+rate%2c+e.g.+.4+Hz%3c%2fli%3e%0a%3cli%3eConnect+Offset+out+to+holdah+in%3c%2fli%3e%0a%3cli%3eConnect+holdah+out+to+Quantizer+in%3c%2fli%3e%0a%3cli%3eConnect+Quantizer+out+to+VCO+V%2fOct%3c%2fli%3e%0a%3cli%3eConnect+first+LFO+%28the+%27clock%27%29+square+out+to+holdah+trigger+in+and+ADSR+gate+in.+Set+it+to+a+higher+rate%2c+e.g.+2+or+3+Hz%3c%2fli%3e%0a%3cli%3eTry+the+following+and+note+the+differences+in+the+sound+%3cul%3e%0a%3cli%3eAdjust+the+Offset+scale+to+a+small+number%2c+e.g.+.15+to+define+how+many+notes+are+in+the+sweep+of+the+sequencer+LFO%3c%2fli%3e%0a%3cli%3eAdjust+the+frequencies+of+the+clock+LFO.+The+higher+it+is%2c+the+more+notes+will+be+selected+from+the+sequencer+LFO%27s+sweep%3c%2fli%3e%0a%3cli%3eAdjust+the+frequencies+of+the+sequencer+LFO.+The+slower+it+is%2c+the+more+opportunities+the+clock+LFO+will+have+to+select+notes+before+the+sequencer+LFO+changes+direction%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a%3cdiv+class%3d%27d-flex+flex-row+justify-content-around%27%3e%0a%3cimg+class%3d%27rack-image%27+src%3d%27images%2fsolo-modules%2fboggaudiooffset-solo.png%27%3e%0a%3c%2fdiv%3e%0a">Virtual modular</a> for creating an arpeggio using an LFO through a quantizer.
</p>
</div>
<p>Another common application for quantizers is in generative patches where probability is used to generate voltages which are then turned into notes.
We can incorporate probability into the last patch using almost the same modules but connected a different way.
Try patching up a probability-based generative patch using sample and hold on noise through a quantizer and speed variable clocks for different note lengths using the button in Figure <a href="complex-modifiers.html#fig:sh-quantizer-generative">12.15</a>.</p>

<!-- MODAL HTML BLOCK -->
<!-- Button trigger modal -->
<!-- <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center"> -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <button type="button" style="margin-top: 20px;margin-bottom: 5px" onclick="setsh_quantizer_generativeIframe('https://cardinal.olney.ai?patchurl=lfo-quantizer-arpeggio.vcv')" class="btn btn-primary" data-toggle="modal" data-target="#sh_quantizer_generative">
    Launch Virtual Modular
  </button>
</div>


<!-- Modal -->
<div class="modal fade" id="sh_quantizer_generative" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="sh_quantizer_generativeLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-between">
        <!-- <h5 class="modal-title" id="sh_quantizer_generativeLabel">Modal title</h5> -->
        <!-- To dismiss popovers when other elements are clicked, add this back in and uncomment jquery at end of template
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add Utilities and delete holdah and 12 key. The bottom section of Utilities has an integrated noise source and sample and hold, so we can use it to generate random stepped voltage&lt;/li&gt;
&lt;li&gt;Connect the 2nd LFO (the 'clock') square out to Utilities S&amp;H in&lt;/li&gt;
&lt;li&gt;Connect Utilities out to offset in&lt;/li&gt;
&lt;li&gt;Connect offset out out to Quantizer in&lt;/li&gt;
&lt;li&gt;Connect 1st LFO triangle out to the FM in of the clock LFO&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound &lt;ul&gt;
&lt;li&gt;Adjust the Offset scale to a small number, e.g. .15 to define how many notes are in the sweep of the sequencer LFO&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the clock LFO. The higher it is, the more notes will be selected from the sample and hold&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the first LFO and the FM attenuator of the clock LFO. The faster the first LFO is, the faster the note durations will change. The stronger the attenuated signal is, the more the first LFO will influence the speed of the clock. You might want the first LFO to be bipolar for this&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="popover" data-trigger="focus" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/sh-quantizer-generative.png'&gt;">Solution</button> -->
        <!-- using a different data-toggle than 'popover' because bookdown seems to have customized popover for footnotes, etc, with a different close click behaviour -->
        <button type="button" class="btn btn-secondary" title="Instructions" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;ul&gt;
&lt;li&gt;Add Utilities and delete holdah and 12 key. The bottom section of Utilities has an integrated noise source and sample and hold, so we can use it to generate random stepped voltage&lt;/li&gt;
&lt;li&gt;Connect the 2nd LFO (the 'clock') square out to Utilities S&amp;H in&lt;/li&gt;
&lt;li&gt;Connect Utilities out to offset in&lt;/li&gt;
&lt;li&gt;Connect offset out out to Quantizer in&lt;/li&gt;
&lt;li&gt;Connect 1st LFO triangle out to the FM in of the clock LFO&lt;/li&gt;
&lt;li&gt;Try the following and note the differences in the sound &lt;ul&gt;
&lt;li&gt;Adjust the Offset scale to a small number, e.g. .15 to define how many notes are in the sweep of the sequencer LFO&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the clock LFO. The higher it is, the more notes will be selected from the sample and hold&lt;/li&gt;
&lt;li&gt;Adjust the frequencies of the first LFO and the FM attenuator of the clock LFO. The faster the first LFO is, the faster the note durations will change. The stronger the attenuated signal is, the more the first LFO will influence the speed of the clock. You might want the first LFO to be bipolar for this&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
">Instructions</button>
        <button type="button" class="btn btn-secondary" title="Solution" data-toggle="modal-popover" data-placement="bottom" data-custom-class="modal-popover" data-html="true" data-content="&lt;img class='rack-image' src='images/patch-solutions/sh-quantizer-generative.png'&gt;">Solution</button>
        <button type="button" onclick="setsh_quantizer_generativeIframe('')" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- For some reason the button type below will not play along with justify-content-between  -->
        <!-- <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <iframe id="sh_quantizer_generative-iframe" src="" height="100%" width="100%"></iframe>
      </div>      
      <!-- <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

  

<script>
// Enable popovers for instructions, etc 
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// });
$(function () {
  $('[data-toggle="modal-popover"]').popover()
})

// Set/reset iframe to prevent it loading when page loads and persisting when modal closed 
function setsh_quantizer_generativeIframe(url){
  var sh_quantizer_generativeIframe = document.getElementById("sh_quantizer_generative-iframe");
  sh_quantizer_generativeIframe.src = url;
};

// This dismisses popovers when anything else is clicked, but users probably want to refer to instructions/solution while clicking on things, so commenting it out for now
// $('.popover-dismiss').popover({
//   trigger: 'focus'
// })
</script><!-- CAPTION BLOCK --><div class="figure" style="margin-top: 0px;padding-top: 0px;">
<span style="display:block;" id="fig:sh-quantizer-generative"></span>
<p class="caption">
Figure 12.15: <a href="https://olney.ai/ct-modular-book/modular-for-pdf.html?starter=lfo-quantizer-arpeggio.vcv&amp;solution=%3cimg+class%3d%27rack-image%27+src%3d%27images%2fpatch-solutions%2fsh-quantizer-generative.png%27%3e&amp;instructions=%3cul%3e%0a%3cli%3eAdd+Utilities+and+delete+holdah+and+12+key.+The+bottom+section+of+Utilities+has+an+integrated+noise+source+and+sample+and+hold%2c+so+we+can+use+it+to+generate+random+stepped+voltage%3c%2fli%3e%0a%3cli%3eConnect+the+2nd+LFO+%28the+%27clock%27%29+square+out+to+Utilities+S%26H+in%3c%2fli%3e%0a%3cli%3eConnect+Utilities+out+to+offset+in%3c%2fli%3e%0a%3cli%3eConnect+offset+out+out+to+Quantizer+in%3c%2fli%3e%0a%3cli%3eConnect+1st+LFO+triangle+out+to+the+FM+in+of+the+clock+LFO%3c%2fli%3e%0a%3cli%3eTry+the+following+and+note+the+differences+in+the+sound+%3cul%3e%0a%3cli%3eAdjust+the+Offset+scale+to+a+small+number%2c+e.g.+.15+to+define+how+many+notes+are+in+the+sweep+of+the+sequencer+LFO%3c%2fli%3e%0a%3cli%3eAdjust+the+frequencies+of+the+clock+LFO.+The+higher+it+is%2c+the+more+notes+will+be+selected+from+the+sample+and+hold%3c%2fli%3e%0a%3cli%3eAdjust+the+frequencies+of+the+first+LFO+and+the+FM+attenuator+of+the+clock+LFO.+The+faster+the+first+LFO+is%2c+the+faster+the+note+durations+will+change.+The+stronger+the+attenuated+signal+is%2c+the+more+the+first+LFO+will+influence+the+speed+of+the+clock.+You+might+want+the+first+LFO+to+be+bipolar+for+this%3c%2fli%3e%0a%3c%2ful%3e%3c%2fli%3e%0a%3c%2ful%3e%0a">Virtual modular</a> for creating an generative melody using sample and hold on noise through a quantizer.
</p>
</div>
</div>
<div id="check-your-understanding-8" class="section level2" number="12.4">
<h2>
<span class="header-section-number">12.4</span> Check your understanding<a class="anchor" aria-label="anchor" href="#check-your-understanding-8"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>For which kind of modulation is rectification useful? <select class="webex-select"><option value="blank"></option>
<option value="">ring modulation</option>
<option value="">phase modulation</option>
<option value="answer">amplitude modulation</option>
<option value="">frequency modulation</option></select></p></li>
<li><p>Which basic waveshape becomes offset voltage under full rectification? <select class="webex-select"><option value="blank"></option>
<option value="">sine</option>
<option value="answer">square</option>
<option value="">triangle</option>
<option value="">saw</option></select></p></li>
<li><p>Slew slows the rate of change of a signal like what kind of filter? <select class="webex-select"><option value="blank"></option>
<option value="">all pass</option>
<option value="answer">low pass</option>
<option value="">band pass</option>
<option value="">high pass</option></select></p></li>
<li><p>Which of the following can't be done with slew? <select class="webex-select"><option value="blank"></option>
<option value="">converting gates to envelopes</option>
<option value="">creating an envelope follower</option>
<option value="answer">quantization</option>
<option value="">portamento</option></select></p></li>
<li><p>When creating an arpeggio with a quantizer and an LFO, what other module is essential? <select class="webex-select"><option value="blank"></option>
<option value="answer">sample and hold</option>
<option value="">sequencer</option>
<option value="">slew</option>
<option value="">comparator</option></select></p></li>
</ol>
</div>
</div>




<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script><div class="chapter-nav">
<div class="prev"><a href="complex-generators.html"><span class="header-section-number">11</span> Modulating Generators</a></div>
<div class="next"><a href="tb-303.html"><span class="header-section-number">13</span> TB-303</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#complex-modifiers"><span class="header-section-number">12</span> Modulating Modifiers</a></li>
<li><a class="nav-link" href="#rectification-wavefolding-and-composition"><span class="header-section-number">12.1</span> Rectification, wavefolding, and composition</a></li>
<li><a class="nav-link" href="#slew"><span class="header-section-number">12.2</span> Slew</a></li>
<li><a class="nav-link" href="#quantizers"><span class="header-section-number">12.3</span> Quantizers</a></li>
<li><a class="nav-link" href="#check-your-understanding-8"><span class="header-section-number">12.4</span> Check your understanding</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/aolney/ct-modular-book/blob/master/12-com-mod-modifiers.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/aolney/ct-modular-book/edit/master/12-com-mod-modifiers.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Computational Thinking through Modular Sound Synthesis</strong>" was written by Andrew M. Olney. It was last built on 2023-01-03.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
